!function(){function t(t){return null!=t&&!isNaN(t)}function e(t){return t.length}function n(t){for(var e=1;t*e%1;)e*=10;return e}function i(t,e){try{for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}catch(i){t.prototype=e}}function r(){}function o(t){return aa+t in this}function a(t){return(t=aa+t)in this&&delete this[t]}function s(){var t=[];return this.forEach(function(e){t.push(e)}),t}function l(){var t=0;for(var e in this)e.charCodeAt(0)===sa&&++t;return t}function h(){for(var t in this)if(t.charCodeAt(0)===sa)return!1;return!0}function u(){}function c(t,e,n){return function(){var i=n.apply(e,arguments);return i===e?t:i}}function f(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.substring(1);for(var n=0,i=la.length;i>n;++n){var r=la[n]+e;if(r in t)return r}}function p(){}function d(){}function g(t){function e(){for(var e,i=n,r=-1,o=i.length;++r<o;)(e=i[r].on)&&e.apply(this,arguments);return t}var n=[],i=new r;return e.on=function(e,r){var o,a=i.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),i.remove(e)),r&&n.push(i.set(e,{on:r})),t)},e}function v(){Uo.event.preventDefault()}function y(){for(var t,e=Uo.event;t=e.sourceEvent;)e=t;return e}function m(t){for(var e=new d,n=0,i=arguments.length;++n<i;)e[arguments[n]]=g(e);return e.of=function(n,i){return function(r){try{var o=r.sourceEvent=Uo.event;r.target=t,Uo.event=r,e[r.type].apply(n,i)}finally{Uo.event=o}}},e}function x(t){return ua(t,ga),t}function b(t){return"function"==typeof t?t:function(){return ca(t,this)}}function w(t){return"function"==typeof t?t:function(){return fa(t,this)}}function _(t,e){function n(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=Uo.ns.qualify(t),null==e?t.local?i:n:"function"==typeof e?t.local?s:a:t.local?o:r}function M(t){return t.trim().replace(/\s+/g," ")}function S(t){return new RegExp("(?:^|\\s+)"+Uo.requote(t)+"(?:\\s+|$)","g")}function C(t){return t.trim().split(/^|\s+/)}function k(t,e){function n(){for(var n=-1;++n<r;)t[n](this,e)}function i(){for(var n=-1,i=e.apply(this,arguments);++n<r;)t[n](this,i)}var r=(t=C(t).map(A)).length;return"function"==typeof e?i:n}function A(t){var e=S(t);return function(n,i){if(r=n.classList)return i?r.add(t):r.remove(t);var r=n.getAttribute("class")||"";i?(e.lastIndex=0,e.test(r)||n.setAttribute("class",M(r+" "+t))):n.setAttribute("class",M(r.replace(e," ")))}}function L(t,e,n){function i(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,n)}function o(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}return null==e?i:"function"==typeof e?o:r}function T(t,e){function n(){delete this[t]}function i(){this[t]=e}function r(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?r:i}function R(t){return"function"==typeof t?t:(t=Uo.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,t)}}function P(t){return{__data__:t}}function F(t){return function(){return da(this,t)}}function E(t){return arguments.length||(t=Uo.ascending),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function z(t,e){for(var n=0,i=t.length;i>n;n++)for(var r,o=t[n],a=0,s=o.length;s>a;a++)(r=o[a])&&e(r,a,n);return t}function N(t){return ua(t,ya),t}function B(t){var e,n;return function(i,r,o){var a,s=t[o].update,l=s.length;for(o!=n&&(n=o,e=0),r>=e&&(e=r+1);!(a=s[e])&&++e<l;);return a}}function I(){var t=this.__transition__;t&&++t.active}function D(t,e,n){function i(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function r(){var r=l(e,$o(arguments));i.call(this),this.addEventListener(t,this[a]=r,r.$=n),r._=e}function o(){var e,n=new RegExp("^__on([^.]+)"+Uo.requote(t)+"$");for(var i in this)if(e=i.match(n)){var r=this[i];this.removeEventListener(e[1],r,r.$),delete this[i]}}var a="__on"+t,s=t.indexOf("."),l=H;s>0&&(t=t.substring(0,s));var h=xa.get(t);return h&&(t=h,l=W),s?e?r:i:e?p:o}function H(t,e){return function(n){var i=Uo.event;Uo.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{Uo.event=i}}}function W(t,e){var n=H(t,e);return function(t){var e=this,i=t.relatedTarget;i&&(i===e||8&i.compareDocumentPosition(e))||n.call(e,t)}}function O(){var t=".dragsuppress-"+ ++wa,e="click"+t,n=Uo.select(Ko).on("touchmove"+t,v).on("dragstart"+t,v).on("selectstart"+t,v);if(ba){var i=Qo.style,r=i[ba];i[ba]="none"}return function(o){function a(){n.on(e,null)}n.on(t,null),ba&&(i[ba]=r),o&&(n.on(e,function(){v(),a()},!0),setTimeout(a,0))}}function q(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(0>_a&&(Ko.scrollX||Ko.scrollY)){var r=(n=Uo.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();_a=!(r.f||r.e),n.remove()}return _a?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}function j(t){return t>0?1:0>t?-1:0}function Y(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function X(t){return t>1?0:-1>t?Ma:Math.acos(t)}function V(t){return t>1?Ca:-1>t?-Ca:Math.asin(t)}function U(t){return((t=Math.exp(t))-1/t)/2}function G(t){return((t=Math.exp(t))+1/t)/2}function $(t){return((t=Math.exp(2*t))-1)/(t+1)}function Z(t){return(t=Math.sin(t/2))*t}function Q(){}function K(t,e,n){return new J(t,e,n)}function J(t,e,n){this.h=t,this.s=e,this.l=n}function tt(t,e,n){function i(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(a-o)*t/60:180>t?a:240>t?o+(a-o)*(240-t)/60:o}function r(t){return Math.round(255*i(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,a=.5>=n?n*(1+e):n+e-n*e,o=2*n-a,pt(r(t+120),r(t),r(t-120))}function et(t,e,n){return new nt(t,e,n)}function nt(t,e,n){this.h=t,this.c=e,this.l=n}function it(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),rt(n,Math.cos(t*=La)*e,Math.sin(t)*e)}function rt(t,e,n){return new ot(t,e,n)}function ot(t,e,n){this.l=t,this.a=e,this.b=n}function at(t,e,n){var i=(t+16)/116,r=i+e/500,o=i-n/200;return r=lt(r)*Ha,i=lt(i)*Wa,o=lt(o)*Oa,pt(ut(3.2404542*r-1.5371385*i-.4985314*o),ut(-.969266*r+1.8760108*i+.041556*o),ut(.0556434*r-.2040259*i+1.0572252*o))}function st(t,e,n){return t>0?et(Math.atan2(n,e)*Ta,Math.sqrt(e*e+n*n),t):et(NaN,NaN,t)}function lt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ht(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ut(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ct(t){return pt(t>>16,255&t>>8,255&t)}function ft(t){return ct(t)+""}function pt(t,e,n){return new dt(t,e,n)}function dt(t,e,n){this.r=t,this.g=e,this.b=n}function gt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function vt(t,e,n){var i,r,o,a=0,s=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(t))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(bt(r[0]),bt(r[1]),bt(r[2]))}return(o=Ya.get(t))?e(o.r,o.g,o.b):(null!=t&&"#"===t.charAt(0)&&(4===t.length?(a=t.charAt(1),a+=a,s=t.charAt(2),s+=s,l=t.charAt(3),l+=l):7===t.length&&(a=t.substring(1,3),s=t.substring(3,5),l=t.substring(5,7)),a=parseInt(a,16),s=parseInt(s,16),l=parseInt(l,16)),e(a,s,l))}function yt(t,e,n){var i,r,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,l=(a+o)/2;return s?(r=.5>l?s/(a+o):s/(2-a-o),i=t==a?(e-n)/s+(n>e?6:0):e==a?(n-t)/s+2:(t-e)/s+4,i*=60):(i=NaN,r=l>0&&1>l?0:i),K(i,r,l)}function mt(t,e,n){var i=ht((.4124564*(t=xt(t))+.3575761*(e=xt(e))+.1804375*(n=xt(n)))/Ha),r=ht((.2126729*t+.7151522*e+.072175*n)/Wa);return rt(116*r-16,500*(i-r),200*(r-ht((.0193339*t+.119192*e+.9503041*n)/Oa)))}function xt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function bt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function wt(t){return"function"==typeof t?t:function(){return t}}function _t(t){return t}function Mt(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),St(e,n,t,i)}}function St(t,e,n,i){function r(){var t,e=l.status;if(!e&&l.responseText||e>=200&&300>e||304===e){try{t=n.call(o,l)}catch(i){return void a.error.call(o,i)}a.load.call(o,t)}else a.error.call(o,l)}var o={},a=Uo.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,h=null;return!Ko.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(t){var e=Uo.event;Uo.event=t;try{a.progress.call(o,l)}finally{Uo.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(h=t,o):h},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat($o(arguments)))}}),o.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),l.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),l.setRequestHeader)for(var u in s)l.setRequestHeader(u,s[u]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=h&&(l.responseType=h),null!=r&&o.on("error",r).on("load",function(t){r(null,t)}),a.beforesend.call(o,l),l.send(null==i?null:i),o},o.abort=function(){return l.abort(),o},Uo.rebind(o,a,"on"),null==i?o:o.get(Ct(i))}function Ct(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function kt(){var t=At(),e=Lt()-t;e>24?(isFinite(e)&&(clearTimeout(Ga),Ga=setTimeout(kt,e)),Ua=0):(Ua=1,Za(kt))}function At(){var t=Date.now();for($a=Xa;$a;)t>=$a.t&&($a.f=$a.c(t-$a.t)),$a=$a.n;return t}function Lt(){for(var t,e=Xa,n=1/0;e;)e.f?e=t?t.n=e.n:Xa=e.n:(e.t<n&&(n=e.t),e=(t=e).n);return Va=t,n}function Tt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Rt(t,e){var n=Math.pow(10,3*oa(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Pt(t){var e=t.decimal,n=t.thousands,i=t.grouping,r=t.currency,o=i?function(t){for(var e=t.length,r=[],o=0,a=i[0];e>0&&a>0;)r.push(t.substring(e-=a,e+a)),a=i[o=(o+1)%i.length];return r.reverse().join(n)}:_t;return function(t){var n=Ka.exec(t),i=n[1]||" ",a=n[2]||">",s=n[3]||"",l=n[4]||"",h=n[5],u=+n[6],c=n[7],f=n[8],p=n[9],d=1,g="",v="",y=!1;switch(f&&(f=+f.substring(1)),(h||"0"===i&&"="===a)&&(h=i="0",a="=",c&&(u-=Math.floor((u-1)/4))),p){case"n":c=!0,p="g";break;case"%":d=100,v="%",p="f";break;case"p":d=100,v="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+p.toLowerCase());case"c":case"d":y=!0,f=0;break;case"s":d=-1,p="r"}"$"===l&&(g=r[0],v=r[1]),"r"!=p||f||(p="g"),null!=f&&("g"==p?f=Math.max(1,Math.min(21,f)):("e"==p||"f"==p)&&(f=Math.max(0,Math.min(20,f)))),p=Ja.get(p)||Ft;var m=h&&c;return function(t){var n=v;if(y&&t%1)return"";var r=0>t||0===t&&0>1/t?(t=-t,"-"):s;if(0>d){var l=Uo.formatPrefix(t,f);t=l.scale(t),n=l.symbol+v}else t*=d;var x=(t=p(t,f)).lastIndexOf("."),b=0>x?t:t.substring(0,x),w=0>x?"":e+t.substring(x+1);!h&&c&&(b=o(b));var _=g.length+b.length+w.length+(m?0:r.length),M=u>_?new Array(_=u-_+1).join(i):"";return m&&(b=o(M+b)),r+=g,t=b+w,("<"===a?r+t+M:">"===a?M+r+t:"^"===a?M.substring(0,_>>=1)+r+t+M.substring(_):r+(m?t:M+t))+n}}}function Ft(t){return t+""}function Et(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function zt(t,e,n){function i(e){var n=t(e),i=o(n,1);return i-e>e-n?n:i}function r(n){return e(n=t(new es(n-1)),1),n}function o(t,n){return e(t=new es(+t),n),t}function a(t,i,o){var a=r(t),s=[];if(o>1)for(;i>a;)n(a)%o||s.push(new Date(+a)),e(a,1);else for(;i>a;)s.push(new Date(+a)),e(a,1);return s}function s(t,e,n){try{es=Et;var i=new Et;return i._=t,a(i,e,n)}finally{es=Date}}t.floor=t,t.round=i,t.ceil=r,t.offset=o,t.range=a;var l=t.utc=Nt(t);return l.floor=l,l.round=Nt(i),l.ceil=Nt(r),l.offset=Nt(o),l.range=s,t}function Nt(t){return function(e,n){try{es=Et;var i=new Et;return i._=e,t(i,n)._}finally{es=Date}}}function Bt(t){function e(t){function e(e){for(var n,r,o,a=[],s=-1,l=0;++s<i;)37===t.charCodeAt(s)&&(a.push(t.substring(l,s)),null!=(r=is[n=t.charAt(++s)])&&(n=t.charAt(++s)),(o=L[n])&&(n=o(e,null==r?"e"===n?" ":"0":r)),a.push(n),l=s+1);return a.push(t.substring(l,s)),a.join("")}var i=t.length;return e.parse=function(e){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(n(i,t,e,0)!=e.length)return null;"p"in i&&(i.H=i.H%12+12*i.p);var r=null!=i.Z&&es!==Et,o=new(r?Et:es);return"j"in i?o.setFullYear(i.y,0,i.j):"w"in i&&("W"in i||"U"in i)?(o.setFullYear(i.y,0,1),o.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(o.getDay()+5)%7:i.w+7*i.U-(o.getDay()+6)%7)):o.setFullYear(i.y,i.m,i.d),o.setHours(i.H+Math.floor(i.Z/100),i.M+i.Z%100,i.S,i.L),r?o._:o},e.toString=function(){return t},e}function n(t,e,n,i){for(var r,o,a,s=0,l=e.length,h=n.length;l>s;){if(i>=h)return-1;if(37===(r=e.charCodeAt(s++))){if(a=e.charAt(s++),!(o=T[a in is?e.charAt(s++):a])||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function i(t,e,n){_.lastIndex=0;var i=_.exec(e.substring(n));return i?(t.w=M.get(i[0].toLowerCase()),n+i[0].length):-1}function r(t,e,n){b.lastIndex=0;var i=b.exec(e.substring(n));return i?(t.w=w.get(i[0].toLowerCase()),n+i[0].length):-1}function o(t,e,n){k.lastIndex=0;var i=k.exec(e.substring(n));return i?(t.m=A.get(i[0].toLowerCase()),n+i[0].length):-1}function a(t,e,n){S.lastIndex=0;var i=S.exec(e.substring(n));return i?(t.m=C.get(i[0].toLowerCase()),n+i[0].length):-1}function s(t,e,i){return n(t,L.c.toString(),e,i)}function l(t,e,i){return n(t,L.x.toString(),e,i)}function h(t,e,i){return n(t,L.X.toString(),e,i)}function u(t,e,n){var i=x.get(e.substring(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)}var c=t.dateTime,f=t.date,p=t.time,d=t.periods,g=t.days,v=t.shortDays,y=t.months,m=t.shortMonths;e.utc=function(t){function n(t){try{var e=new(es=Et);return e._=t,i(e)}finally{es=Date}}var i=e(t);return n.parse=function(t){try{es=Et;var e=i.parse(t);return e&&e._}finally{es=Date}},n.toString=i.toString,n},e.multi=e.utc.multi=ne;var x=Uo.map(),b=Dt(g),w=Ht(g),_=Dt(v),M=Ht(v),S=Dt(y),C=Ht(y),k=Dt(m),A=Ht(m);d.forEach(function(t,e){x.set(t.toLowerCase(),e)});var L={a:function(t){return v[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return m[t.getMonth()]},B:function(t){return y[t.getMonth()]},c:e(c),d:function(t,e){return It(t.getDate(),e,2)},e:function(t,e){return It(t.getDate(),e,2)},H:function(t,e){return It(t.getHours(),e,2)},I:function(t,e){return It(t.getHours()%12||12,e,2)},j:function(t,e){return It(1+ts.dayOfYear(t),e,3)},L:function(t,e){return It(t.getMilliseconds(),e,3)},m:function(t,e){return It(t.getMonth()+1,e,2)},M:function(t,e){return It(t.getMinutes(),e,2)},p:function(t){return d[+(t.getHours()>=12)]},S:function(t,e){return It(t.getSeconds(),e,2)},U:function(t,e){return It(ts.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return It(ts.mondayOfYear(t),e,2)},x:e(f),X:e(p),y:function(t,e){return It(t.getFullYear()%100,e,2)},Y:function(t,e){return It(t.getFullYear()%1e4,e,4)},Z:te,"%":function(){return"%"}},T={a:i,A:r,b:o,B:a,c:s,d:Gt,e:Gt,H:Zt,I:Zt,j:$t,L:Jt,m:Ut,M:Qt,p:u,S:Kt,U:Ot,w:Wt,W:qt,x:l,X:h,y:Yt,Y:jt,Z:Xt,"%":ee};return e}function It(t,e,n){var i=0>t?"-":"",r=(i?-t:t)+"",o=r.length;return i+(n>o?new Array(n-o+1).join(e)+r:r)}function Dt(t){return new RegExp("^(?:"+t.map(Uo.requote).join("|")+")","i")}function Ht(t){for(var e=new r,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function Wt(t,e,n){rs.lastIndex=0;var i=rs.exec(e.substring(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Ot(t,e,n){rs.lastIndex=0;var i=rs.exec(e.substring(n));return i?(t.U=+i[0],n+i[0].length):-1}function qt(t,e,n){rs.lastIndex=0;var i=rs.exec(e.substring(n));return i?(t.W=+i[0],n+i[0].length):-1}function jt(t,e,n){rs.lastIndex=0;var i=rs.exec(e.substring(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Yt(t,e,n){rs.lastIndex=0;var i=rs.exec(e.substring(n,n+2));return i?(t.y=Vt(+i[0]),n+i[0].length):-1}function Xt(t,e,n){return/^[+-]\d{4}$/.test(e=e.substring(n,n+5))?(t.Z=+e,n+5):-1}function Vt(t){return t+(t>68?1900:2e3)}function Ut(t,e,n){rs.lastIndex=0;var i=rs.exec(e.substring(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Gt(t,e,n){rs.lastIndex=0;var i=rs.exec(e.substring(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function $t(t,e,n){rs.lastIndex=0;var i=rs.exec(e.substring(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function Zt(t,e,n){rs.lastIndex=0;var i=rs.exec(e.substring(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Qt(t,e,n){rs.lastIndex=0;var i=rs.exec(e.substring(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Kt(t,e,n){rs.lastIndex=0;var i=rs.exec(e.substring(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Jt(t,e,n){rs.lastIndex=0;var i=rs.exec(e.substring(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function te(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=~~(oa(e)/60),r=oa(e)%60;return n+It(i,"0",2)+It(r,"0",2)}function ee(t,e,n){os.lastIndex=0;var i=os.exec(e.substring(n,n+1));return i?n+i[0].length:-1}function ne(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,i=t[n];!i[1](e);)i=t[++n];return i[0](e)}}function ie(){}function re(t,e,n){var i=n.s=t+e,r=i-t,o=i-r;n.t=t-o+(e-r)}function oe(t,e){t&&hs.hasOwnProperty(t.type)&&hs[t.type](t,e)}function ae(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function se(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)ae(t[n],e,1);e.polygonEnd()}function le(){function t(t,e){e=e*La/2+Ma/4;var n=(t*=La)-i,a=Math.cos(e),s=Math.sin(e),l=o*s,h=r*a+l*Math.cos(n),u=l*Math.sin(n);cs.add(Math.atan2(u,h)),i=t,r=a,o=s}var e,n,i,r,o;fs.point=function(a,s){fs.point=t,i=(e=a)*La,r=Math.cos(s=(n=s)*La/2+Ma/4),o=Math.sin(s)},fs.lineEnd=function(){t(e,n)}}function he(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function ue(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ce(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function fe(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function pe(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function de(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function ge(t){return[Math.atan2(t[1],t[0]),V(t[2])]}function ve(t,e){return oa(t[0]-e[0])<ka&&oa(t[1]-e[1])<ka}function ye(t,e){t*=La;var n=Math.cos(e*=La);me(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function me(t,e,n){gs+=(t-gs)/++ps,vs+=(e-vs)/ps,ys+=(n-ys)/ps}function xe(){function t(t,r){t*=La;var o=Math.cos(r*=La),a=o*Math.cos(t),s=o*Math.sin(t),l=Math.sin(r),h=Math.atan2(Math.sqrt((h=n*l-i*s)*h+(h=i*a-e*l)*h+(h=e*s-n*a)*h),e*a+n*s+i*l);ds+=h,ms+=h*(e+(e=a)),xs+=h*(n+(n=s)),bs+=h*(i+(i=l)),me(e,n,i)}var e,n,i;Ss.point=function(r,o){r*=La;var a=Math.cos(o*=La);e=a*Math.cos(r),n=a*Math.sin(r),i=Math.sin(o),Ss.point=t,me(e,n,i)}}function be(){Ss.point=ye}function we(){function t(t,e){t*=La;var n=Math.cos(e*=La),a=n*Math.cos(t),s=n*Math.sin(t),l=Math.sin(e),h=r*l-o*s,u=o*a-i*l,c=i*s-r*a,f=Math.sqrt(h*h+u*u+c*c),p=i*a+r*s+o*l,d=f&&-X(p)/f,g=Math.atan2(f,p);ws+=d*h,_s+=d*u,Ms+=d*c,ds+=g,ms+=g*(i+(i=a)),xs+=g*(r+(r=s)),bs+=g*(o+(o=l)),me(i,r,o)}var e,n,i,r,o;Ss.point=function(a,s){e=a,n=s,Ss.point=t,a*=La;var l=Math.cos(s*=La);i=l*Math.cos(a),r=l*Math.sin(a),o=Math.sin(s),me(i,r,o)},Ss.lineEnd=function(){t(e,n),Ss.lineEnd=be,Ss.point=ye}}function _e(){return!0}function Me(t,e,n,i,r){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(ve(n,i)){r.lineStart();for(var s=0;e>s;++s)r.point((n=t[s])[0],n[1]);return void r.lineEnd()}var l=new Ce(n,t,null,!0),h=new Ce(n,null,l,!1);l.o=h,o.push(l),a.push(h),h=new Ce(i,null,l=new Ce(i,t,null,!1),!0),l.o=h,o.push(l),a.push(h)}}),a.sort(e),Se(o),Se(a),o.length){for(var s=0,l=n,h=a.length;h>s;++s)a[s].e=l=!l;for(var u,c,f=o[0];;){for(var p=f,d=!0;p.v;)if((p=p.n)===f)return;u=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(s=0,h=u.length;h>s;++s)r.point((c=u[s])[0],c[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(d)for(s=(u=p.p.z).length-1;s>=0;--s)r.point((c=u[s])[0],c[1]);else i(p.x,p.p.x,-1,r);p=p.p}u=(p=p.o).z,d=!d}while(!p.v);r.lineEnd()}}}function Se(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Ce(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function ke(t,e,n,i){return function(r,o){function a(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&o.point(e,n)}function s(t,e){var n=r(t,e);v.point(n[0],n[1])}function l(){m.point=s,v.lineStart()}function h(){m.point=a,v.lineEnd()}function u(t,e){g.push([t,e]);var n=r(t,e);b.point(n[0],n[1])}function c(){b.lineStart(),g=[]}function f(){u(g[0][0],g[0][1]),b.lineEnd();var t,e=b.clean(),n=x.buffer(),i=n.length;if(g.pop(),d.push(g),g=null,i){if(1&e){i=(t=n[0]).length-1;var r,a=-1;for(o.lineStart();++a<i;)o.point((r=t[a])[0],r[1]);return void o.lineEnd()}i>1&&2&e&&n.push(n.pop().concat(n.shift())),p.push(n.filter(Ae))}}var p,d,g,v=e(o),y=r.invert(i[0],i[1]),m={point:a,lineStart:l,lineEnd:h,polygonStart:function(){m.point=u,m.lineStart=c,m.lineEnd=f,p=[],d=[],o.polygonStart()},polygonEnd:function(){m.point=a,m.lineStart=l,m.lineEnd=h,p=Uo.merge(p);var t=Re(y,d);p.length?Me(p,Te,t,n,o):t&&(o.lineStart(),n(null,null,1,o),o.lineEnd()),o.polygonEnd(),p=d=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},x=Le(),b=e(x);return m}}function Ae(t){return t.length>1}function Le(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:p,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Te(t,e){return((t=t.x)[0]<0?t[1]-Ca-ka:Ca-t[1])-((e=e.x)[0]<0?e[1]-Ca-ka:Ca-e[1])}function Re(t,e){var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],o=0,a=0;cs.reset();for(var s=0,l=e.length;l>s;++s){var h=e[s],u=h.length;if(u)for(var c=h[0],f=c[0],p=c[1]/2+Ma/4,d=Math.sin(p),g=Math.cos(p),v=1;;){v===u&&(v=0);var y=(t=h[v])[0],m=t[1]/2+Ma/4,x=Math.sin(m),b=Math.cos(m),w=y-f,_=oa(w)>Ma,M=d*x;if(cs.add(Math.atan2(M*Math.sin(w),g*b+M*Math.cos(w))),o+=_?w+(w>=0?Sa:-Sa):w,_^f>=n^y>=n){var S=ce(he(c),he(t));de(S);var C=ce(r,S);de(C);var k=(_^w>=0?-1:1)*V(C[2]);(i>k||i===k&&(S[0]||S[1]))&&(a+=_^w>=0?1:-1)}if(!v++)break;f=y,d=x,g=b,c=t}}return(-ka>o||ka>o&&0>cs)^1&a}function Pe(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Ma:-Ma,l=oa(o-n);oa(l-Ma)<ka?(t.point(n,i=(i+a)/2>0?Ca:-Ca),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(o,i),e=0):r!==s&&l>=Ma&&(oa(n-r)<ka&&(n-=r*ka),oa(o-s)<ka&&(o-=s*ka),i=Fe(n,i,o,a),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=o,i=a),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}function Fe(t,e,n,i){var r,o,a=Math.sin(t-n);return oa(a)>ka?Math.atan((Math.sin(e)*(o=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(e))*Math.sin(t))/(r*o*a)):(e+i)/2}function Ee(t,e,n,i){var r;if(null==t)r=n*Ca,i.point(-Ma,r),i.point(0,r),i.point(Ma,r),i.point(Ma,0),i.point(Ma,-r),i.point(0,-r),i.point(-Ma,-r),i.point(-Ma,0),i.point(-Ma,r);else if(oa(t[0]-e[0])>ka){var o=t[0]<e[0]?Ma:-Ma;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}function ze(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,l,h,u;return{lineStart:function(){h=l=!1,u=1},point:function(c,f){var p,d=[c,f],g=e(c,f),v=a?g?0:r(c,f):g?r(c+(0>c?Ma:-Ma),f):0;if(!n&&(h=l=g)&&t.lineStart(),g!==l&&(p=i(n,d),(ve(n,p)||ve(d,p))&&(d[0]+=ka,d[1]+=ka,g=e(d[0],d[1]))),g!==l)u=0,g?(t.lineStart(),p=i(d,n),t.point(p[0],p[1])):(p=i(n,d),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(s&&n&&a^g){var y;v&o||!(y=i(d,n,!0))||(u=0,a?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!g||n&&ve(n,d)||t.point(d[0],d[1]),n=d,l=g,o=v},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return u|(h&&l)<<1}}}function i(t,e,n){var i=[1,0,0],r=ce(he(t),he(e)),a=ue(r,r),s=r[0],l=a-s*s;if(!l)return!n&&t;var h=o*a/l,u=-o*s/l,c=ce(i,r),f=pe(i,h);fe(f,pe(r,u));var p=c,d=ue(f,p),g=ue(p,p),v=d*d-g*(ue(f,f)-1);if(!(0>v)){var y=Math.sqrt(v),m=pe(p,(-d-y)/g);if(fe(m,f),m=ge(m),!n)return m;var x,b=t[0],w=e[0],_=t[1],M=e[1];b>w&&(x=b,b=w,w=x);var S=w-b,C=oa(S-Ma)<ka;if(!C&&_>M&&(x=_,_=M,M=x),C||ka>S?C?_+M>0^m[1]<(oa(m[0]-b)<ka?_:M):_<=m[1]&&m[1]<=M:S>Ma^(b<=m[0]&&m[0]<=w)){var k=pe(p,(-d+y)/g);return fe(k,f),[m,ge(k)]}}}function r(e,n){var i=a?t:Ma-t,r=0;return-i>e?r|=1:e>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var o=Math.cos(t),a=o>0,s=oa(o)>ka;return ke(e,n,hn(t,6*La),a?[0,-t]:[-Ma,t-Ma])}function Ne(t,e,n,i){return function(r){var o,a=r.a,s=r.b,l=a.x,h=a.y,u=0,c=1,f=s.x-l,p=s.y-h;if(o=t-l,f||!(o>0)){if(o/=f,0>f){if(u>o)return;c>o&&(c=o)}else if(f>0){if(o>c)return;o>u&&(u=o)}if(o=n-l,f||!(0>o)){if(o/=f,0>f){if(o>c)return;o>u&&(u=o)}else if(f>0){if(u>o)return;c>o&&(c=o)}if(o=e-h,p||!(o>0)){if(o/=p,0>p){if(u>o)return;c>o&&(c=o)}else if(p>0){if(o>c)return;o>u&&(u=o)}if(o=i-h,p||!(0>o)){if(o/=p,0>p){if(o>c)return;o>u&&(u=o)}else if(p>0){if(u>o)return;c>o&&(c=o)}return u>0&&(r.a={x:l+u*f,y:h+u*p}),1>c&&(r.b={x:l+c*f,y:h+c*p}),r}}}}}}function Be(t,e,n,i){function r(i,r){return oa(i[0]-t)<ka?r>0?0:3:oa(i[0]-n)<ka?r>0?2:1:oa(i[1]-e)<ka?r>0?1:0:r>0?3:2}function o(t,e){return a(t.x,e.x)}function a(t,e){var n=r(t,1),i=r(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function l(t){for(var e=0,n=v.length,i=t[1],r=0;n>r;++r)for(var o,a=1,s=v[r],l=s.length,h=s[0];l>a;++a)o=s[a],h[1]<=i?o[1]>i&&Y(h,o,t)>0&&++e:o[1]<=i&&Y(h,o,t)<0&&--e,h=o;return 0!==e}function h(o,s,l,h){var u=0,c=0;if(null==o||(u=r(o,l))!==(c=r(s,l))||a(o,s)<0^l>0){do{h.point(0===u||3===u?t:n,u>1?i:e)}while((u=(u+l+4)%4)!==c)}else h.point(s[0],s[1])}function u(r,o){return r>=t&&n>=r&&o>=e&&i>=o}function c(t,e){u(t,e)&&s.point(t,e)}function f(){T.point=d,v&&v.push(y=[]),S=!0,M=!1,w=_=NaN}function p(){g&&(d(m,x),b&&M&&A.rejoin(),g.push(A.buffer())),T.point=c,M&&s.lineEnd()}function d(t,e){var n=u(t=Math.max(-ks,Math.min(ks,t)),e=Math.max(-ks,Math.min(ks,e)));if(v&&y.push([t,e]),S)m=t,x=e,b=n,S=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&M)s.point(t,e);else{var i={a:{x:w,y:_},b:{x:t,y:e}};L(i)?(M||(s.lineStart(),s.point(i.a.x,i.a.y)),s.point(i.b.x,i.b.y),n||s.lineEnd(),C=!1):n&&(s.lineStart(),s.point(t,e),C=!1)}w=t,_=e,M=n}var g,v,y,m,x,b,w,_,M,S,C,k=s,A=Le(),L=Ne(t,e,n,i),T={point:c,lineStart:f,lineEnd:p,polygonStart:function(){s=A,g=[],v=[],C=!0},polygonEnd:function(){s=k,g=Uo.merge(g);var e=l([t,i]),n=C&&e,r=g.length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),h(null,null,1,s),s.lineEnd()),r&&Me(g,o,e,h,s),s.polygonEnd()),g=v=y=null}};return T}}function Ie(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function De(t){var e=0,n=Ma/3,i=tn(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Ma/180,n=t[1]*Ma/180):[e/Ma*180,n/Ma*180]},r}function He(t,e){function n(t,e){var n=Math.sqrt(o-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),a-n*Math.cos(t)]}var i=Math.sin(t),r=(i+Math.sin(e))/2,o=1+i*(2*r-i),a=Math.sqrt(o)/r;return n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/r,V((o-(t*t+n*n)*r*r)/(2*r))]},n}function We(){function t(t,e){Ls+=r*t-i*e,i=t,r=e}var e,n,i,r;Es.point=function(o,a){Es.point=t,e=i=o,n=r=a},Es.lineEnd=function(){t(e,n)}}function Oe(t,e){Ts>t&&(Ts=t),t>Ps&&(Ps=t),Rs>e&&(Rs=e),e>Fs&&(Fs=e)}function qe(){function t(t,e){a.push("M",t,",",e,o)}function e(t,e){a.push("M",t,",",e),s.point=n}function n(t,e){a.push("L",t,",",e)}function i(){s.point=t}function r(){a.push("Z")}var o=je(4.5),a=[],s={point:t,lineStart:function(){s.point=e},lineEnd:i,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(t){return o=je(t),s},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return s}function je(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ye(t,e){gs+=t,vs+=e,++ys}function Xe(){function t(t,i){var r=t-e,o=i-n,a=Math.sqrt(r*r+o*o);ms+=a*(e+t)/2,xs+=a*(n+i)/2,bs+=a,Ye(e=t,n=i)}var e,n;Ns.point=function(i,r){Ns.point=t,Ye(e=i,n=r)}}function Ve(){Ns.point=Ye}function Ue(){function t(t,e){var n=t-i,o=e-r,a=Math.sqrt(n*n+o*o);ms+=a*(i+t)/2,xs+=a*(r+e)/2,bs+=a,ws+=(a=r*t-i*e)*(i+t),_s+=a*(r+e),Ms+=3*a,Ye(i=t,r=e)}var e,n,i,r;Ns.point=function(o,a){Ns.point=t,Ye(e=i=o,n=r=a)},Ns.lineEnd=function(){t(e,n)}}function Ge(t){function e(e,n){t.moveTo(e,n),t.arc(e,n,a,0,Sa)}function n(e,n){t.moveTo(e,n),s.point=i}function i(e,n){t.lineTo(e,n)}function r(){s.point=e}function o(){t.closePath()}var a=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:r,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(t){return a=t,s},result:p};return s}function $e(t){function e(t){return(s?i:n)(t)}function n(e){return Ke(e,function(n,i){n=t(n,i),e.point(n[0],n[1])})}function i(e){function n(n,i){n=t(n,i),e.point(n[0],n[1])}function i(){x=NaN,S.point=o,e.lineStart()}function o(n,i){var o=he([n,i]),a=t(n,i);r(x,b,m,w,_,M,x=a[0],b=a[1],m=n,w=o[0],_=o[1],M=o[2],s,e),e.point(x,b)}function a(){S.point=n,e.lineEnd()}function l(){i(),S.point=h,S.lineEnd=u}function h(t,e){o(c=t,f=e),p=x,d=b,g=w,v=_,y=M,S.point=o}function u(){r(x,b,m,w,_,M,p,d,c,g,v,y,s,e),S.lineEnd=a,a()}var c,f,p,d,g,v,y,m,x,b,w,_,M,S={point:n,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),S.lineStart=l},polygonEnd:function(){e.polygonEnd(),S.lineStart=i}};return S}function r(e,n,i,s,l,h,u,c,f,p,d,g,v,y){var m=u-e,x=c-n,b=m*m+x*x;if(b>4*o&&v--){var w=s+p,_=l+d,M=h+g,S=Math.sqrt(w*w+_*_+M*M),C=Math.asin(M/=S),k=oa(oa(M)-1)<ka||oa(i-f)<ka?(i+f)/2:Math.atan2(_,w),A=t(k,C),L=A[0],T=A[1],R=L-e,P=T-n,F=x*R-m*P;(F*F/b>o||oa((m*R+x*P)/b-.5)>.3||a>s*p+l*d+h*g)&&(r(e,n,i,s,l,h,L,T,k,w/=S,_/=S,M,v,y),y.point(L,T),r(L,T,k,w,_,M,u,c,f,p,d,g,v,y))}}var o=.5,a=Math.cos(30*La),s=16;return e.precision=function(t){return arguments.length?(s=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function Ze(t){var e=$e(function(e,n){return t([e*Ta,n*Ta])});return function(t){return en(e(t))}}function Qe(t){this.stream=t}function Ke(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Je(t){return tn(function(){return t})()}function tn(t){function e(t){return t=s(t[0]*La,t[1]*La),[t[0]*f+l,h-t[1]*f]}function n(t){return(t=s.invert((t[0]-l)/f,(h-t[1])/f))&&[t[0]*Ta,t[1]*Ta]}function i(){s=Ie(a=on(y,m,x),o);var t=o(g,v);return l=p-t[0]*f,h=d+t[1]*f,r()}function r(){return u&&(u.valid=!1,u=null),e}var o,a,s,l,h,u,c=$e(function(t,e){return t=o(t,e),[t[0]*f+l,h-t[1]*f]}),f=150,p=480,d=250,g=0,v=0,y=0,m=0,x=0,b=Cs,w=_t,_=null,M=null;return e.stream=function(t){return u&&(u.valid=!1),u=en(b(a,c(w(t)))),u.valid=!0,u},e.clipAngle=function(t){return arguments.length?(b=null==t?(_=t,Cs):ze((_=+t)*La),r()):_},e.clipExtent=function(t){return arguments.length?(M=t,w=t?Be(t[0][0],t[0][1],t[1][0],t[1][1]):_t,r()):M},e.scale=function(t){return arguments.length?(f=+t,i()):f},e.translate=function(t){return arguments.length?(p=+t[0],d=+t[1],i()):[p,d]},e.center=function(t){return arguments.length?(g=t[0]%360*La,v=t[1]%360*La,i()):[g*Ta,v*Ta]},e.rotate=function(t){return arguments.length?(y=t[0]%360*La,m=t[1]%360*La,x=t.length>2?t[2]%360*La:0,i()):[y*Ta,m*Ta,x*Ta]},Uo.rebind(e,c,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,i()}}function en(t){return Ke(t,function(e,n){t.point(e*La,n*La)})}function nn(t,e){return[t,e]}function rn(t,e){return[t>Ma?t-Sa:-Ma>t?t+Sa:t,e]}function on(t,e,n){
return t?e||n?Ie(sn(t),ln(e,n)):sn(t):e||n?ln(e,n):rn}function an(t){return function(e,n){return e+=t,[e>Ma?e-Sa:-Ma>e?e+Sa:e,n]}}function sn(t){var e=an(t);return e.invert=an(-t),e}function ln(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,h=Math.sin(e),u=h*i+s*r;return[Math.atan2(l*o-u*a,s*i-h*r),V(u*o+l*a)]}var i=Math.cos(t),r=Math.sin(t),o=Math.cos(e),a=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,h=Math.sin(e),u=h*o-l*a;return[Math.atan2(l*o+h*a,s*i+u*r),V(u*i-s*r)]},n}function hn(t,e){var n=Math.cos(t),i=Math.sin(t);return function(r,o,a,s){var l=a*e;null!=r?(r=un(n,r),o=un(n,o),(a>0?o>r:r>o)&&(r+=a*Sa)):(r=t+a*Sa,o=t-.5*l);for(var h,u=r;a>0?u>o:o>u;u-=l)s.point((h=ge([n,-i*Math.cos(u),-i*Math.sin(u)]))[0],h[1])}}function un(t,e){var n=he(e);n[0]-=t,de(n);var i=X(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-ka)%(2*Math.PI)}function cn(t,e,n){var i=Uo.range(t,e-ka,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function fn(t,e,n){var i=Uo.range(t,e-ka,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function pn(t){return t.source}function dn(t){return t.target}function gn(t,e,n,i){var r=Math.cos(e),o=Math.sin(e),a=Math.cos(i),s=Math.sin(i),l=r*Math.cos(t),h=r*Math.sin(t),u=a*Math.cos(n),c=a*Math.sin(n),f=2*Math.asin(Math.sqrt(Z(i-e)+r*a*Z(n-t))),p=1/Math.sin(f),d=f?function(t){var e=Math.sin(t*=f)*p,n=Math.sin(f-t)*p,i=n*l+e*u,r=n*h+e*c,a=n*o+e*s;return[Math.atan2(r,i)*Ta,Math.atan2(a,Math.sqrt(i*i+r*r))*Ta]}:function(){return[t*Ta,e*Ta]};return d.distance=f,d}function vn(){function t(t,r){var o=Math.sin(r*=La),a=Math.cos(r),s=oa((t*=La)-e),l=Math.cos(s);Bs+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=i*o-n*a*l)*s),n*o+i*a*l),e=t,n=o,i=a}var e,n,i;Is.point=function(r,o){e=r*La,n=Math.sin(o*=La),i=Math.cos(o),Is.point=t},Is.lineEnd=function(){Is.point=Is.lineEnd=p}}function yn(t,e){function n(e,n){var i=Math.cos(e),r=Math.cos(n),o=t(i*r);return[o*r*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var i=Math.sqrt(t*t+n*n),r=e(i),o=Math.sin(r),a=Math.cos(r);return[Math.atan2(t*o,i*a),Math.asin(i&&n*o/i)]},n}function mn(t,e){function n(t,e){var n=oa(oa(e)-Ca)<ka?0:a/Math.pow(r(e),o);return[n*Math.sin(o*t),a-n*Math.cos(o*t)]}var i=Math.cos(t),r=function(t){return Math.tan(Ma/4+t/2)},o=t===e?Math.sin(t):Math.log(i/Math.cos(e))/Math.log(r(e)/r(t)),a=i*Math.pow(r(t),o)/o;return o?(n.invert=function(t,e){var n=a-e,i=j(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(a/i,1/o))-Ca]},n):bn}function xn(t,e){function n(t,e){var n=o-e;return[n*Math.sin(r*t),o-n*Math.cos(r*t)]}var i=Math.cos(t),r=t===e?Math.sin(t):(i-Math.cos(e))/(e-t),o=i/r+t;return oa(r)<ka?nn:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,o-j(r)*Math.sqrt(t*t+n*n)]},n)}function bn(t,e){return[t,Math.log(Math.tan(Ma/4+e/2))]}function wn(t){var e,n=Je(t),i=n.scale,r=n.translate,o=n.clipExtent;return n.scale=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var s=Ma*i(),l=r();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}function _n(t,e){return[Math.log(Math.tan(Ma/4+e/2)),-t]}function Mn(t){return t[0]}function Sn(t){return t[1]}function Cn(t){for(var e=t.length,n=[0,1],i=2,r=2;e>r;r++){for(;i>1&&Y(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function kn(t,e){return t[0]-e[0]||t[1]-e[1]}function An(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Ln(t,e,n,i){var r=t[0],o=n[0],a=e[0]-r,s=i[0]-o,l=t[1],h=n[1],u=e[1]-l,c=i[1]-h,f=(s*(l-h)-c*(r-o))/(c*a-s*u);return[r+f*a,l+f*u]}function Tn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function Rn(){Qn(this),this.edge=this.site=this.circle=null}function Pn(t){var e=$s.pop()||new Rn;return e.site=t,e}function Fn(t){qn(t),Vs.remove(t),$s.push(t),Qn(t)}function En(t){var e=t.circle,n=e.x,i=e.cy,r={x:n,y:i},o=t.P,a=t.N,s=[t];Fn(t);for(var l=o;l.circle&&oa(n-l.circle.x)<ka&&oa(i-l.circle.cy)<ka;)o=l.P,s.unshift(l),Fn(l),l=o;s.unshift(l),qn(l);for(var h=a;h.circle&&oa(n-h.circle.x)<ka&&oa(i-h.circle.cy)<ka;)a=h.N,s.push(h),Fn(h),h=a;s.push(h),qn(h);var u,c=s.length;for(u=1;c>u;++u)h=s[u],l=s[u-1],Gn(h.edge,l.site,h.site,r);l=s[0],(h=s[c-1]).edge=Vn(l.site,h.site,null,r),On(l),On(h)}function zn(t){for(var e,n,i,r,o=t.x,a=t.y,s=Vs._;s;)if((i=Nn(s,a)-o)>ka)s=s.L;else{if(!((r=o-Bn(s,a))>ka)){i>-ka?(e=s.P,n=s):r>-ka?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=Pn(t);if(Vs.insert(e,l),e||n){if(e===n)return qn(e),n=Pn(e.site),Vs.insert(l,n),l.edge=n.edge=Vn(e.site,l.site),On(e),void On(n);if(!n)return void(l.edge=Vn(e.site,l.site));qn(e),qn(n);var h=e.site,u=h.x,c=h.y,f=t.x-u,p=t.y-c,d=n.site,g=d.x-u,v=d.y-c,y=2*(f*v-p*g),m=f*f+p*p,x=g*g+v*v,b={x:(v*m-p*x)/y+u,y:(f*x-g*m)/y+c};Gn(n.edge,h,d,b),l.edge=Vn(h,t,null,b),n.edge=Vn(t,d,null,b),On(e),On(n)}}function Nn(t,e){var n=t.site,i=n.x,r=n.y,o=r-e;if(!o)return i;var a=t.P;if(!a)return-1/0;var s=(n=a.site).x,l=n.y,h=l-e;if(!h)return s;var u=s-i,c=1/o-1/h,f=u/h;return c?(-f+Math.sqrt(f*f-2*c*(u*u/(-2*h)-l+h/2+r-o/2)))/c+i:(i+s)/2}function Bn(t,e){var n=t.N;if(n)return Nn(n,e);var i=t.site;return i.y===e?i.x:1/0}function In(t){this.site=t,this.edges=[]}function Dn(t){for(var e,n,i,r,o,a,s,l,h,u,c=t[0][0],f=t[1][0],p=t[0][1],d=t[1][1],g=Xs,v=g.length;v--;)if((o=g[v])&&o.prepare())for(s=o.edges,l=s.length,a=0;l>a;)u=s[a].end(),i=u.x,r=u.y,h=s[++a%l].start(),e=h.x,n=h.y,(oa(i-e)>ka||oa(r-n)>ka)&&(s.splice(a,0,new $n(Un(o.site,u,oa(i-c)<ka&&d-r>ka?{x:c,y:oa(e-c)<ka?n:d}:oa(r-d)<ka&&f-i>ka?{x:oa(n-d)<ka?e:f,y:d}:oa(i-f)<ka&&r-p>ka?{x:f,y:oa(e-f)<ka?n:p}:oa(r-p)<ka&&i-c>ka?{x:oa(n-p)<ka?e:c,y:p}:null),o.site,null)),++l)}function Hn(t,e){return e.angle-t.angle}function Wn(){Qn(this),this.x=this.y=this.arc=this.site=this.cy=null}function On(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var a=r.x,s=r.y,l=i.x-a,h=i.y-s,u=o.x-a,c=2*(l*(v=o.y-s)-h*u);if(!(c>=-Aa)){var f=l*l+h*h,p=u*u+v*v,d=(v*f-h*p)/c,g=(l*p-u*f)/c,v=g+s,y=Zs.pop()||new Wn;y.arc=t,y.site=r,y.x=d+a,y.y=v+Math.sqrt(d*d+g*g),y.cy=v,t.circle=y;for(var m=null,x=Gs._;x;)if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(!x.L){m=x.P;break}x=x.L}else{if(!x.R){m=x;break}x=x.R}Gs.insert(m,y),m||(Us=y)}}}}function qn(t){var e=t.circle;e&&(e.P||(Us=e.N),Gs.remove(e),Zs.push(e),Qn(e),t.circle=null)}function jn(t){for(var e,n=Ys,i=Ne(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)e=n[r],(!Yn(e,t)||!i(e)||oa(e.a.x-e.b.x)<ka&&oa(e.a.y-e.b.y)<ka)&&(e.a=e.b=null,n.splice(r,1))}function Yn(t,e){var n=t.b;if(n)return!0;var i,r,o=t.a,a=e[0][0],s=e[1][0],l=e[0][1],h=e[1][1],u=t.l,c=t.r,f=u.x,p=u.y,d=c.x,g=c.y,v=(f+d)/2,y=(p+g)/2;if(g===p){if(a>v||v>=s)return;if(f>d){if(o){if(o.y>=h)return}else o={x:v,y:l};n={x:v,y:h}}else{if(o){if(o.y<l)return}else o={x:v,y:h};n={x:v,y:l}}}else if(i=(f-d)/(g-p),r=y-i*v,-1>i||i>1)if(f>d){if(o){if(o.y>=h)return}else o={x:(l-r)/i,y:l};n={x:(h-r)/i,y:h}}else{if(o){if(o.y<l)return}else o={x:(h-r)/i,y:h};n={x:(l-r)/i,y:l}}else if(g>p){if(o){if(o.x>=s)return}else o={x:a,y:i*a+r};n={x:s,y:i*s+r}}else{if(o){if(o.x<a)return}else o={x:s,y:i*s+r};n={x:a,y:i*a+r}}return t.a=o,t.b=n,!0}function Xn(t,e){this.l=t,this.r=e,this.a=this.b=null}function Vn(t,e,n,i){var r=new Xn(t,e);return Ys.push(r),n&&Gn(r,t,e,n),i&&Gn(r,e,t,i),Xs[t.i].edges.push(new $n(r,t,e)),Xs[e.i].edges.push(new $n(r,e,t)),r}function Un(t,e,n){var i=new Xn(t,null);return i.a=e,i.b=n,Ys.push(i),i}function Gn(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function $n(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function Zn(){this._=null}function Qn(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Kn(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Jn(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function ti(t){for(;t.L;)t=t.L;return t}function ei(t,e){var n,i,r,o=t.sort(ni).pop();for(Ys=[],Xs=new Array(t.length),Vs=new Zn,Gs=new Zn;;)if(r=Us,o&&(!r||o.y<r.y||o.y===r.y&&o.x<r.x))(o.x!==n||o.y!==i)&&(Xs[o.i]=new In(o),zn(o),n=o.x,i=o.y),o=t.pop();else{if(!r)break;En(r.arc)}e&&(jn(e),Dn(e));var a={cells:Xs,edges:Ys};return Vs=Gs=Ys=Xs=null,a}function ni(t,e){return e.y-t.y||e.x-t.x}function ii(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function ri(t){return t.x}function oi(t){return t.y}function ai(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function si(t,e,n,i,r,o){if(!t(e,n,i,r,o)){var a=.5*(n+r),s=.5*(i+o),l=e.nodes;l[0]&&si(t,l[0],n,i,a,s),l[1]&&si(t,l[1],a,i,r,s),l[2]&&si(t,l[2],n,s,a,o),l[3]&&si(t,l[3],a,s,r,o)}}function li(t,e){t=Uo.rgb(t),e=Uo.rgb(e);var n=t.r,i=t.g,r=t.b,o=e.r-n,a=e.g-i,s=e.b-r;return function(t){return"#"+gt(Math.round(n+o*t))+gt(Math.round(i+a*t))+gt(Math.round(r+s*t))}}function hi(t,e){var n,i={},r={};for(n in t)n in e?i[n]=fi(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function ui(t,e){return e-=t=+t,function(n){return t+e*n}}function ci(t,e){var n,i,r,o,a,s=0,l=[],h=[];for(t+="",e+="",Ks.lastIndex=0,i=0;n=Ks.exec(e);++i)n.index&&l.push(e.substring(s,n.index)),h.push({i:l.length,x:n[0]}),l.push(null),s=Ks.lastIndex;for(s<e.length&&l.push(e.substring(s)),i=0,o=h.length;(n=Ks.exec(t))&&o>i;++i)if((a=h[i]).x==n[0]){if(a.i)if(null==l[a.i+1])for(l[a.i-1]+=a.x,l.splice(a.i,1),r=i+1;o>r;++r)h[r].i--;else for(l[a.i-1]+=a.x+l[a.i+1],l.splice(a.i,2),r=i+1;o>r;++r)h[r].i-=2;else if(null==l[a.i+1])l[a.i]=a.x;else for(l[a.i]=a.x+l[a.i+1],l.splice(a.i+1,1),r=i+1;o>r;++r)h[r].i--;h.splice(i,1),o--,i--}else a.x=ui(parseFloat(n[0]),parseFloat(a.x));for(;o>i;)a=h.pop(),null==l[a.i+1]?l[a.i]=a.x:(l[a.i]=a.x+l[a.i+1],l.splice(a.i+1,1)),o--;return 1===l.length?null==l[0]?(a=h[0].x,function(t){return a(t)+""}):function(){return e}:function(t){for(i=0;o>i;++i)l[(a=h[i]).i]=a.x(t);return l.join("")}}function fi(t,e){for(var n,i=Uo.interpolators.length;--i>=0&&!(n=Uo.interpolators[i](t,e)););return n}function pi(t,e){var n,i=[],r=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;s>n;++n)i.push(fi(t[n],e[n]));for(;o>n;++n)r[n]=t[n];for(;a>n;++n)r[n]=e[n];return function(t){for(n=0;s>n;++n)r[n]=i[n](t);return r}}function di(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function gi(t){return function(e){return 1-t(1-e)}}function vi(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function yi(t){return t*t}function mi(t){return t*t*t}function xi(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function bi(t){return function(e){return Math.pow(e,t)}}function wi(t){return 1-Math.cos(t*Ca)}function _i(t){return Math.pow(2,10*(t-1))}function Mi(t){return 1-Math.sqrt(1-t*t)}function Si(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Sa*Math.asin(1/t):(t=1,n=e/4),function(i){return 1+t*Math.pow(2,-10*i)*Math.sin((i-n)*Sa/e)}}function Ci(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function ki(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Ai(t,e){t=Uo.hcl(t),e=Uo.hcl(e);var n=t.h,i=t.c,r=t.l,o=e.h-n,a=e.c-i,s=e.l-r;return isNaN(a)&&(a=0,i=isNaN(i)?e.c:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return it(n+o*t,i+a*t,r+s*t)+""}}function Li(t,e){t=Uo.hsl(t),e=Uo.hsl(e);var n=t.h,i=t.s,r=t.l,o=e.h-n,a=e.s-i,s=e.l-r;return isNaN(a)&&(a=0,i=isNaN(i)?e.s:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return tt(n+o*t,i+a*t,r+s*t)+""}}function Ti(t,e){t=Uo.lab(t),e=Uo.lab(e);var n=t.l,i=t.a,r=t.b,o=e.l-n,a=e.a-i,s=e.b-r;return function(t){return at(n+o*t,i+a*t,r+s*t)+""}}function Ri(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Pi(t){var e=[t.a,t.b],n=[t.c,t.d],i=Ei(e),r=Fi(e,n),o=Ei(zi(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Ta,this.translate=[t.e,t.f],this.scale=[i,o],this.skew=o?Math.atan2(r,o)*Ta:0}function Fi(t,e){return t[0]*e[0]+t[1]*e[1]}function Ei(t){var e=Math.sqrt(Fi(t,t));return e&&(t[0]/=e,t[1]/=e),e}function zi(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Ni(t,e){var n,i=[],r=[],o=Uo.transform(t),a=Uo.transform(e),s=o.translate,l=a.translate,h=o.rotate,u=a.rotate,c=o.skew,f=a.skew,p=o.scale,d=a.scale;return s[0]!=l[0]||s[1]!=l[1]?(i.push("translate(",null,",",null,")"),r.push({i:1,x:ui(s[0],l[0])},{i:3,x:ui(s[1],l[1])})):l[0]||l[1]?i.push("translate("+l+")"):i.push(""),h!=u?(h-u>180?u+=360:u-h>180&&(h+=360),r.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:ui(h,u)})):u&&i.push(i.pop()+"rotate("+u+")"),c!=f?r.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:ui(c,f)}):f&&i.push(i.pop()+"skewX("+f+")"),p[0]!=d[0]||p[1]!=d[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:ui(p[0],d[0])},{i:n-2,x:ui(p[1],d[1])})):(1!=d[0]||1!=d[1])&&i.push(i.pop()+"scale("+d+")"),n=r.length,function(t){for(var e,o=-1;++o<n;)i[(e=r[o]).i]=e.x(t);return i.join("")}}function Bi(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return(n-t)*e}}function Ii(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return Math.max(0,Math.min(1,(n-t)*e))}}function Di(t){for(var e=t.source,n=t.target,i=Wi(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var o=r.length;n!==i;)r.splice(o,0,n),n=n.parent;return r}function Hi(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Wi(t,e){if(t===e)return t;for(var n=Hi(t),i=Hi(e),r=n.pop(),o=i.pop(),a=null;r===o;)a=r,r=n.pop(),o=i.pop();return a}function Oi(t){t.fixed|=2}function qi(t){t.fixed&=-7}function ji(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Yi(t){t.fixed&=-5}function Xi(t,e,n){var i=0,r=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,s=a.length,l=-1;++l<s;)null!=(o=a[l])&&(Xi(o,e,n),t.charge+=o.charge,i+=o.charge*o.cx,r+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var h=e*n[t.point.index];t.charge+=t.pointCharge=h,i+=h*t.point.x,r+=h*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}function Vi(t,e){return Uo.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=Zi,t}function Ui(t){return t.children}function Gi(t){return t.value}function $i(t,e){return e.value-t.value}function Zi(t){return Uo.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function Qi(t){return t.x}function Ki(t){return t.y}function Ji(t,e,n){t.y0=e,t.y=n}function tr(t){return Uo.range(t.length)}function er(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function nr(t){for(var e,n=1,i=0,r=t[0][1],o=t.length;o>n;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function ir(t){return t.reduce(rr,0)}function rr(t,e){return t+e[1]}function or(t,e){return ar(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function ar(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,o=[];++n<=e;)o[n]=r*n+i;return o}function sr(t){return[Uo.min(t),Uo.max(t)]}function lr(t,e){return t.parent==e.parent?1:2}function hr(t){var e=t.children;return e&&e.length?e[0]:t._tree.thread}function ur(t){var e,n=t.children;return n&&(e=n.length)?n[e-1]:t._tree.thread}function cr(t,e){var n=t.children;if(n&&(r=n.length))for(var i,r,o=-1;++o<r;)e(i=cr(n[o],e),t)>0&&(t=i);return t}function fr(t,e){return t.x-e.x}function pr(t,e){return e.x-t.x}function dr(t,e){return t.depth-e.depth}function gr(t,e){function n(t,i){var r=t.children;if(r&&(a=r.length))for(var o,a,s=null,l=-1;++l<a;)o=r[l],n(o,s),s=o;e(t,i)}n(t,null)}function vr(t){for(var e,n=0,i=0,r=t.children,o=r.length;--o>=0;)e=r[o]._tree,e.prelim+=n,e.mod+=n,n+=e.shift+(i+=e.change)}function yr(t,e,n){t=t._tree;var i=n/((e=e._tree).number-t.number);t.change+=i,e.change-=i,e.shift+=n,e.prelim+=n,e.mod+=n}function mr(t,e,n){return t._tree.ancestor.parent==e.parent?t._tree.ancestor:n}function xr(t,e){return t.value-e.value}function br(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function wr(t,e){t._pack_next=e,e._pack_prev=t}function _r(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return.999*r*r>n*n+i*i}function Mr(t){function e(t){u=Math.min(t.x-t.r,u),c=Math.max(t.x+t.r,c),f=Math.min(t.y-t.r,f),p=Math.max(t.y+t.r,p)}if((n=t.children)&&(h=n.length)){var n,i,r,o,a,s,l,h,u=1/0,c=-1/0,f=1/0,p=-1/0;if(n.forEach(Sr),i=n[0],i.x=-i.r,i.y=0,e(i),h>1&&(r=n[1],r.x=r.r,r.y=0,e(r),h>2))for(o=n[2],Ar(i,r,o),e(o),br(i,o),i._pack_prev=o,br(o,r),r=i._pack_next,a=3;h>a;a++){Ar(i,r,o=n[a]);var d=0,g=1,v=1;for(s=r._pack_next;s!==r;s=s._pack_next,g++)if(_r(s,o)){d=1;break}if(1==d)for(l=i._pack_prev;l!==s._pack_prev&&!_r(l,o);l=l._pack_prev,v++);d?(v>g||g==v&&r.r<i.r?wr(i,r=s):wr(i=l,r),a--):(br(i,o),r=o,e(o))}var y=(u+c)/2,m=(f+p)/2,x=0;for(a=0;h>a;a++)o=n[a],o.x-=y,o.y-=m,x=Math.max(x,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=x,n.forEach(Cr)}}function Sr(t){t._pack_next=t._pack_prev=t}function Cr(t){delete t._pack_next,delete t._pack_prev}function kr(t,e,n,i){var r=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,r)for(var o=-1,a=r.length;++o<a;)kr(r[o],e,n,i)}function Ar(t,e,n){var i=t.r+n.r,r=e.x-t.x,o=e.y-t.y;if(i&&(r||o)){var a=e.r+n.r,s=r*r+o*o,l=.5+((i*=i)-(a*=a))/(2*s),h=Math.sqrt(Math.max(0,2*a*(i+s)-(i-=s)*i-a*a))/(2*s);n.x=t.x+l*r+h*o,n.y=t.y+l*o-h*r}else n.x=t.x+i,n.y=t.y}function Lr(t){return 1+Uo.max(t,function(t){return t.y})}function Tr(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Rr(t){var e=t.children;return e&&e.length?Rr(e[0]):t}function Pr(t){var e,n=t.children;return n&&(e=n.length)?Pr(n[e-1]):t}function Fr(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Er(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>r&&(n+=r/2,r=0),0>o&&(i+=o/2,o=0),{x:n,y:i,dx:r,dy:o}}function zr(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Nr(t){return t.rangeExtent?t.rangeExtent():zr(t.range())}function Br(t,e,n,i){var r=n(t[0],t[1]),o=i(e[0],e[1]);return function(t){return o(r(t))}}function Ir(t,e){var n,i=0,r=t.length-1,o=t[i],a=t[r];return o>a&&(n=i,i=r,r=n,n=o,o=a,a=n),t[i]=e.floor(o),t[r]=e.ceil(a),t}function Dr(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:hl}function Hr(t,e,n,i){var r=[],o=[],a=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=s;)r.push(n(t[a-1],t[a])),o.push(i(e[a-1],e[a]));return function(e){var n=Uo.bisect(t,e,1,s)-1;return o[n](r[n](e))}}function Wr(t,e,n,i){function r(){var r=Math.min(t.length,e.length)>2?Hr:Br,l=i?Ii:Bi;return a=r(t,e,l,n),s=r(e,t,l,fi),o}function o(t){return a(t)}var a,s;return o.invert=function(t){return s(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},o.range=function(t){return arguments.length?(e=t,r()):e},o.rangeRound=function(t){return o.range(t).interpolate(Ri)},o.clamp=function(t){return arguments.length?(i=t,r()):i},o.interpolate=function(t){return arguments.length?(n=t,r()):n},o.ticks=function(e){return Yr(t,e)},o.tickFormat=function(e,n){return Xr(t,e,n)},o.nice=function(e){return qr(t,e),r()},o.copy=function(){return Wr(t,e,n,i)},r()}function Or(t,e){return Uo.rebind(t,e,"range","rangeRound","interpolate","clamp")}function qr(t,e){return Ir(t,Dr(jr(t,e)[2]))}function jr(t,e){null==e&&(e=10);var n=zr(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),o=e/i*r;return.15>=o?r*=10:.35>=o?r*=5:.75>=o&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function Yr(t,e){return Uo.range.apply(Uo,jr(t,e))}function Xr(t,e,n){var i=jr(t,e);return Uo.format(n?n.replace(Ka,function(t,e,n,r,o,a,s,l,h,u){return[e,n,r,o,a,s,l,h||"."+Ur(u,i),u].join("")}):",."+Vr(i[2])+"f")}function Vr(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Ur(t,e){var n=Vr(e[2]);return t in ul?Math.abs(n-Vr(Math.max(Math.abs(e[0]),Math.abs(e[1]))))+ +("e"!==t):n-2*("%"===t)}function Gr(t,e,n,i){function r(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function a(e){return t(r(e))}return a.invert=function(e){return o(t.invert(e))},a.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((i=e.map(Number)).map(r)),a):i},a.base=function(n){return arguments.length?(e=+n,t.domain(i.map(r)),a):e},a.nice=function(){var e=Ir(i.map(r),n?Math:fl);return t.domain(e),i=e.map(o),a},a.ticks=function(){var t=zr(i),a=[],s=t[0],l=t[1],h=Math.floor(r(s)),u=Math.ceil(r(l)),c=e%1?2:e;if(isFinite(u-h)){if(n){for(;u>h;h++)for(var f=1;c>f;f++)a.push(o(h)*f);a.push(o(h))}else for(a.push(o(h));h++<u;)for(f=c-1;f>0;f--)a.push(o(h)*f);for(h=0;a[h]<s;h++);for(u=a.length;a[u-1]>l;u--);a=a.slice(h,u)}return a},a.tickFormat=function(t,e){if(!arguments.length)return cl;arguments.length<2?e=cl:"function"!=typeof e&&(e=Uo.format(e));var i,s=Math.max(.1,t/a.ticks().length),l=n?(i=1e-12,Math.ceil):(i=-1e-12,Math.floor);return function(t){return t/o(l(r(t)+i))<=s?e(t):""}},a.copy=function(){return Gr(t.copy(),e,n,i)},Or(a,t)}function $r(t,e,n){function i(e){return t(r(e))}var r=Zr(e),o=Zr(1/e);return i.invert=function(e){return o(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(r)),i):n},i.ticks=function(t){return Yr(n,t)},i.tickFormat=function(t,e){return Xr(n,t,e)},i.nice=function(t){return i.domain(qr(n,t))},i.exponent=function(a){return arguments.length?(r=Zr(e=a),o=Zr(1/e),t.domain(n.map(r)),i):e},i.copy=function(){return $r(t.copy(),e,n)},Or(i,t)}function Zr(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function Qr(t,e){function n(n){return a[((o.get(n)||"range"===e.t&&o.set(n,t.push(n)))-1)%a.length]}function i(e,n){return Uo.range(t.length).map(function(t){return e+n*t})}var o,a,s;return n.domain=function(i){if(!arguments.length)return t;t=[],o=new r;for(var a,s=-1,l=i.length;++s<l;)o.has(a=i[s])||o.set(a,t.push(a));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(a=t,s=0,e={t:"range",a:arguments},n):a},n.rangePoints=function(r,o){arguments.length<2&&(o=0);var l=r[0],h=r[1],u=(h-l)/(Math.max(1,t.length-1)+o);return a=i(t.length<2?(l+h)/2:l+u*o/2,u),s=0,e={t:"rangePoints",a:arguments},n},n.rangeBands=function(r,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var h=r[1]<r[0],u=r[h-0],c=(r[1-h]-u)/(t.length-o+2*l);return a=i(u+c*l,c),h&&a.reverse(),s=c*(1-o),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var h=r[1]<r[0],u=r[h-0],c=r[1-h],f=Math.floor((c-u)/(t.length-o+2*l)),p=c-u-(t.length-o)*f;return a=i(u+Math.round(p/2),f),h&&a.reverse(),s=Math.round(f*(1-o)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return s},n.rangeExtent=function(){return zr(e.a[0])},n.copy=function(){return Qr(t,e)},n.domain(t)}function Kr(t,e){function n(){var n=0,o=e.length;for(r=[];++n<o;)r[n-1]=Uo.quantile(t,n/o);return i}function i(t){return isNaN(t=+t)?void 0:e[Uo.bisect(r,t)]}var r;return i.domain=function(e){return arguments.length?(t=e.filter(function(t){return!isNaN(t)}).sort(Uo.ascending),n()):t},i.range=function(t){return arguments.length?(e=t,n()):e},i.quantiles=function(){return r},i.invertExtent=function(n){return 0>(n=e.indexOf(n))?[NaN,NaN]:[n>0?r[n-1]:t[0],n<r.length?r[n]:t[t.length-1]]},i.copy=function(){return Kr(t,e)},n()}function Jr(t,e,n){function i(e){return n[Math.max(0,Math.min(a,Math.floor(o*(e-t))))]}function r(){return o=n.length/(e-t),a=n.length-1,i}var o,a;return i.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],r()):[t,e]},i.range=function(t){return arguments.length?(n=t,r()):n},i.invertExtent=function(e){return e=n.indexOf(e),e=0>e?NaN:e/o+t,[e,e+1/o]},i.copy=function(){return Jr(t,e,n)},r()}function to(t,e){function n(n){return n>=n?e[Uo.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return to(t,e)},n}function eo(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Yr(t,e)},e.tickFormat=function(e,n){return Xr(t,e,n)},e.copy=function(){return eo(t)},e}function no(t){return t.innerRadius}function io(t){return t.outerRadius}function ro(t){return t.startAngle}function oo(t){return t.endAngle}function ao(t){function e(e){function a(){h.push("M",o(t(u),s))}for(var l,h=[],u=[],c=-1,f=e.length,p=wt(n),d=wt(i);++c<f;)r.call(this,l=e[c],c)?u.push([+p.call(this,l,c),+d.call(this,l,c)]):u.length&&(a(),u=[]);return u.length&&a(),h.length?h.join(""):null}var n=Mn,i=Sn,r=_e,o=so,a=o.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=xl.get(t)||so).key,e):a},e.tension=function(t){return arguments.length?(s=t,e):s},e}function so(t){return t.join("L")}function lo(t){return so(t)+"Z"}function ho(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);return n>1&&r.push("H",i[0]),r.join("")}function uo(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function co(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function fo(t,e){return t.length<4?so(t):t[1]+vo(t.slice(1,t.length-1),yo(t,e))}function po(t,e){return t.length<3?so(t):t[0]+vo((t.push(t[0]),t),yo([t[t.length-2]].concat(t,[t[1]]),e))}function go(t,e){return t.length<3?so(t):t[0]+vo(t,yo(t,e))}function vo(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return so(t);var n=t.length!=e.length,i="",r=t[0],o=t[1],a=e[0],s=a,l=1;if(n&&(i+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],r=t[1],l=2),e.length>1){s=e[1],o=t[l],l++,i+="C"+(r[0]+a[0])+","+(r[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var h=2;h<e.length;h++,l++)o=t[l],s=e[h],i+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var u=t[l];i+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+u[0]+","+u[1]}return i}function yo(t,e){for(var n,i=[],r=(1-e)/2,o=t[0],a=t[1],s=1,l=t.length;++s<l;)n=o,o=a,a=t[s],i.push([r*(a[0]-n[0]),r*(a[1]-n[1])]);return i}function mo(t){if(t.length<3)return so(t);var e=1,n=t.length,i=t[0],r=i[0],o=i[1],a=[r,r,r,(i=t[1])[0]],s=[o,o,o,i[1]],l=[r,",",o,"L",_o(_l,a),",",_o(_l,s)];for(t.push(t[n-1]);++e<=n;)i=t[e],a.shift(),a.push(i[0]),s.shift(),s.push(i[1]),Mo(l,a,s);return t.pop(),l.push("L",i),l.join("")}function xo(t){if(t.length<4)return so(t);for(var e,n=[],i=-1,r=t.length,o=[0],a=[0];++i<3;)e=t[i],o.push(e[0]),a.push(e[1]);for(n.push(_o(_l,o)+","+_o(_l,a)),--i;++i<r;)e=t[i],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Mo(n,o,a);return n.join("")}function bo(t){for(var e,n,i=-1,r=t.length,o=r+4,a=[],s=[];++i<4;)n=t[i%r],a.push(n[0]),s.push(n[1]);for(e=[_o(_l,a),",",_o(_l,s)],--i;++i<o;)n=t[i%r],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Mo(e,a,s);return e.join("")}function wo(t,e){var n=t.length-1;if(n)for(var i,r,o=t[0][0],a=t[0][1],s=t[n][0]-o,l=t[n][1]-a,h=-1;++h<=n;)i=t[h],r=h/n,i[0]=e*i[0]+(1-e)*(o+r*s),i[1]=e*i[1]+(1-e)*(a+r*l);return mo(t)}function _o(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Mo(t,e,n){t.push("C",_o(bl,e),",",_o(bl,n),",",_o(wl,e),",",_o(wl,n),",",_o(_l,e),",",_o(_l,n))}function So(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Co(t){for(var e=0,n=t.length-1,i=[],r=t[0],o=t[1],a=i[0]=So(r,o);++e<n;)i[e]=(a+(a=So(r=o,o=t[e+1])))/2;return i[e]=a,i}function ko(t){for(var e,n,i,r,o=[],a=Co(t),s=-1,l=t.length-1;++s<l;)e=So(t[s],t[s+1]),oa(e)<ka?a[s]=a[s+1]=0:(n=a[s]/e,i=a[s+1]/e,(r=n*n+i*i)>9&&(r=3*e/Math.sqrt(r),a[s]=r*n,a[s+1]=r*i));for(s=-1;++s<=l;)r=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([r||0,a[s]*r||0]);return o}function Ao(t){return t.length<3?so(t):t[0]+vo(t,ko(t))}function Lo(t){for(var e,n,i,r=-1,o=t.length;++r<o;)e=t[r],n=e[0],i=e[1]+yl,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function To(t){function e(e){function l(){g.push("M",s(t(y),c),u,h(t(v.reverse()),c),"Z")}for(var f,p,d,g=[],v=[],y=[],m=-1,x=e.length,b=wt(n),w=wt(r),_=n===i?function(){return p}:wt(i),M=r===o?function(){return d}:wt(o);++m<x;)a.call(this,f=e[m],m)?(v.push([p=+b.call(this,f,m),d=+w.call(this,f,m)]),y.push([+_.call(this,f,m),+M.call(this,f,m)])):v.length&&(l(),v=[],y=[]);return v.length&&l(),g.length?g.join(""):null}var n=Mn,i=Mn,r=0,o=Sn,a=_e,s=so,l=s.key,h=s,u="L",c=.7;return e.x=function(t){return arguments.length?(n=i=t,e):i},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(r=o=t,e):o},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?s=t:(s=xl.get(t)||so).key,h=s.reverse||s,u=s.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(c=t,e):c},e}function Ro(t){return t.radius}function Po(t){return[t.x,t.y]}function Fo(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]+yl;return[n*Math.cos(i),n*Math.sin(i)]}}function Eo(){return 64}function zo(){return"circle"}function No(t){var e=Math.sqrt(t/Ma);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Bo(t,e){return ua(t,Ll),t.id=e,t}function Io(t,e,n,i){var r=t.id;return z(t,"function"==typeof n?function(t,o,a){t.__transition__[r].tween.set(e,i(n.call(t,t.__data__,o,a)))}:(n=i(n),function(t){t.__transition__[r].tween.set(e,n)}))}function Do(t){return null==t&&(t=""),function(){this.textContent=t}}function Ho(t,e,n,i){var o=t.__transition__||(t.__transition__={active:0,count:0}),a=o[n];if(!a){var s=i.time;a=o[n]={tween:new r,time:s,ease:i.ease,delay:i.delay,duration:i.duration},++o.count,Uo.timer(function(i){function r(i){return o.active>n?h():(o.active=n,a.event&&a.event.start.call(t,u,e),a.tween.forEach(function(n,i){(i=i.call(t,u,e))&&g.push(i)}),void Uo.timer(function(){return d.c=l(i||1)?_e:l,1},0,s))}function l(i){if(o.active!==n)return h();for(var r=i/p,s=c(r),l=g.length;l>0;)g[--l].call(t,s);return r>=1?(a.event&&a.event.end.call(t,u,e),h()):void 0}function h(){return--o.count?delete o[n]:delete t.__transition__,1}var u=t.__data__,c=a.ease,f=a.delay,p=a.duration,d=$a,g=[];return d.t=f+s,i>=f?r(i-f):void(d.c=r)},0,s)}}function Wo(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function Oo(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function qo(t){return t.toISOString()}function jo(t,e,n){function i(e){return t(e)}function r(t,n){var i=(t[1]-t[0])/n,r=Uo.bisect(Il,i);return r==Il.length?[e.year,jr(t.map(function(t){return t/31536e6}),n)[2]]:r?e[i/Il[r-1]<Il[r]/i?r-1:r]:[Wl,jr(t,n)[2]]}return i.invert=function(e){return Yo(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(Yo)},i.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,Yo(+n+1),e).length}var o=i.domain(),a=zr(o),s=null==t?r(a,10):"number"==typeof t&&r(a,t);return s&&(t=s[0],e=s[1]),i.domain(Ir(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=Yo(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=Yo(+e+1);return e}}:t))},i.ticks=function(t,e){var n=zr(i.domain()),o=null==t?r(n,10):"number"==typeof t?r(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],Yo(+n[1]+1),1>e?1:e)},i.tickFormat=function(){return n},i.copy=function(){return jo(t.copy(),e,n)},Or(i,t)}function Yo(t){return new Date(t)}function Xo(t){return JSON.parse(t.responseText)}function Vo(t){var e=Zo.createRange();return e.selectNode(Zo.body),e.createContextualFragment(t.responseText)}var Uo={version:"3.4.2"};Date.now||(Date.now=function(){return+new Date});var Go=[].slice,$o=function(t){return Go.call(t)},Zo=document,Qo=Zo.documentElement,Ko=window;try{$o(Qo.childNodes)[0].nodeType}catch(jl){$o=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}try{Zo.createElement("div").style.setProperty("opacity",0,"")}catch(Yl){var Jo=Ko.Element.prototype,ta=Jo.setAttribute,ea=Jo.setAttributeNS,na=Ko.CSSStyleDeclaration.prototype,ia=na.setProperty;Jo.setAttribute=function(t,e){ta.call(this,t,e+"")},
Jo.setAttributeNS=function(t,e,n){ea.call(this,t,e,n+"")},na.setProperty=function(t,e,n){ia.call(this,t,e+"",n)}}Uo.ascending=function(t,e){return e>t?-1:t>e?1:t>=e?0:NaN},Uo.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},Uo.min=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o&&!(null!=(n=t[r])&&n>=n);)n=void 0;for(;++r<o;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<o&&!(null!=(n=e.call(t,t[r],r))&&n>=n);)n=void 0;for(;++r<o;)null!=(i=e.call(t,t[r],r))&&n>i&&(n=i)}return n},Uo.max=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o&&!(null!=(n=t[r])&&n>=n);)n=void 0;for(;++r<o;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<o&&!(null!=(n=e.call(t,t[r],r))&&n>=n);)n=void 0;for(;++r<o;)null!=(i=e.call(t,t[r],r))&&i>n&&(n=i)}return n},Uo.extent=function(t,e){var n,i,r,o=-1,a=t.length;if(1===arguments.length){for(;++o<a&&!(null!=(n=r=t[o])&&n>=n);)n=r=void 0;for(;++o<a;)null!=(i=t[o])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++o<a&&!(null!=(n=r=e.call(t,t[o],o))&&n>=n);)n=void 0;for(;++o<a;)null!=(i=e.call(t,t[o],o))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},Uo.sum=function(t,e){var n,i=0,r=t.length,o=-1;if(1===arguments.length)for(;++o<r;)isNaN(n=+t[o])||(i+=n);else for(;++o<r;)isNaN(n=+e.call(t,t[o],o))||(i+=n);return i},Uo.mean=function(e,n){var i,r=e.length,o=0,a=-1,s=0;if(1===arguments.length)for(;++a<r;)t(i=e[a])&&(o+=(i-o)/++s);else for(;++a<r;)t(i=n.call(e,e[a],a))&&(o+=(i-o)/++s);return s?o:void 0},Uo.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],o=n-i;return o?r+o*(t[i]-r):r},Uo.median=function(e,n){return arguments.length>1&&(e=e.map(n)),(e=e.filter(t)).length?Uo.quantile(e.sort(Uo.ascending),.5):void 0},Uo.bisector=function(t){return{left:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var o=i+r>>>1;t.call(e,e[o],o)<n?i=o+1:r=o}return i},right:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var o=i+r>>>1;n<t.call(e,e[o],o)?r=o:i=o+1}return i}}};var ra=Uo.bisector(function(t){return t});Uo.bisectLeft=ra.left,Uo.bisect=Uo.bisectRight=ra.right,Uo.shuffle=function(t){for(var e,n,i=t.length;i;)n=0|Math.random()*i--,e=t[i],t[i]=t[n],t[n]=e;return t},Uo.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},Uo.pairs=function(t){for(var e=0,n=t.length-1,i=t[0],r=new Array(0>n?0:n);n>e;)r[e]=[i,i=t[++e]];return r},Uo.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,n=Uo.min(arguments,e),i=new Array(n);++t<n;)for(var r,o=-1,a=i[t]=new Array(r);++o<r;)a[o]=arguments[o][t];return i},Uo.transpose=function(t){return Uo.zip.apply(Uo,t)},Uo.keys=function(t){var e=[];for(var n in t)e.push(n);return e},Uo.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},Uo.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},Uo.merge=function(t){for(var e,n,i,r=t.length,o=-1,a=0;++o<r;)a+=t[o].length;for(n=new Array(a);--r>=0;)for(i=t[r],e=i.length;--e>=0;)n[--a]=i[e];return n};var oa=Math.abs;Uo.range=function(t,e,i){if(arguments.length<3&&(i=1,arguments.length<2&&(e=t,t=0)),1/0==(e-t)/i)throw new Error("infinite range");var r,o=[],a=n(oa(i)),s=-1;if(t*=a,e*=a,0>(i*=a))for(;(r=t+i*++s)>e;)o.push(r/a);else for(;(r=t+i*++s)<e;)o.push(r/a);return o},Uo.map=function(t){var e=new r;if(t instanceof r)t.forEach(function(t,n){e.set(t,n)});else for(var n in t)e.set(n,t[n]);return e},i(r,{has:o,get:function(t){return this[aa+t]},set:function(t,e){return this[aa+t]=e},remove:a,keys:s,values:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},entries:function(){var t=[];return this.forEach(function(e,n){t.push({key:e,value:n})}),t},size:l,empty:h,forEach:function(t){for(var e in this)e.charCodeAt(0)===sa&&t.call(this,e.substring(1),this[e])}});var aa="\0",sa=aa.charCodeAt(0);Uo.nest=function(){function t(e,s,l){if(l>=a.length)return i?i.call(o,s):n?s.sort(n):s;for(var h,u,c,f,p=-1,d=s.length,g=a[l++],v=new r;++p<d;)(f=v.get(h=g(u=s[p])))?f.push(u):v.set(h,[u]);return e?(u=e(),c=function(n,i){u.set(n,t(e,i,l))}):(u={},c=function(n,i){u[n]=t(e,i,l)}),v.forEach(c),u}function e(t,n){if(n>=a.length)return t;var i=[],r=s[n++];return t.forEach(function(t,r){i.push({key:t,values:e(r,n)})}),r?i.sort(function(t,e){return r(t.key,e.key)}):i}var n,i,o={},a=[],s=[];return o.map=function(e,n){return t(n,e,0)},o.entries=function(n){return e(t(Uo.map,n,0),0)},o.key=function(t){return a.push(t),o},o.sortKeys=function(t){return s[a.length-1]=t,o},o.sortValues=function(t){return n=t,o},o.rollup=function(t){return i=t,o},o},Uo.set=function(t){var e=new u;if(t)for(var n=0,i=t.length;i>n;++n)e.add(t[n]);return e},i(u,{has:o,add:function(t){return this[aa+t]=!0,t},remove:function(t){return(t=aa+t)in this&&delete this[t]},values:s,size:l,empty:h,forEach:function(t){for(var e in this)e.charCodeAt(0)===sa&&t.call(this,e.substring(1))}}),Uo.behavior={},Uo.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=c(t,e,e[n]);return t};var la=["webkit","ms","moz","Moz","o","O"];Uo.dispatch=function(){for(var t=new d,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=g(t);return t},d.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(n>=0&&(i=t.substring(n+1),t=t.substring(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},Uo.event=null,Uo.requote=function(t){return t.replace(ha,"\\$&")};var ha=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ua={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},ca=function(t,e){return e.querySelector(t)},fa=function(t,e){return e.querySelectorAll(t)},pa=Qo[f(Qo,"matchesSelector")],da=function(t,e){return pa.call(t,e)};"function"==typeof Sizzle&&(ca=function(t,e){return Sizzle(t,e)[0]||null},fa=function(t,e){return Sizzle.uniqueSort(Sizzle(t,e))},da=Sizzle.matchesSelector),Uo.selection=function(){return ma};var ga=Uo.selection.prototype=[];ga.select=function(t){var e,n,i,r,o=[];t=b(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(i=this[a]).parentNode;for(var l=-1,h=i.length;++l<h;)(r=i[l])?(e.push(n=t.call(r,r.__data__,l,a)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return x(o)},ga.selectAll=function(t){var e,n,i=[];t=w(t);for(var r=-1,o=this.length;++r<o;)for(var a=this[r],s=-1,l=a.length;++s<l;)(n=a[s])&&(i.push(e=$o(t.call(n,n.__data__,s,r))),e.parentNode=n);return x(i)};var va={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Uo.ns={prefix:va,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.substring(0,e),t=t.substring(e+1)),va.hasOwnProperty(n)?{space:va[n],local:t}:t}},ga.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=Uo.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(_(e,t[e]));return this}return this.each(_(t,e))},ga.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=C(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<i;)if(!S(t[r]).test(e))return!1;return!0}for(e in t)this.each(k(e,t[e]));return this}return this.each(k(t,e))},ga.style=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(n in t)this.each(L(n,t[n],e));return this}if(2>i)return Ko.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(L(t,e,n))},ga.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(T(e,t[e]));return this}return this.each(T(t,e))},ga.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},ga.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},ga.append=function(t){return t=R(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},ga.insert=function(t,e){return t=R(t),e=b(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},ga.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},ga.data=function(t,e){function n(t,n){var i,o,a,s=t.length,c=n.length,f=Math.min(s,c),p=new Array(c),d=new Array(c),g=new Array(s);if(e){var v,y=new r,m=new r,x=[];for(i=-1;++i<s;)v=e.call(o=t[i],o.__data__,i),y.has(v)?g[i]=o:y.set(v,o),x.push(v);for(i=-1;++i<c;)v=e.call(n,a=n[i],i),(o=y.get(v))?(p[i]=o,o.__data__=a):m.has(v)||(d[i]=P(a)),m.set(v,a),y.remove(v);for(i=-1;++i<s;)y.has(x[i])&&(g[i]=t[i])}else{for(i=-1;++i<f;)o=t[i],a=n[i],o?(o.__data__=a,p[i]=o):d[i]=P(a);for(;c>i;++i)d[i]=P(n[i]);for(;s>i;++i)g[i]=t[i]}d.update=p,d.parentNode=p.parentNode=g.parentNode=t.parentNode,l.push(d),h.push(p),u.push(g)}var i,o,a=-1,s=this.length;if(!arguments.length){for(t=new Array(s=(i=this[0]).length);++a<s;)(o=i[a])&&(t[a]=o.__data__);return t}var l=N([]),h=x([]),u=x([]);if("function"==typeof t)for(;++a<s;)n(i=this[a],t.call(i,i.parentNode.__data__,a));else for(;++a<s;)n(i=this[a],t);return h.enter=function(){return l},h.exit=function(){return u},h},ga.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},ga.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=F(t));for(var o=0,a=this.length;a>o;o++){r.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;l>s;s++)(i=n[s])&&t.call(i,i.__data__,s,o)&&e.push(i)}return x(r)},ga.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,o=i[r];--r>=0;)(n=i[r])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},ga.sort=function(t){t=E.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},ga.each=function(t){return z(this,function(e,n,i){t.call(e,e.__data__,n,i)})},ga.call=function(t){var e=$o(arguments);return t.apply(e[0]=this,e),this},ga.empty=function(){return!this.node()},ga.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],i=0,r=n.length;r>i;i++){var o=n[i];if(o)return o}return null},ga.size=function(){var t=0;return this.each(function(){++t}),t};var ya=[];Uo.selection.enter=N,Uo.selection.enter.prototype=ya,ya.append=ga.append,ya.empty=ga.empty,ya.node=ga.node,ya.call=ga.call,ya.size=ga.size,ya.select=function(t){for(var e,n,i,r,o,a=[],s=-1,l=this.length;++s<l;){i=(r=this[s]).update,a.push(e=[]),e.parentNode=r.parentNode;for(var h=-1,u=r.length;++h<u;)(o=r[h])?(e.push(i[h]=n=t.call(r.parentNode,o.__data__,h,s)),n.__data__=o.__data__):e.push(null)}return x(a)},ya.insert=function(t,e){return arguments.length<2&&(e=B(this)),ga.insert.call(this,t,e)},ga.transition=function(){for(var t,e,n=Sl||++Tl,i=[],r=Cl||{time:Date.now(),ease:xi,delay:0,duration:250},o=-1,a=this.length;++o<a;){i.push(t=[]);for(var s=this[o],l=-1,h=s.length;++l<h;)(e=s[l])&&Ho(e,l,n,r),t.push(e)}return Bo(i,n)},ga.interrupt=function(){return this.each(I)},Uo.select=function(t){var e=["string"==typeof t?ca(t,Zo):t];return e.parentNode=Qo,x([e])},Uo.selectAll=function(t){var e=$o("string"==typeof t?fa(t,Zo):t);return e.parentNode=Qo,x([e])};var ma=Uo.select(Qo);ga.on=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e=!1);for(n in t)this.each(D(n,t[n],e));return this}if(2>i)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(D(t,e,n))};var xa=Uo.map({mouseenter:"mouseover",mouseleave:"mouseout"});xa.forEach(function(t){"on"+t in Zo&&xa.remove(t)});var ba="onselectstart"in Zo?null:f(Qo.style,"userSelect"),wa=0;Uo.mouse=function(t){return q(t,y())};var _a=/WebKit/.test(Ko.navigator.userAgent)?-1:0;Uo.touches=function(t,e){return arguments.length<2&&(e=y().touches),e?$o(e).map(function(e){var n=q(t,e);return n.identifier=e.identifier,n}):[]},Uo.behavior.drag=function(){function t(){this.on("mousedown.drag",a).on("touchstart.drag",s)}function e(){return Uo.event.changedTouches[0].identifier}function n(t,e){return Uo.touches(t).filter(function(t){return t.identifier===e})[0]}function i(t,e,n,i){return function(){function a(){var t=e(u,p),n=t[0]-g[0],i=t[1]-g[1];v|=n|i,g=t,c({type:"drag",x:t[0]+l[0],y:t[1]+l[1],dx:n,dy:i})}function s(){y.on(n+"."+d,null).on(i+"."+d,null),m(v&&Uo.event.target===f),c({type:"dragend"})}var l,h=this,u=h.parentNode,c=r.of(h,arguments),f=Uo.event.target,p=t(),d=null==p?"drag":"drag-"+p,g=e(u,p),v=0,y=Uo.select(Ko).on(n+"."+d,a).on(i+"."+d,s),m=O();o?(l=o.apply(h,arguments),l=[l.x-g[0],l.y-g[1]]):l=[0,0],c({type:"dragstart"})}}var r=m(t,"drag","dragstart","dragend"),o=null,a=i(p,Uo.mouse,"mousemove","mouseup"),s=i(e,n,"touchmove","touchend");return t.origin=function(e){return arguments.length?(o=e,t):o},Uo.rebind(t,r,"on")};var Ma=Math.PI,Sa=2*Ma,Ca=Ma/2,ka=1e-6,Aa=ka*ka,La=Ma/180,Ta=180/Ma,Ra=Math.SQRT2,Pa=2,Fa=4;Uo.interpolateZoom=function(t,e){function n(t){var e=t*y;if(v){var n=G(g),a=o/(Pa*f)*(n*$(Ra*e+g)-U(g));return[i+a*h,r+a*u,o*n/G(Ra*e+g)]}return[i+t*h,r+t*u,o*Math.exp(Ra*e)]}var i=t[0],r=t[1],o=t[2],a=e[0],s=e[1],l=e[2],h=a-i,u=s-r,c=h*h+u*u,f=Math.sqrt(c),p=(l*l-o*o+Fa*c)/(2*o*Pa*f),d=(l*l-o*o-Fa*c)/(2*l*Pa*f),g=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(d*d+1)-d)-g,y=(v||Math.log(l/o))/Ra;return n.duration=1e3*y,n},Uo.behavior.zoom=function(){function t(t){t.on(A,h).on(Na+".zoom",c).on(L,f).on("dblclick.zoom",p).on(R,u)}function e(t){return[(t[0]-S.x)/S.k,(t[1]-S.y)/S.k]}function n(t){return[t[0]*S.k+S.x,t[1]*S.k+S.y]}function i(t){S.k=Math.max(k[0],Math.min(k[1],t))}function r(t,e){e=n(e),S.x+=t[0]-e[0],S.y+=t[1]-e[1]}function o(){w&&w.domain(b.range().map(function(t){return(t-S.x)/S.k}).map(b.invert)),M&&M.domain(_.range().map(function(t){return(t-S.y)/S.k}).map(_.invert))}function a(t){t({type:"zoomstart"})}function s(t){o(),t({type:"zoom",scale:S.k,translate:[S.x,S.y]})}function l(t){t({type:"zoomend"})}function h(){function t(){u=1,r(Uo.mouse(i),p),s(o)}function n(){c.on(L,Ko===i?f:null).on(T,null),d(u&&Uo.event.target===h),l(o)}var i=this,o=P.of(i,arguments),h=Uo.event.target,u=0,c=Uo.select(Ko).on(L,t).on(T,n),p=e(Uo.mouse(i)),d=O();I.call(i),a(o)}function u(){function t(){var t=Uo.touches(p);return f=S.k,t.forEach(function(t){t.identifier in g&&(g[t.identifier]=e(t))}),t}function n(){for(var e=Uo.event.changedTouches,n=0,o=e.length;o>n;++n)g[e[n].identifier]=null;var a=t(),l=Date.now();if(1===a.length){if(500>l-x){var h=a[0],u=g[h.identifier];i(2*S.k),r(h,u),v(),s(d)}x=l}else if(a.length>1){h=a[0];var c=a[1],f=h[0]-c[0],p=h[1]-c[1];y=f*f+p*p}}function o(){for(var t,e,n,o,a=Uo.touches(p),l=0,h=a.length;h>l;++l,o=null)if(n=a[l],o=g[n.identifier]){if(e)break;t=n,e=o}if(o){var u=(u=n[0]-t[0])*u+(u=n[1]-t[1])*u,c=y&&Math.sqrt(u/y);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+o[0])/2,(e[1]+o[1])/2],i(c*f)}x=null,r(t,e),s(d)}function c(){if(Uo.event.touches.length){for(var e=Uo.event.changedTouches,n=0,i=e.length;i>n;++n)delete g[e[n].identifier];for(var r in g)return void t()}_.on(b,null).on(w,null),M.on(A,h).on(R,u),C(),l(d)}var f,p=this,d=P.of(p,arguments),g={},y=0,m=Uo.event.changedTouches[0].identifier,b="touchmove.zoom-"+m,w="touchend.zoom-"+m,_=Uo.select(Ko).on(b,o).on(w,c),M=Uo.select(p).on(A,null).on(R,n),C=O();I.call(p),n(),a(d)}function c(){var t=P.of(this,arguments);y?clearTimeout(y):(I.call(this),a(t)),y=setTimeout(function(){y=null,l(t)},50),v();var n=g||Uo.mouse(this);d||(d=e(n)),i(Math.pow(2,.002*Ea())*S.k),r(n,d),s(t)}function f(){d=null}function p(){var t=P.of(this,arguments),n=Uo.mouse(this),o=e(n),h=Math.log(S.k)/Math.LN2;a(t),i(Math.pow(2,Uo.event.shiftKey?Math.ceil(h)-1:Math.floor(h)+1)),r(n,o),s(t),l(t)}var d,g,y,x,b,w,_,M,S={x:0,y:0,k:1},C=[960,500],k=za,A="mousedown.zoom",L="mousemove.zoom",T="mouseup.zoom",R="touchstart.zoom",P=m(t,"zoomstart","zoom","zoomend");return t.event=function(t){t.each(function(){var t=P.of(this,arguments),e=S;Sl?Uo.select(this).transition().each("start.zoom",function(){S=this.__chart__||{x:0,y:0,k:1},a(t)}).tween("zoom:zoom",function(){var n=C[0],i=C[1],r=n/2,o=i/2,a=Uo.interpolateZoom([(r-S.x)/S.k,(o-S.y)/S.k,n/S.k],[(r-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var i=a(e),l=n/i[2];this.__chart__=S={x:r-i[0]*l,y:o-i[1]*l,k:l},s(t)}}).each("end.zoom",function(){l(t)}):(this.__chart__=S,a(t),s(t),l(t))})},t.translate=function(e){return arguments.length?(S={x:+e[0],y:+e[1],k:S.k},o(),t):[S.x,S.y]},t.scale=function(e){return arguments.length?(S={x:S.x,y:S.y,k:+e},o(),t):S.k},t.scaleExtent=function(e){return arguments.length?(k=null==e?za:[+e[0],+e[1]],t):k},t.center=function(e){return arguments.length?(g=e&&[+e[0],+e[1]],t):g},t.size=function(e){return arguments.length?(C=e&&[+e[0],+e[1]],t):C},t.x=function(e){return arguments.length?(w=e,b=e.copy(),S={x:0,y:0,k:1},t):w},t.y=function(e){return arguments.length?(M=e,_=e.copy(),S={x:0,y:0,k:1},t):M},Uo.rebind(t,P,"on")};var Ea,za=[0,1/0],Na="onwheel"in Zo?(Ea=function(){return-Uo.event.deltaY*(Uo.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Zo?(Ea=function(){return Uo.event.wheelDelta},"mousewheel"):(Ea=function(){return-Uo.event.detail},"MozMousePixelScroll");Q.prototype.toString=function(){return this.rgb()+""},Uo.hsl=function(t,e,n){return 1===arguments.length?t instanceof J?K(t.h,t.s,t.l):vt(""+t,yt,K):K(+t,+e,+n)};var Ba=J.prototype=new Q;Ba.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),K(this.h,this.s,this.l/t)},Ba.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),K(this.h,this.s,t*this.l)},Ba.rgb=function(){return tt(this.h,this.s,this.l)},Uo.hcl=function(t,e,n){return 1===arguments.length?t instanceof nt?et(t.h,t.c,t.l):t instanceof ot?st(t.l,t.a,t.b):st((t=mt((t=Uo.rgb(t)).r,t.g,t.b)).l,t.a,t.b):et(+t,+e,+n)};var Ia=nt.prototype=new Q;Ia.brighter=function(t){return et(this.h,this.c,Math.min(100,this.l+Da*(arguments.length?t:1)))},Ia.darker=function(t){return et(this.h,this.c,Math.max(0,this.l-Da*(arguments.length?t:1)))},Ia.rgb=function(){return it(this.h,this.c,this.l).rgb()},Uo.lab=function(t,e,n){return 1===arguments.length?t instanceof ot?rt(t.l,t.a,t.b):t instanceof nt?it(t.l,t.c,t.h):mt((t=Uo.rgb(t)).r,t.g,t.b):rt(+t,+e,+n)};var Da=18,Ha=.95047,Wa=1,Oa=1.08883,qa=ot.prototype=new Q;qa.brighter=function(t){return rt(Math.min(100,this.l+Da*(arguments.length?t:1)),this.a,this.b)},qa.darker=function(t){return rt(Math.max(0,this.l-Da*(arguments.length?t:1)),this.a,this.b)},qa.rgb=function(){return at(this.l,this.a,this.b)},Uo.rgb=function(t,e,n){return 1===arguments.length?t instanceof dt?pt(t.r,t.g,t.b):vt(""+t,pt,tt):pt(~~t,~~e,~~n)};var ja=dt.prototype=new Q;ja.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,r=30;return e||n||i?(e&&r>e&&(e=r),n&&r>n&&(n=r),i&&r>i&&(i=r),pt(Math.min(255,~~(e/t)),Math.min(255,~~(n/t)),Math.min(255,~~(i/t)))):pt(r,r,r)},ja.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),pt(~~(t*this.r),~~(t*this.g),~~(t*this.b))},ja.hsl=function(){return yt(this.r,this.g,this.b)},ja.toString=function(){return"#"+gt(this.r)+gt(this.g)+gt(this.b)};var Ya=Uo.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ya.forEach(function(t,e){Ya.set(t,ct(e))}),Uo.functor=wt,Uo.xhr=Mt(_t),Uo.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var a=St(t,e,null==n?i:r(n),o);return a.row=function(t){return arguments.length?a.response(null==(n=t)?i:r(t)):n},a}function i(t){return n.parse(t.responseText)}function r(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(a).join(t)}function a(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return n.parse=function(t,e){var i;return n.parseRows(t,function(t,n){if(i)return i(t,n-1);var r=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");i=e?function(t,n){return e(r(t),n)}:r})},n.parseRows=function(t,e){function n(){if(u>=h)return a;if(r)return r=!1,o;var e=u;if(34===t.charCodeAt(e)){for(var n=e;n++<h;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}u=n+2;return 13===(i=t.charCodeAt(n+1))?(r=!0,10===t.charCodeAt(n+2)&&++u):10===i&&(r=!0),t.substring(e+1,n).replace(/""/g,'"')}for(;h>u;){var i,s=1;if(10===(i=t.charCodeAt(u++)))r=!0;else if(13===i)r=!0,10===t.charCodeAt(u)&&(++u,++s);else if(i!==l)continue;return t.substring(e,u-s)}return t.substring(e)}for(var i,r,o={},a={},s=[],h=t.length,u=0,c=0;(i=n())!==a;){for(var f=[];i!==o&&i!==a;)f.push(i),i=n();(!e||(f=e(f,c++)))&&s.push(f)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var i=new u,r=[];return e.forEach(function(t){for(var e in t)i.has(e)||r.push(i.add(e))}),[r.map(a).join(t)].concat(e.map(function(e){return r.map(function(t){return a(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},Uo.csv=Uo.dsv(",","text/csv"),Uo.tsv=Uo.dsv("\t","text/tab-separated-values");var Xa,Va,Ua,Ga,$a,Za=Ko[f(Ko,"requestAnimationFrame")]||function(t){setTimeout(t,17)};Uo.timer=function(t,e,n){var i=arguments.length;2>i&&(e=0),3>i&&(n=Date.now());var r={c:t,t:n+e,f:!1,n:null};Va?Va.n=r:Xa=r,Va=r,Ua||(Ga=clearTimeout(Ga),Ua=1,Za(kt))},Uo.timer.flush=function(){At(),Lt()},Uo.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Qa=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(Rt);Uo.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=Uo.round(t,Tt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),Qa[8+n/3]};var Ka=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ja=Uo.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=Uo.round(t,Tt(t,e))).toFixed(Math.max(0,Math.min(20,Tt(t*(1+1e-15),e))))}}),ts=Uo.time={},es=Date;Et.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ns.setUTCDate.apply(this._,arguments)},setDay:function(){ns.setUTCDay.apply(this._,arguments)},setFullYear:function(){ns.setUTCFullYear.apply(this._,arguments)},setHours:function(){ns.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ns.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ns.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ns.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ns.setUTCSeconds.apply(this._,arguments)},setTime:function(){ns.setTime.apply(this._,arguments)}};var ns=Date.prototype;ts.year=zt(function(t){return(t=ts.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),ts.years=ts.year.range,ts.years.utc=ts.year.utc.range,ts.day=zt(function(t){var e=new es(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),ts.days=ts.day.range,ts.days.utc=ts.day.utc.range,ts.dayOfYear=function(t){var e=ts.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=ts[t]=zt(function(t){return(t=ts.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=ts.year(t).getDay();return Math.floor((ts.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});ts[t+"s"]=n.range,ts[t+"s"].utc=n.utc.range,ts[t+"OfYear"]=function(t){var n=ts.year(t).getDay();return Math.floor((ts.dayOfYear(t)+(n+e)%7)/7)}}),ts.week=ts.sunday,ts.weeks=ts.sunday.range,ts.weeks.utc=ts.sunday.utc.range,ts.weekOfYear=ts.sundayOfYear;var is={"-":"",_:" ",0:"0"},rs=/^\s*\d+/,os=/^%/;Uo.locale=function(t){return{numberFormat:Pt(t),timeFormat:Bt(t)}};var as=Uo.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Uo.format=as.numberFormat,Uo.geo={},ie.prototype={s:0,t:0,add:function(t){re(t,this.t,ss),re(ss.s,this.s,this),this.s?this.t+=ss.t:this.s=ss.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ss=new ie;Uo.geo.stream=function(t,e){t&&ls.hasOwnProperty(t.type)?ls[t.type](t,e):oe(t,e)};var ls={Feature:function(t,e){oe(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)oe(n[i].geometry,e)}},hs={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){ae(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)ae(n[i],e,0)},Polygon:function(t,e){se(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)se(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)oe(n[i],e)}};Uo.geo.area=function(t){return us=0,Uo.geo.stream(t,fs),us};var us,cs=new ie,fs={sphere:function(){us+=4*Ma},point:p,lineStart:p,lineEnd:p,polygonStart:function(){cs.reset(),fs.lineStart=le},polygonEnd:function(){var t=2*cs;us+=0>t?4*Ma+t:t,fs.lineStart=fs.lineEnd=fs.point=p}};Uo.geo.bounds=function(){function t(t,e){x.push(b=[u=t,f=t]),c>e&&(c=e),e>p&&(p=e)}function e(e,n){var i=he([e*La,n*La]);if(y){var r=ce(y,i),o=ce([r[1],-r[0],0],r);de(o),o=ge(o);var a=e-d,l=a>0?1:-1,h=o[0]*Ta*l,g=oa(a)>180;if(g^(h>l*d&&l*e>h)){(v=o[1]*Ta)>p&&(p=v)}else if(h=(h+360)%360-180,g^(h>l*d&&l*e>h)){var v=-o[1]*Ta;c>v&&(c=v)}else c>n&&(c=n),n>p&&(p=n);g?d>e?s(u,e)>s(u,f)&&(f=e):s(e,f)>s(u,f)&&(u=e):f>=u?(u>e&&(u=e),e>f&&(f=e)):e>d?s(u,e)>s(u,f)&&(f=e):s(e,f)>s(u,f)&&(u=e)}else t(e,n);y=i,d=e}function n(){w.point=e}function i(){b[0]=u,b[1]=f,w.point=t,y=null}function r(t,n){if(y){var i=t-d;m+=oa(i)>180?i+(i>0?360:-360):i}else g=t,v=n;fs.point(t,n),e(t,n)}function o(){fs.lineStart()}function a(){r(g,v),fs.lineEnd(),oa(m)>ka&&(u=-(f=180)),b[0]=u,b[1]=f,y=null}function s(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function h(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var u,c,f,p,d,g,v,y,m,x,b,w={point:t,lineStart:n,lineEnd:i,polygonStart:function(){w.point=r,w.lineStart=o,w.lineEnd=a,m=0,fs.polygonStart()},polygonEnd:function(){fs.polygonEnd(),w.point=t,w.lineStart=n,w.lineEnd=i,0>cs?(u=-(f=180),c=-(p=90)):m>ka?p=90:-ka>m&&(c=-90),b[0]=u,b[1]=f}};return function(t){p=f=-(u=c=1/0),x=[],Uo.geo.stream(t,w);if(o=x.length){x.sort(l);for(var e=1,n=[d=x[0]];o>e;++e)r=x[e],h(r[0],d)||h(r[1],d)?(s(d[0],r[1])>s(d[0],d[1])&&(d[1]=r[1]),s(r[0],d[1])>s(d[0],d[1])&&(d[0]=r[0])):n.push(d=r);for(var i,r,o,a=-1/0,d=(e=0,n[o=n.length-1]);o>=e;d=r,++e)r=n[e],(i=s(d[1],r[0]))>a&&(a=i,u=r[0],f=d[1])}return x=b=null,1/0===u||1/0===c?[[NaN,NaN],[NaN,NaN]]:[[u,c],[f,p]]}}(),Uo.geo.centroid=function(t){ps=ds=gs=vs=ys=ms=xs=bs=ws=_s=Ms=0,Uo.geo.stream(t,Ss);var e=ws,n=_s,i=Ms,r=e*e+n*n+i*i;return Aa>r&&(e=ms,n=xs,i=bs,ka>ds&&(e=gs,n=vs,i=ys),r=e*e+n*n+i*i,Aa>r)?[NaN,NaN]:[Math.atan2(n,e)*Ta,V(i/Math.sqrt(r))*Ta]};var ps,ds,gs,vs,ys,ms,xs,bs,ws,_s,Ms,Ss={sphere:p,point:ye,lineStart:xe,lineEnd:be,polygonStart:function(){Ss.lineStart=we},polygonEnd:function(){Ss.lineStart=xe}},Cs=ke(_e,Pe,Ee,[-Ma,-Ma/2]),ks=1e9;Uo.geo.clipExtent=function(){var t,e,n,i,r,o,a={stream:function(t){return r&&(r.valid=!1),r=o(t),r.valid=!0,r},extent:function(s){return arguments.length?(o=Be(t=+s[0][0],e=+s[0][1],n=+s[1][0],i=+s[1][1]),r&&(r.valid=!1,r=null),a):[[t,e],[n,i]]}};return a.extent([[0,0],[960,500]])},(Uo.geo.conicEqualArea=function(){return De(He)}).raw=He,Uo.geo.albers=function(){return Uo.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Uo.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return e=null,n(o,a),e||(i(o,a),e)||r(o,a),e}var e,n,i,r,o=Uo.geo.albers(),a=Uo.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=Uo.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?a:r>=.166&&.234>r&&i>=-.214&&-.115>i?s:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=a.stream(t),i=s.stream(t);return{point:function(t,r){e.point(t,r),n.point(t,r),i.point(t,r)},sphere:function(){e.sphere(),n.sphere(),i.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),i.polygonStart()},
polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),a.precision(e),s.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),a.scale(.35*e),s.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var h=o.scale(),u=+e[0],c=+e[1];return n=o.translate(e).clipExtent([[u-.455*h,c-.238*h],[u+.455*h,c+.238*h]]).stream(l).point,i=a.translate([u-.307*h,c+.201*h]).clipExtent([[u-.425*h+ka,c+.12*h+ka],[u-.214*h-ka,c+.234*h-ka]]).stream(l).point,r=s.translate([u-.205*h,c+.212*h]).clipExtent([[u-.214*h+ka,c+.166*h+ka],[u-.115*h-ka,c+.234*h-ka]]).stream(l).point,t},t.scale(1070)};var As,Ls,Ts,Rs,Ps,Fs,Es={point:p,lineStart:p,lineEnd:p,polygonStart:function(){Ls=0,Es.lineStart=We},polygonEnd:function(){Es.lineStart=Es.lineEnd=Es.point=p,As+=oa(Ls/2)}},zs={point:Oe,lineStart:p,lineEnd:p,polygonStart:p,polygonEnd:p},Ns={point:Ye,lineStart:Xe,lineEnd:Ve,polygonStart:function(){Ns.lineStart=Ue},polygonEnd:function(){Ns.point=Ye,Ns.lineStart=Xe,Ns.lineEnd=Ve}};Uo.geo.path=function(){function t(t){return t&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=r(o)),Uo.geo.stream(t,a)),o.result()}function e(){return a=null,t}var n,i,r,o,a,s=4.5;return t.area=function(t){return As=0,Uo.geo.stream(t,r(Es)),As},t.centroid=function(t){return gs=vs=ys=ms=xs=bs=ws=_s=Ms=0,Uo.geo.stream(t,r(Ns)),Ms?[ws/Ms,_s/Ms]:bs?[ms/bs,xs/bs]:ys?[gs/ys,vs/ys]:[NaN,NaN]},t.bounds=function(t){return Ps=Fs=-(Ts=Rs=1/0),Uo.geo.stream(t,r(zs)),[[Ts,Rs],[Ps,Fs]]},t.projection=function(t){return arguments.length?(r=(n=t)?t.stream||Ze(t):_t,e()):n},t.context=function(t){return arguments.length?(o=null==(i=t)?new qe:new Ge(t),"function"!=typeof s&&o.pointRadius(s),e()):i},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(o.pointRadius(+e),+e),t):s},t.projection(Uo.geo.albersUsa()).context(null)},Uo.geo.transform=function(t){return{stream:function(e){var n=new Qe(e);for(var i in t)n[i]=t[i];return n}}},Qe.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Uo.geo.projection=Je,Uo.geo.projectionMutator=tn,(Uo.geo.equirectangular=function(){return Je(nn)}).raw=nn.invert=nn,Uo.geo.rotation=function(t){function e(e){return e=t(e[0]*La,e[1]*La),e[0]*=Ta,e[1]*=Ta,e}return t=on(t[0]%360*La,t[1]*La,t.length>2?t[2]*La:0),e.invert=function(e){return e=t.invert(e[0]*La,e[1]*La),e[0]*=Ta,e[1]*=Ta,e},e},rn.invert=nn,Uo.geo.circle=function(){function t(){var t="function"==typeof i?i.apply(this,arguments):i,e=on(-t[0]*La,-t[1]*La,0).invert,r=[];return n(null,null,1,{point:function(t,n){r.push(t=e(t,n)),t[0]*=Ta,t[1]*=Ta}}),{type:"Polygon",coordinates:[r]}}var e,n,i=[0,0],r=6;return t.origin=function(e){return arguments.length?(i=e,t):i},t.angle=function(i){return arguments.length?(n=hn((e=+i)*La,r*La),t):e},t.precision=function(i){return arguments.length?(n=hn(e*La,(r=+i)*La),t):r},t.angle(90)},Uo.geo.distance=function(t,e){var n,i=(e[0]-t[0])*La,r=t[1]*La,o=e[1]*La,a=Math.sin(i),s=Math.cos(i),l=Math.sin(r),h=Math.cos(r),u=Math.sin(o),c=Math.cos(o);return Math.atan2(Math.sqrt((n=c*a)*n+(n=h*u-l*c*s)*n),l*u+h*c*s)},Uo.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return Uo.range(Math.ceil(o/v)*v,r,v).map(f).concat(Uo.range(Math.ceil(h/y)*y,l,y).map(p)).concat(Uo.range(Math.ceil(i/d)*d,n,d).filter(function(t){return oa(t%v)>ka}).map(u)).concat(Uo.range(Math.ceil(s/g)*g,a,g).filter(function(t){return oa(t%y)>ka}).map(c))}var n,i,r,o,a,s,l,h,u,c,f,p,d=10,g=d,v=90,y=360,m=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[f(o).concat(p(l).slice(1),f(r).reverse().slice(1),p(h).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],r=+e[1][0],h=+e[0][1],l=+e[1][1],o>r&&(e=o,o=r,r=e),h>l&&(e=h,h=l,l=e),t.precision(m)):[[o,h],[r,l]]},t.minorExtent=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],i>n&&(e=i,i=n,n=e),s>a&&(e=s,s=a,a=e),t.precision(m)):[[i,s],[n,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(v=+e[0],y=+e[1],t):[v,y]},t.minorStep=function(e){return arguments.length?(d=+e[0],g=+e[1],t):[d,g]},t.precision=function(e){return arguments.length?(m=+e,u=cn(s,a,90),c=fn(i,n,m),f=cn(h,l,90),p=fn(o,r,m),t):m},t.majorExtent([[-180,-90+ka],[180,90-ka]]).minorExtent([[-180,-80-ka],[180,80+ka]])},Uo.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||r.apply(this,arguments)]}}var e,n,i=pn,r=dn;return t.distance=function(){return Uo.geo.distance(e||i.apply(this,arguments),n||r.apply(this,arguments))},t.source=function(n){return arguments.length?(i=n,e="function"==typeof n?null:n,t):i},t.target=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},Uo.geo.interpolate=function(t,e){return gn(t[0]*La,t[1]*La,e[0]*La,e[1]*La)},Uo.geo.length=function(t){return Bs=0,Uo.geo.stream(t,Is),Bs};var Bs,Is={sphere:p,point:p,lineStart:vn,lineEnd:p,polygonStart:p,polygonEnd:p},Ds=yn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(Uo.geo.azimuthalEqualArea=function(){return Je(Ds)}).raw=Ds;var Hs=yn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},_t);(Uo.geo.azimuthalEquidistant=function(){return Je(Hs)}).raw=Hs,(Uo.geo.conicConformal=function(){return De(mn)}).raw=mn,(Uo.geo.conicEquidistant=function(){return De(xn)}).raw=xn;var Ws=yn(function(t){return 1/t},Math.atan);(Uo.geo.gnomonic=function(){return Je(Ws)}).raw=Ws,bn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ca]},(Uo.geo.mercator=function(){return wn(bn)}).raw=bn;var Os=yn(function(){return 1},Math.asin);(Uo.geo.orthographic=function(){return Je(Os)}).raw=Os;var qs=yn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(Uo.geo.stereographic=function(){return Je(qs)}).raw=qs,_n.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Ca]},(Uo.geo.transverseMercator=function(){var t=wn(_n),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[-t[1],t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},t.rotate([0,0])}).raw=_n,Uo.geom={},Uo.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,r=wt(n),o=wt(i),a=t.length,s=[],l=[];for(e=0;a>e;e++)s.push([+r.call(this,t[e],e),+o.call(this,t[e],e),e]);for(s.sort(kn),e=0;a>e;e++)l.push([s[e][0],-s[e][1]]);var h=Cn(s),u=Cn(l),c=u[0]===h[0],f=u[u.length-1]===h[h.length-1],p=[];for(e=h.length-1;e>=0;--e)p.push(t[s[h[e]][2]]);for(e=+c;e<u.length-f;++e)p.push(t[s[u[e]][2]]);return p}var n=Mn,i=Sn;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e)},Uo.geom.polygon=function(t){return ua(t,js),t};var js=Uo.geom.polygon.prototype=[];js.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},js.centroid=function(t){var e,n,i=-1,r=this.length,o=0,a=0,s=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=s,s=this[i],n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o*t,a*t]},js.clip=function(t){for(var e,n,i,r,o,a,s=Tn(t),l=-1,h=this.length-Tn(this),u=this[h-1];++l<h;){for(e=t.slice(),t.length=0,r=this[l],o=e[(i=e.length-s)-1],n=-1;++n<i;)a=e[n],An(a,u,r)?(An(o,u,r)||t.push(Ln(o,a,u,r)),t.push(a)):An(o,u,r)&&t.push(Ln(o,a,u,r)),o=a;s&&t.push(t[0]),u=r}return t};var Ys,Xs,Vs,Us,Gs,$s=[],Zs=[];In.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Hn),e.length},$n.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Zn.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ti(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)i=n.U,n===i.L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(Kn(this,n),t=n,n=t.U),n.C=!1,i.C=!0,Jn(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(Jn(this,n),t=n,n=t.U),n.C=!1,i.C=!0,Kn(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,a=t.R;if(n=o?a?ti(a):o:a,r?r.L===t?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=a,a.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,Kn(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Jn(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,Kn(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,Jn(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Kn(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,Jn(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},Uo.geom.voronoi=function(t){function e(t){var e=new Array(t.length),i=s[0][0],r=s[0][1],o=s[1][0],a=s[1][1];return ei(n(t),s).cells.forEach(function(n,s){var l=n.edges,h=n.site;(e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):h.x>=i&&h.x<=o&&h.y>=r&&h.y<=a?[[i,a],[o,a],[o,r],[i,r]]:[]).point=t[s]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/ka)*ka,y:Math.round(a(t,e)/ka)*ka,i:e}})}var i=Mn,r=Sn,o=i,a=r,s=Qs;return t?e(t):(e.links=function(t){return ei(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return ei(n(t)).cells.forEach(function(n,i){for(var r,o=n.site,a=n.edges.sort(Hn),s=-1,l=a.length,h=a[l-1].edge,u=h.l===o?h.r:h.l;++s<l;)h,r=u,h=a[s].edge,u=h.l===o?h.r:h.l,i<r.i&&i<u.i&&ii(o,r,u)<0&&e.push([t[i],t[r.i],t[u.i]])}),e},e.x=function(t){return arguments.length?(o=wt(i=t),e):i},e.y=function(t){return arguments.length?(a=wt(r=t),e):r},e.clipExtent=function(t){return arguments.length?(s=null==t?Qs:t,e):s===Qs?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===Qs?null:s&&s[1]},e)};var Qs=[[-1e6,-1e6],[1e6,1e6]];Uo.geom.delaunay=function(t){return Uo.geom.voronoi().triangles(t)},Uo.geom.quadtree=function(t,e,n,i,r){function o(t){function o(t,e,n,i,r,o,a,s){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var l=t.x,u=t.y;if(null!=l)if(oa(l-n)+oa(u-i)<.01)h(t,e,n,i,r,o,a,s);else{var c=t.point;t.x=t.y=t.point=null,h(t,c,l,u,r,o,a,s),h(t,e,n,i,r,o,a,s)}else t.x=n,t.y=i,t.point=e}else h(t,e,n,i,r,o,a,s)}function h(t,e,n,i,r,a,s,l){var h=.5*(r+s),u=.5*(a+l),c=n>=h,f=i>=u,p=(f<<1)+c;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=ai()),c?r=h:s=h,f?a=u:l=u,o(t,e,n,i,r,a,s,l)}var u,c,f,p,d,g,v,y,m,x=wt(s),b=wt(l);if(null!=e)g=e,v=n,y=i,m=r;else if(y=m=-(g=v=1/0),c=[],f=[],d=t.length,a)for(p=0;d>p;++p)(u=t[p]).x<g&&(g=u.x),u.y<v&&(v=u.y),u.x>y&&(y=u.x),u.y>m&&(m=u.y),c.push(u.x),f.push(u.y);else for(p=0;d>p;++p){var w=+x(u=t[p],p),_=+b(u,p);g>w&&(g=w),v>_&&(v=_),w>y&&(y=w),_>m&&(m=_),c.push(w),f.push(_)}var M=y-g,S=m-v;M>S?m=v+M:y=g+S;var C=ai();if(C.add=function(t){o(C,t,+x(t,++p),+b(t,p),g,v,y,m)},C.visit=function(t){si(t,C,g,v,y,m)},p=-1,null==e){for(;++p<d;)o(C,t[p],c[p],f[p],g,v,y,m);--p}else t.forEach(C.add);return c=f=t=u=null,C}var a,s=Mn,l=Sn;return(a=arguments.length)?(s=ri,l=oi,3===a&&(r=n,i=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(s=t,o):s},o.y=function(t){return arguments.length?(l=t,o):l},o.extent=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),o):null==e?null:[[e,n],[i,r]]},o.size=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=n=0,i=+t[0],r=+t[1]),o):null==e?null:[i-e,r-n]},o)},Uo.interpolateRgb=li,Uo.interpolateObject=hi,Uo.interpolateNumber=ui,Uo.interpolateString=ci;var Ks=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;Uo.interpolate=fi,Uo.interpolators=[function(t,e){var n=typeof e;return("string"===n?Ya.has(e)||/^(#|rgb\(|hsl\()/.test(e)?li:ci:e instanceof Q?li:"object"===n?Array.isArray(e)?pi:hi:ui)(t,e)}],Uo.interpolateArray=pi;var Js=function(){return _t},tl=Uo.map({linear:Js,poly:bi,quad:function(){return yi},cubic:function(){return mi},sin:function(){return wi},exp:function(){return _i},circle:function(){return Mi},elastic:Si,back:Ci,bounce:function(){return ki}}),el=Uo.map({"in":_t,out:gi,"in-out":vi,"out-in":function(t){return vi(gi(t))}});Uo.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.substring(0,e):t,i=e>=0?t.substring(e+1):"in";return n=tl.get(n)||Js,i=el.get(i)||_t,di(i(n.apply(null,Go.call(arguments,1))))},Uo.interpolateHcl=Ai,Uo.interpolateHsl=Li,Uo.interpolateLab=Ti,Uo.interpolateRound=Ri,Uo.transform=function(t){var e=Zo.createElementNS(Uo.ns.prefix.svg,"g");return(Uo.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Pi(n?n.matrix:nl)})(t)},Pi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var nl={a:1,b:0,c:0,d:1,e:0,f:0};Uo.interpolateTransform=Ni,Uo.layout={},Uo.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(Di(t[n]));return e}},Uo.layout.chord=function(){function t(){var t,h,c,f,p,d={},g=[],v=Uo.range(o),y=[];for(n=[],i=[],t=0,f=-1;++f<o;){for(h=0,p=-1;++p<o;)h+=r[f][p];g.push(h),y.push(Uo.range(o)),t+=h}for(a&&v.sort(function(t,e){return a(g[t],g[e])}),s&&y.forEach(function(t,e){t.sort(function(t,n){return s(r[e][t],r[e][n])})}),t=(Sa-u*o)/t,h=0,f=-1;++f<o;){for(c=h,p=-1;++p<o;){var m=v[f],x=y[m][p],b=r[m][x],w=h,_=h+=b*t;d[m+"-"+x]={index:m,subindex:x,startAngle:w,endAngle:_,value:b}}i[m]={index:m,startAngle:c,endAngle:h,value:(h-c)/t},h+=u}for(f=-1;++f<o;)for(p=f-1;++p<o;){var M=d[f+"-"+p],S=d[p+"-"+f];(M.value||S.value)&&n.push(M.value<S.value?{source:S,target:M}:{source:M,target:S})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,i,r,o,a,s,l,h={},u=0;return h.matrix=function(t){return arguments.length?(o=(r=t)&&r.length,n=i=null,h):r},h.padding=function(t){return arguments.length?(u=t,n=i=null,h):u},h.sortGroups=function(t){return arguments.length?(a=t,n=i=null,h):a},h.sortSubgroups=function(t){return arguments.length?(s=t,n=null,h):s},h.sortChords=function(t){return arguments.length?(l=t,n&&e(),h):l},h.chords=function(){return n||t(),n},h.groups=function(){return i||t(),i},h},Uo.layout.force=function(){function t(t){return function(e,n,i,r){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,s=r-n,l=o*o+a*a;if(l>s*s/v){if(d>l){var h=e.charge/l;t.px-=o*h,t.py-=a*h}return!0}if(e.point&&l&&d>l){h=e.pointCharge/l;t.px-=o*h,t.py-=a*h}}return!e.charge}}function e(t){t.px=Uo.event.x,t.py=Uo.event.y,s.resume()}var n,i,r,o,a,s={},l=Uo.dispatch("start","tick","end"),h=[1,1],u=.9,c=il,f=rl,p=-30,d=ol,g=.1,v=.64,y=[],m=[];return s.tick=function(){if((i*=.99)<.005)return l.end({type:"end",alpha:i=0}),!0;var e,n,s,c,f,d,v,x,b,w=y.length,_=m.length;for(n=0;_>n;++n)s=m[n],c=s.source,f=s.target,x=f.x-c.x,b=f.y-c.y,(d=x*x+b*b)&&(d=i*o[n]*((d=Math.sqrt(d))-r[n])/d,x*=d,b*=d,f.x-=x*(v=c.weight/(f.weight+c.weight)),f.y-=b*v,c.x+=x*(v=1-v),c.y+=b*v);if((v=i*g)&&(x=h[0]/2,b=h[1]/2,n=-1,v))for(;++n<w;)s=y[n],s.x+=(x-s.x)*v,s.y+=(b-s.y)*v;if(p)for(Xi(e=Uo.geom.quadtree(y),i,a),n=-1;++n<w;)(s=y[n]).fixed||e.visit(t(s));for(n=-1;++n<w;)(s=y[n]).fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*u,s.y-=(s.py-(s.py=s.y))*u);l.tick({type:"tick",alpha:i})},s.nodes=function(t){return arguments.length?(y=t,s):y},s.links=function(t){return arguments.length?(m=t,s):m},s.size=function(t){return arguments.length?(h=t,s):h},s.linkDistance=function(t){return arguments.length?(c="function"==typeof t?t:+t,s):c},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(f="function"==typeof t?t:+t,s):f},s.friction=function(t){return arguments.length?(u=+t,s):u},s.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,s):p},s.chargeDistance=function(t){return arguments.length?(d=t*t,s):Math.sqrt(d)},s.gravity=function(t){return arguments.length?(g=+t,s):g},s.theta=function(t){return arguments.length?(v=t*t,s):Math.sqrt(v)},s.alpha=function(t){return arguments.length?(t=+t,i?i=t>0?t:0:t>0&&(l.start({type:"start",alpha:i=t}),Uo.timer(s.tick)),s):i},s.start=function(){function t(t,i){if(!n){for(n=new Array(l),s=0;l>s;++s)n[s]=[];for(s=0;h>s;++s){var r=m[s];n[r.source.index].push(r.target),n[r.target.index].push(r.source)}}for(var o,a=n[e],s=-1,h=a.length;++s<h;)if(!isNaN(o=a[s][t]))return o;return Math.random()*i}var e,n,i,l=y.length,u=m.length,d=h[0],g=h[1];for(e=0;l>e;++e)(i=y[e]).index=e,i.weight=0;for(e=0;u>e;++e)"number"==typeof(i=m[e]).source&&(i.source=y[i.source]),"number"==typeof i.target&&(i.target=y[i.target]),++i.source.weight,++i.target.weight;for(e=0;l>e;++e)i=y[e],isNaN(i.x)&&(i.x=t("x",d)),isNaN(i.y)&&(i.y=t("y",g)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(r=[],"function"==typeof c)for(e=0;u>e;++e)r[e]=+c.call(this,m[e],e);else for(e=0;u>e;++e)r[e]=c;if(o=[],"function"==typeof f)for(e=0;u>e;++e)o[e]=+f.call(this,m[e],e);else for(e=0;u>e;++e)o[e]=f;if(a=[],"function"==typeof p)for(e=0;l>e;++e)a[e]=+p.call(this,y[e],e);else for(e=0;l>e;++e)a[e]=p;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return n||(n=Uo.behavior.drag().origin(_t).on("dragstart.force",Oi).on("drag.force",e).on("dragend.force",qi)),arguments.length?void this.on("mouseover.force",ji).on("mouseout.force",Yi).call(n):n},Uo.rebind(s,l,"on")};var il=20,rl=1,ol=1/0;Uo.layout.hierarchy=function(){function t(e,a,s){var l=r.call(n,e,a);if(e.depth=a,s.push(e),l&&(h=l.length)){for(var h,u,c=-1,f=e.children=new Array(h),p=0,d=a+1;++c<h;)u=f[c]=t(l[c],d,s),u.parent=e,p+=u.value;i&&f.sort(i),o&&(e.value=p)}else delete e.children,o&&(e.value=+o.call(n,e,a)||0);return e}function e(t,i){var r=t.children,a=0;if(r&&(s=r.length))for(var s,l=-1,h=i+1;++l<s;)a+=e(r[l],h);else o&&(a=+o.call(n,t,i)||0);return o&&(t.value=a),a}function n(e){var n=[];return t(e,0,n),n}var i=$i,r=Ui,o=Gi;return n.sort=function(t){return arguments.length?(i=t,n):i},n.children=function(t){return arguments.length?(r=t,n):r},n.value=function(t){return arguments.length?(o=t,n):o},n.revalue=function(t){return e(t,0),t},n},Uo.layout.partition=function(){function t(e,n,i,r){var o=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,o&&(a=o.length)){var a,s,l,h=-1;for(i=e.value?i/e.value:0;++h<a;)t(s=o[h],n,l=s.value*i,r),n+=l}}function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,o=-1;++o<r;)i=Math.max(i,e(n[o]));return 1+i}function n(n,o){var a=i.call(this,n,o);return t(a[0],0,r[0],r[1]/e(a[0])),a}var i=Uo.layout.hierarchy(),r=[1,1];return n.size=function(t){return arguments.length?(r=t,n):r},Vi(n,i)},Uo.layout.pie=function(){function t(o){var a=o.map(function(n,i){return+e.call(t,n,i)}),s=+("function"==typeof i?i.apply(this,arguments):i),l=(("function"==typeof r?r.apply(this,arguments):r)-s)/Uo.sum(a),h=Uo.range(o.length);null!=n&&h.sort(n===al?function(t,e){return a[e]-a[t]}:function(t,e){return n(o[t],o[e])});var u=[];return h.forEach(function(t){var e;u[t]={data:o[t],value:e=a[t],startAngle:s,endAngle:s+=e*l}}),u}var e=Number,n=al,i=0,r=Sa;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(i=e,t):i},t.endAngle=function(e){return arguments.length?(r=e,t):r},t};var al={};Uo.layout.stack=function(){function t(s,l){var h=s.map(function(n,i){return e.call(t,n,i)}),u=h.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),a.call(t,e,n)]})}),c=n.call(t,u,l);h=Uo.permute(h,c),u=Uo.permute(u,c);var f,p,d,g=i.call(t,u,l),v=h.length,y=h[0].length;for(p=0;y>p;++p)for(r.call(t,h[0][p],d=g[p],u[0][p][1]),f=1;v>f;++f)r.call(t,h[f][p],d+=u[f-1][p][1],u[f][p][1]);return s}var e=_t,n=tr,i=er,r=Ji,o=Qi,a=Ki;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:sl.get(e)||tr,t):n},t.offset=function(e){return arguments.length?(i="function"==typeof e?e:ll.get(e)||er,t):i},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(r=e,t):r},t};var sl=Uo.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(nr),o=t.map(ir),a=Uo.range(i).sort(function(t,e){return r[t]-r[e]}),s=0,l=0,h=[],u=[];for(e=0;i>e;++e)n=a[e],l>s?(s+=o[n],h.push(n)):(l+=o[n],u.push(n));return u.reverse().concat(h)},reverse:function(t){return Uo.range(t.length).reverse()},"default":tr}),ll=Uo.map({silhouette:function(t){var e,n,i,r=t.length,o=t[0].length,a=[],s=0,l=[];for(n=0;o>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];i>s&&(s=i),a.push(i)}for(n=0;o>n;++n)l[n]=(s-a[n])/2;return l},wiggle:function(t){var e,n,i,r,o,a,s,l,h,u=t.length,c=t[0],f=c.length,p=[];for(p[0]=l=h=0,n=1;f>n;++n){for(e=0,r=0;u>e;++e)r+=t[e][n][1];for(e=0,o=0,s=c[n][0]-c[n-1][0];u>e;++e){for(i=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);e>i;++i)a+=(t[i][n][1]-t[i][n-1][1])/s;o+=a*t[e][n][1]}p[n]=l-=r?o/r*s:0,h>l&&(h=l)}for(n=0;f>n;++n)p[n]-=h;return p},expand:function(t){var e,n,i,r=t.length,o=t[0].length,a=1/r,s=[];for(n=0;o>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];if(i)for(e=0;r>e;e++)t[e][n][1]/=i;else for(e=0;r>e;e++)t[e][n][1]=a}for(n=0;o>n;++n)s[n]=0;return s},zero:er});Uo.layout.histogram=function(){function t(t,o){for(var a,s,l=[],h=t.map(n,this),u=i.call(this,h,o),c=r.call(this,u,h,o),f=(o=-1,h.length),p=c.length-1,d=e?1:1/f;++o<p;)a=l[o]=[],a.dx=c[o+1]-(a.x=c[o]),a.y=0;if(p>0)for(o=-1;++o<f;)(s=h[o])>=u[0]&&s<=u[1]&&(a=l[Uo.bisect(c,s,1,p)-1],a.y+=d,a.push(t[o]));return l}var e=!0,n=Number,i=sr,r=or;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(i=wt(e),t):i},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return ar(t,e)}:wt(e),t):r},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},Uo.layout.tree=function(){function t(t,o){function a(t,e){var i=t.children,r=t._tree;if(i&&(o=i.length)){for(var o,s,h,u=i[0],c=u,f=-1;++f<o;)h=i[f],a(h,s),c=l(h,s,c),s=h;vr(t);var p=.5*(u._tree.prelim+h._tree.prelim);e?(r.prelim=e._tree.prelim+n(t,e),r.mod=r.prelim-p):r.prelim=p}else e&&(r.prelim=e._tree.prelim+n(t,e))}function s(t,e){t.x=t._tree.prelim+e;var n=t.children;if(n&&(i=n.length)){var i,r=-1;for(e+=t._tree.mod;++r<i;)s(n[r],e)}}function l(t,e,i){if(e){for(var r,o=t,a=t,s=e,l=t.parent.children[0],h=o._tree.mod,u=a._tree.mod,c=s._tree.mod,f=l._tree.mod;s=ur(s),o=hr(o),s&&o;)l=hr(l),a=ur(a),a._tree.ancestor=t,(r=s._tree.prelim+c-o._tree.prelim-h+n(s,o))>0&&(yr(mr(s,t,i),t,r),h+=r,u+=r),c+=s._tree.mod,h+=o._tree.mod,f+=l._tree.mod,u+=a._tree.mod;s&&!ur(a)&&(a._tree.thread=s,a._tree.mod+=c-u),o&&!hr(l)&&(l._tree.thread=o,l._tree.mod+=h-f,i=t)}return i}var h=e.call(this,t,o),u=h[0];gr(u,function(t,e){t._tree={ancestor:t,prelim:0,mod:0,change:0,shift:0,number:e?e._tree.number+1:0}}),a(u),s(u,-u._tree.prelim);var c=cr(u,pr),f=cr(u,fr),p=cr(u,dr),d=c.x-n(c,f)/2,g=f.x+n(f,c)/2,v=p.depth||1;return gr(u,r?function(t){t.x*=i[0],t.y=t.depth*i[1],delete t._tree}:function(t){t.x=(t.x-d)/(g-d)*i[0],t.y=t.depth/v*i[1],delete t._tree}),h}var e=Uo.layout.hierarchy().sort(null).value(null),n=lr,i=[1,1],r=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=null==(i=e),t):r?null:i},t.nodeSize=function(e){return arguments.length?(r=null!=(i=e),t):r?i:null},Vi(t,e)},Uo.layout.pack=function(){function t(t,o){var a=n.call(this,t,o),s=a[0],l=r[0],h=r[1],u=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,gr(s,function(t){t.r=+u(t.value)}),gr(s,Mr),i){var c=i*(e?1:Math.max(2*s.r/l,2*s.r/h))/2;gr(s,function(t){t.r+=c}),gr(s,Mr),gr(s,function(t){t.r-=c})}return kr(s,l/2,h/2,e?1:1/Math.max(2*s.r/l,2*s.r/h)),a}var e,n=Uo.layout.hierarchy().sort(xr),i=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(i=+e,t):i},Vi(t,n)},Uo.layout.cluster=function(){function t(t,o){var a,s=e.call(this,t,o),l=s[0],h=0;gr(l,function(t){var e=t.children;e&&e.length?(t.x=Tr(e),t.y=Lr(e)):(t.x=a?h+=n(t,a):0,t.y=0,a=t)});var u=Rr(l),c=Pr(l),f=u.x-n(u,c)/2,p=c.x+n(c,u)/2;return gr(l,r?function(t){t.x=(t.x-l.x)*i[0],t.y=(l.y-t.y)*i[1]}:function(t){t.x=(t.x-f)/(p-f)*i[0],t.y=(1-(l.y?t.y/l.y:1))*i[1]}),s}var e=Uo.layout.hierarchy().sort(null).value(null),n=lr,i=[1,1],r=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=null==(i=e),t):r?null:i},t.nodeSize=function(e){return arguments.length?(r=null!=(i=e),t):r?i:null},Vi(t,e)},Uo.layout.treemap=function(){function t(t,e){for(var n,i,r=-1,o=t.length;++r<o;)i=(n=t[r]).value*(0>e?0:e),n.area=isNaN(i)||0>=i?0:i}function e(n){var o=n.children;if(o&&o.length){var a,s,l,h=c(n),u=[],f=o.slice(),d=1/0,g="slice"===p?h.dx:"dice"===p?h.dy:"slice-dice"===p?1&n.depth?h.dy:h.dx:Math.min(h.dx,h.dy);for(t(f,h.dx*h.dy/n.value),u.area=0;(l=f.length)>0;)u.push(a=f[l-1]),u.area+=a.area,"squarify"!==p||(s=i(u,g))<=d?(f.pop(),d=s):(u.area-=u.pop().area,r(u,g,h,!1),g=Math.min(h.dx,h.dy),u.length=u.area=0,d=1/0);u.length&&(r(u,g,h,!0),u.length=u.area=0),o.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var o,a=c(e),s=i.slice(),l=[];for(t(s,a.dx*a.dy/e.value),l.area=0;o=s.pop();)l.push(o),l.area+=o.area,null!=o.z&&(r(l,o.z?a.dx:a.dy,a,!s.length),l.length=l.area=0);i.forEach(n)}}function i(t,e){for(var n,i=t.area,r=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(o>n&&(o=n),n>r&&(r=n));return i*=i,e*=e,i?Math.max(e*r*d/i,i/(e*o*d)):1/0}function r(t,e,n,i){var r,o=-1,a=t.length,s=n.x,h=n.y,u=e?l(t.area/e):0;if(e==n.dx){for((i||u>n.dy)&&(u=n.dy);++o<a;)r=t[o],r.x=s,r.y=h,r.dy=u,s+=r.dx=Math.min(n.x+n.dx-s,u?l(r.area/u):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=u,n.dy-=u}else{for((i||u>n.dx)&&(u=n.dx);++o<a;)r=t[o],r.x=s,r.y=h,r.dx=u,h+=r.dy=Math.min(n.y+n.dy-h,u?l(r.area/u):0);r.z=!1,r.dy+=n.y+n.dy-h,n.x+=u,n.dx-=u}}function o(i){var r=a||s(i),o=r[0];return o.x=0,o.y=0,o.dx=h[0],o.dy=h[1],a&&s.revalue(o),t([o],o.dx*o.dy/o.value),(a?n:e)(o),f&&(a=r),r}var a,s=Uo.layout.hierarchy(),l=Math.round,h=[1,1],u=null,c=Fr,f=!1,p="squarify",d=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(h=t,o):h},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?Fr(e):Er(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Er(e,t)}if(!arguments.length)return u;var i;return c=null==(u=t)?Fr:"function"==(i=typeof t)?e:"number"===i?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(l=t?Math.round:Number,o):l!=Number},o.sticky=function(t){return arguments.length?(f=t,a=null,o):f},o.ratio=function(t){return arguments.length?(d=t,o):d},o.mode=function(t){return arguments.length?(p=t+"",o):p},Vi(o,s)},Uo.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,i,r;do{n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i}while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=Uo.random.normal.apply(Uo,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=Uo.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},Uo.scale={};var hl={floor:_t,ceil:_t};Uo.scale.linear=function(){return Wr([0,1],[0,1],fi,!1)};var ul={s:1,g:1,p:1,r:1,e:1};Uo.scale.log=function(){return Gr(Uo.scale.linear().domain([0,1]),10,!0,[1,10])};var cl=Uo.format(".0e"),fl={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};Uo.scale.pow=function(){return $r(Uo.scale.linear(),1,[0,1])},Uo.scale.sqrt=function(){return Uo.scale.pow().exponent(.5)},Uo.scale.ordinal=function(){return Qr([],{t:"range",a:[[]]})},Uo.scale.category10=function(){return Uo.scale.ordinal().range(pl)},Uo.scale.category20=function(){return Uo.scale.ordinal().range(dl)},Uo.scale.category20b=function(){return Uo.scale.ordinal().range(gl)},Uo.scale.category20c=function(){return Uo.scale.ordinal().range(vl)};var pl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ft),dl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ft),gl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ft),vl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ft);Uo.scale.quantile=function(){return Kr([],[])},Uo.scale.quantize=function(){return Jr(0,1,[0,1])},Uo.scale.threshold=function(){return to([.5],[0,1])},Uo.scale.identity=function(){return eo([0,1])},Uo.svg={},Uo.svg.arc=function(){function t(){var t=e.apply(this,arguments),o=n.apply(this,arguments),a=i.apply(this,arguments)+yl,s=r.apply(this,arguments)+yl,l=(a>s&&(l=a,a=s,s=l),s-a),h=Ma>l?"0":"1",u=Math.cos(a),c=Math.sin(a),f=Math.cos(s),p=Math.sin(s);return l>=ml?t?"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"Z":t?"M"+o*u+","+o*c+"A"+o+","+o+" 0 "+h+",1 "+o*f+","+o*p+"L"+t*f+","+t*p+"A"+t+","+t+" 0 "+h+",0 "+t*u+","+t*c+"Z":"M"+o*u+","+o*c+"A"+o+","+o+" 0 "+h+",1 "+o*f+","+o*p+"L0,0Z"}var e=no,n=io,i=ro,r=oo;return t.innerRadius=function(n){return arguments.length?(e=wt(n),t):e},t.outerRadius=function(e){return arguments.length?(n=wt(e),t):n},t.startAngle=function(e){return arguments.length?(i=wt(e),t):i},t.endAngle=function(e){return arguments.length?(r=wt(e),t):r},t.centroid=function(){var t=(e.apply(this,arguments)+n.apply(this,arguments))/2,o=(i.apply(this,arguments)+r.apply(this,arguments))/2+yl;return[Math.cos(o)*t,Math.sin(o)*t]},t};var yl=-Ca,ml=Sa-ka;Uo.svg.line=function(){return ao(_t)};var xl=Uo.map({linear:so,"linear-closed":lo,step:ho,"step-before":uo,"step-after":co,basis:mo,"basis-open":xo,"basis-closed":bo,bundle:wo,cardinal:go,"cardinal-open":fo,"cardinal-closed":po,monotone:Ao});xl.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var bl=[0,2/3,1/3,0],wl=[0,1/3,2/3,0],_l=[0,1/6,2/3,1/6];Uo.svg.line.radial=function(){var t=ao(Lo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},uo.reverse=co,co.reverse=uo,Uo.svg.area=function(){return To(_t)},Uo.svg.area.radial=function(){var t=To(Lo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},Uo.svg.chord=function(){function t(t,s){var l=e(this,o,t,s),h=e(this,a,t,s);return"M"+l.p0+i(l.r,l.p1,l.a1-l.a0)+(n(l,h)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,h.r,h.p0)+i(h.r,h.p1,h.a1-h.a0)+r(h.r,h.p1,l.r,l.p0))+"Z"}function e(t,e,n,i){var r=e.call(t,n,i),o=s.call(t,r,i),a=l.call(t,r,i)+yl,u=h.call(t,r,i)+yl;return{r:o,a0:a,a1:u,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(u),o*Math.sin(u)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function i(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Ma)+",1 "+e}function r(t,e,n,i){return"Q 0,0 "+i}var o=pn,a=dn,s=Ro,l=ro,h=oo;return t.radius=function(e){return arguments.length?(s=wt(e),t):s},t.source=function(e){return arguments.length?(o=wt(e),t):o},t.target=function(e){return arguments.length?(a=wt(e),t):a},t.startAngle=function(e){return arguments.length?(l=wt(e),t):l},t.endAngle=function(e){return arguments.length?(h=wt(e),t):h},t},Uo.svg.diagonal=function(){function t(t,r){
var o=e.call(this,t,r),a=n.call(this,t,r),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return"M"+(l=l.map(i))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=pn,n=dn,i=Po;return t.source=function(n){return arguments.length?(e=wt(n),t):e},t.target=function(e){return arguments.length?(n=wt(e),t):n},t.projection=function(e){return arguments.length?(i=e,t):i},t},Uo.svg.diagonal.radial=function(){var t=Uo.svg.diagonal(),e=Po,n=t.projection;return t.projection=function(t){return arguments.length?n(Fo(e=t)):e},t},Uo.svg.symbol=function(){function t(t,i){return(Ml.get(e.call(this,t,i))||No)(n.call(this,t,i))}var e=zo,n=Eo;return t.type=function(n){return arguments.length?(e=wt(n),t):e},t.size=function(e){return arguments.length?(n=wt(e),t):n},t};var Ml=Uo.map({circle:No,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Al)),n=e*Al;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/kl),n=e*kl/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/kl),n=e*kl/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});Uo.svg.symbolTypes=Ml.keys();var Sl,Cl,kl=Math.sqrt(3),Al=Math.tan(30*La),Ll=[],Tl=0;Ll.call=ga.call,Ll.empty=ga.empty,Ll.node=ga.node,Ll.size=ga.size,Uo.transition=function(t){return arguments.length?Sl?t.transition():t:ma.transition()},Uo.transition.prototype=Ll,Ll.select=function(t){var e,n,i,r=this.id,o=[];t=b(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]);for(var l=this[a],h=-1,u=l.length;++h<u;)(i=l[h])&&(n=t.call(i,i.__data__,h,a))?("__data__"in i&&(n.__data__=i.__data__),Ho(n,h,r,i.__transition__[r]),e.push(n)):e.push(null)}return Bo(o,r)},Ll.selectAll=function(t){var e,n,i,r,o,a=this.id,s=[];t=w(t);for(var l=-1,h=this.length;++l<h;)for(var u=this[l],c=-1,f=u.length;++c<f;)if(i=u[c]){o=i.__transition__[a],n=t.call(i,i.__data__,c,l),s.push(e=[]);for(var p=-1,d=n.length;++p<d;)(r=n[p])&&Ho(r,p,a,o),e.push(r)}return Bo(s,a)},Ll.filter=function(t){var e,n,i=[];"function"!=typeof t&&(t=F(t));for(var r=0,o=this.length;o>r;r++){i.push(e=[]);for(var a,s=0,l=(a=this[r]).length;l>s;s++)(n=a[s])&&t.call(n,n.__data__,s,r)&&e.push(n)}return Bo(i,this.id)},Ll.tween=function(t,e){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(t):z(this,null==e?function(e){e.__transition__[n].tween.remove(t)}:function(i){i.__transition__[n].tween.set(t,e)})},Ll.attr=function(t,e){function n(){this.removeAttribute(s)}function i(){this.removeAttributeNS(s.space,s.local)}function r(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(s);return n!==t&&(e=a(n,t),function(t){this.setAttribute(s,e(t))})})}function o(t){return null==t?i:(t+="",function(){var e,n=this.getAttributeNS(s.space,s.local);return n!==t&&(e=a(n,t),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?Ni:fi,s=Uo.ns.qualify(t);return Io(this,"attr."+t,e,s.local?o:r)},Ll.attrTween=function(t,e){function n(t,n){var i=e.call(this,t,n,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}}function i(t,n){var i=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}var r=Uo.ns.qualify(t);return this.tween("attr."+t,r.local?i:n)},Ll.style=function(t,e,n){function i(){this.style.removeProperty(t)}function r(e){return null==e?i:(e+="",function(){var i,r=Ko.getComputedStyle(this,null).getPropertyValue(t);return r!==e&&(i=fi(r,e),function(e){this.style.setProperty(t,i(e),n)})})}var o=arguments.length;if(3>o){if("string"!=typeof t){2>o&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}return Io(this,"style."+t,e,r)},Ll.styleTween=function(t,e,n){function i(i,r){var o=e.call(this,i,r,Ko.getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,i)},Ll.text=function(t){return Io(this,"text",t,Do)},Ll.remove=function(){return this.each("end.transition",function(){var t;this.__transition__.count<2&&(t=this.parentNode)&&t.removeChild(this)})},Ll.ease=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].ease:("function"!=typeof t&&(t=Uo.ease.apply(Uo,arguments)),z(this,function(n){n.__transition__[e].ease=t}))},Ll.delay=function(t){var e=this.id;return z(this,"function"==typeof t?function(n,i,r){n.__transition__[e].delay=+t.call(n,n.__data__,i,r)}:(t=+t,function(n){n.__transition__[e].delay=t}))},Ll.duration=function(t){var e=this.id;return z(this,"function"==typeof t?function(n,i,r){n.__transition__[e].duration=Math.max(1,t.call(n,n.__data__,i,r))}:(t=Math.max(1,t),function(n){n.__transition__[e].duration=t}))},Ll.each=function(t,e){var n=this.id;if(arguments.length<2){var i=Cl,r=Sl;Sl=n,z(this,function(e,i,r){Cl=e.__transition__[n],t.call(e,e.__data__,i,r)}),Cl=i,Sl=r}else z(this,function(i){var r=i.__transition__[n];(r.event||(r.event=Uo.dispatch("start","end"))).on(t,e)});return this},Ll.transition=function(){for(var t,e,n,i=this.id,r=++Tl,o=[],a=0,s=this.length;s>a;a++){o.push(t=[]);for(var l,h=0,u=(l=this[a]).length;u>h;h++)(e=l[h])&&(n=Object.create(e.__transition__[i]),n.delay+=n.duration,Ho(e,h,r,n)),t.push(e)}return Bo(o,r)},Uo.svg.axis=function(){function t(t){t.each(function(){var t,h=Uo.select(this),u=this.__chart__||n,c=this.__chart__=n.copy(),f=null==l?c.ticks?c.ticks.apply(c,s):c.domain():l,p=null==e?c.tickFormat?c.tickFormat.apply(c,s):_t:e,d=h.selectAll(".tick").data(f,c),g=d.enter().insert("g",".domain").attr("class","tick").style("opacity",ka),v=Uo.transition(d.exit()).style("opacity",ka).remove(),y=Uo.transition(d).style("opacity",1),m=Nr(c),x=h.selectAll(".domain").data([0]),b=(x.enter().append("path").attr("class","domain"),Uo.transition(x));g.append("line"),g.append("text");var w=g.select("line"),_=y.select("line"),M=d.select("text").text(p),S=g.select("text"),C=y.select("text");switch(i){case"bottom":t=Wo,w.attr("y2",r),S.attr("y",Math.max(r,0)+a),_.attr("x2",0).attr("y2",r),C.attr("x",0).attr("y",Math.max(r,0)+a),M.attr("dy",".71em").style("text-anchor","middle"),b.attr("d","M"+m[0]+","+o+"V0H"+m[1]+"V"+o);break;case"top":t=Wo,w.attr("y2",-r),S.attr("y",-(Math.max(r,0)+a)),_.attr("x2",0).attr("y2",-r),C.attr("x",0).attr("y",-(Math.max(r,0)+a)),M.attr("dy","0em").style("text-anchor","middle"),b.attr("d","M"+m[0]+","+-o+"V0H"+m[1]+"V"+-o);break;case"left":t=Oo,w.attr("x2",-r),S.attr("x",-(Math.max(r,0)+a)),_.attr("x2",-r).attr("y2",0),C.attr("x",-(Math.max(r,0)+a)).attr("y",0),M.attr("dy",".32em").style("text-anchor","end"),b.attr("d","M"+-o+","+m[0]+"H0V"+m[1]+"H"+-o);break;case"right":t=Oo,w.attr("x2",r),S.attr("x",Math.max(r,0)+a),_.attr("x2",r).attr("y2",0),C.attr("x",Math.max(r,0)+a).attr("y",0),M.attr("dy",".32em").style("text-anchor","start"),b.attr("d","M"+o+","+m[0]+"H0V"+m[1]+"H"+o)}if(c.rangeBand){var k=c,A=k.rangeBand()/2;u=c=function(t){return k(t)+A}}else u.rangeBand?u=c:v.call(t,c);g.call(t,u),y.call(t,c)})}var e,n=Uo.scale.linear(),i=Rl,r=6,o=6,a=3,s=[10],l=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(i=e in Pl?e+"":Rl,t):i},t.ticks=function(){return arguments.length?(s=arguments,t):s},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(r=+e,o=+arguments[n-1],t):r},t.innerTickSize=function(e){return arguments.length?(r=+e,t):r},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Rl="bottom",Pl={top:1,right:1,bottom:1,left:1};Uo.svg.brush=function(){function t(o){o.each(function(){var o=Uo.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",r).on("touchstart.brush",r),a=o.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),o.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=o.selectAll(".resize").data(d,_t);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Fl[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var u,c=Uo.transition(o),f=Uo.transition(a);l&&(u=Nr(l),f.attr("x",u[0]).attr("width",u[1]-u[0]),n(c)),h&&(u=Nr(h),f.attr("y",u[0]).attr("height",u[1]-u[0]),i(c)),e(c)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+u[+/e$/.test(t)]+","+c[+/^s/.test(t)]+")"})}function n(t){t.select(".extent").attr("x",u[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",u[1]-u[0])}function i(t){t.select(".extent").attr("y",c[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",c[1]-c[0])}function r(){function r(){32==Uo.event.keyCode&&(L||(x=null,R[0]-=u[1],R[1]-=c[1],L=2),v())}function d(){32==Uo.event.keyCode&&2==L&&(R[0]+=u[1],R[1]+=c[1],L=0,v())}function g(){var t=Uo.mouse(w),r=!1;b&&(t[0]+=b[0],t[1]+=b[1]),L||(Uo.event.altKey?(x||(x=[(u[0]+u[1])/2,(c[0]+c[1])/2]),R[0]=u[+(t[0]<x[0])],R[1]=c[+(t[1]<x[1])]):x=null),k&&y(t,l,0)&&(n(S),r=!0),A&&y(t,h,1)&&(i(S),r=!0),r&&(e(S),M({type:"brush",mode:L?"move":"resize"}))}function y(t,e,n){var i,r,s=Nr(e),l=s[0],h=s[1],d=R[n],g=n?c:u,v=g[1]-g[0];return L&&(l-=d,h-=v+d),i=(n?p:f)?Math.max(l,Math.min(h,t[n])):t[n],L?r=(i+=d)+v:(x&&(d=Math.max(l,Math.min(h,2*x[n]-i))),i>d?(r=i,i=d):r=d),g[0]!=i||g[1]!=r?(n?a=null:o=null,g[0]=i,g[1]=r,!0):void 0}function m(){g(),S.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),Uo.select("body").style("cursor",null),P.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),T(),M({type:"brushend"})}var x,b,w=this,_=Uo.select(Uo.event.target),M=s.of(w,arguments),S=Uo.select(w),C=_.datum(),k=!/^(n|s)$/.test(C)&&l,A=!/^(e|w)$/.test(C)&&h,L=_.classed("extent"),T=O(),R=Uo.mouse(w),P=Uo.select(Ko).on("keydown.brush",r).on("keyup.brush",d);if(Uo.event.changedTouches?P.on("touchmove.brush",g).on("touchend.brush",m):P.on("mousemove.brush",g).on("mouseup.brush",m),S.interrupt().selectAll("*").interrupt(),L)R[0]=u[0]-R[0],R[1]=c[0]-R[1];else if(C){var F=+/w$/.test(C),E=+/^n/.test(C);b=[u[1-F]-R[0],c[1-E]-R[1]],R[0]=u[F],R[1]=c[E]}else Uo.event.altKey&&(x=R.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),Uo.select("body").style("cursor",_.style("cursor")),M({type:"brushstart"}),g()}var o,a,s=m(t,"brushstart","brush","brushend"),l=null,h=null,u=[0,0],c=[0,0],f=!0,p=!0,d=El[0];return t.event=function(t){t.each(function(){var t=s.of(this,arguments),e={x:u,y:c,i:o,j:a},n=this.__chart__||e;this.__chart__=e,Sl?Uo.select(this).transition().each("start.brush",function(){o=n.i,a=n.j,u=n.x,c=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=pi(u,e.x),i=pi(c,e.y);return o=a=null,function(r){u=e.x=n(r),c=e.y=i(r),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=e.i,a=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(l=e,d=El[!l<<1|!h],t):l},t.y=function(e){return arguments.length?(h=e,d=El[!l<<1|!h],t):h},t.clamp=function(e){return arguments.length?(l&&h?(f=!!e[0],p=!!e[1]):l?f=!!e:h&&(p=!!e),t):l&&h?[f,p]:l?f:h?p:null},t.extent=function(e){var n,i,r,s,f;return arguments.length?(l&&(n=e[0],i=e[1],h&&(n=n[0],i=i[0]),o=[n,i],l.invert&&(n=l(n),i=l(i)),n>i&&(f=n,n=i,i=f),(n!=u[0]||i!=u[1])&&(u=[n,i])),h&&(r=e[0],s=e[1],l&&(r=r[1],s=s[1]),a=[r,s],h.invert&&(r=h(r),s=h(s)),r>s&&(f=r,r=s,s=f),(r!=c[0]||s!=c[1])&&(c=[r,s])),t):(l&&(o?(n=o[0],i=o[1]):(n=u[0],i=u[1],l.invert&&(n=l.invert(n),i=l.invert(i)),n>i&&(f=n,n=i,i=f))),h&&(a?(r=a[0],s=a[1]):(r=c[0],s=c[1],h.invert&&(r=h.invert(r),s=h.invert(s)),r>s&&(f=r,r=s,s=f))),l&&h?[[n,r],[i,s]]:l?[n,i]:h&&[r,s])},t.clear=function(){return t.empty()||(u=[0,0],c=[0,0],o=a=null),t},t.empty=function(){return!!l&&u[0]==u[1]||!!h&&c[0]==c[1]},Uo.rebind(t,s,"on")};var Fl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},El=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],zl=ts.format=as.timeFormat,Nl=zl.utc,Bl=Nl("%Y-%m-%dT%H:%M:%S.%LZ");zl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?qo:Bl,qo.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},qo.toString=Bl.toString,ts.second=zt(function(t){return new es(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),ts.seconds=ts.second.range,ts.seconds.utc=ts.second.utc.range,ts.minute=zt(function(t){return new es(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),ts.minutes=ts.minute.range,ts.minutes.utc=ts.minute.utc.range,ts.hour=zt(function(t){var e=t.getTimezoneOffset()/60;return new es(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),ts.hours=ts.hour.range,ts.hours.utc=ts.hour.utc.range,ts.month=zt(function(t){return(t=ts.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),ts.months=ts.month.range,ts.months.utc=ts.month.utc.range;var Il=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Dl=[[ts.second,1],[ts.second,5],[ts.second,15],[ts.second,30],[ts.minute,1],[ts.minute,5],[ts.minute,15],[ts.minute,30],[ts.hour,1],[ts.hour,3],[ts.hour,6],[ts.hour,12],[ts.day,1],[ts.day,2],[ts.week,1],[ts.month,1],[ts.month,3],[ts.year,1]],Hl=zl.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",_e]]),Wl={range:function(t,e,n){return Uo.range(+t,+e,n).map(Yo)},floor:_t,ceil:_t};Dl.year=ts.year,ts.scale=function(){return jo(Uo.scale.linear(),Dl,Hl)};var Ol=Dl.map(function(t){return[t[0].utc,t[1]]}),ql=Nl.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",_e]]);Ol.year=ts.year.utc,ts.scale.utc=function(){return jo(Uo.scale.linear(),Ol,ql)},Uo.text=Mt(function(t){return t.responseText}),Uo.json=function(t,e){return St(t,"application/json",Xo,e)},Uo.html=function(t,e){return St(t,"text/html",Vo,e)},Uo.xml=Mt(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(Uo):"object"==typeof module&&module.exports?module.exports=Uo:this.d3=Uo}(),function(t){"use strict";function e(){function t(t,e){t.attr("transform",function(t){return"translate("+(e(t)+v)+", 0)"})}function e(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function n(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function i(t){for(var e=[],n=Math.ceil(t[0]);n<t[1];n++)e.push(n);return e.length>0&&e[0]>0&&e.unshift(e[0]-(e[1]-e[0])),e}function r(t,e){return t.length<g||e%Math.ceil(t.length/g)==0}function o(t){return t<m.length?m[t]:t}function s(t){var e=o(t);return y?y(e):e}function l(o){o.each(function(){var o,l,g=a.select(this),y=i(h.domain()),m=g.selectAll(".tick.major").data(y,String),x=m.enter().insert("g","path").attr("class","tick major").style("opacity",1e-6),b=a.transition(m.exit()).style("opacity",1e-6).remove(),w=a.transition(m).style("opacity",1),_=h.rangeExtent?h.rangeExtent():n(h.range()),M=g.selectAll(".domain").data([0]);M.enter().append("path").attr("class","domain");var S=a.transition(M),C=h.copy(),k=this.__chart__||C;this.__chart__=C,x.append("line"),x.append("text");var A=x.select("line"),L=w.select("line"),T=m.select("text"),R=x.select("text"),P=w.select("text");switch(v=(C(1)-C(0))/2,l=d?0:v,u){case"bottom":o=t,A.attr("y2",c),R.attr("y",Math.max(c,0)+p),L.attr("x1",l).attr("x2",l).attr("y2",c),P.attr("x",0).attr("y",Math.max(c,0)+p),T.attr("dy",".71em").style("text-anchor","middle"),T.text(function(t){return r(y,t)?s(t):""}),S.attr("d","M"+_[0]+","+f+"V0H"+_[1]+"V"+f);break;case"left":o=e,A.attr("x2",-c),R.attr("x",-(Math.max(c,0)+p)),L.attr("x2",-c).attr("y2",0),P.attr("x",-(Math.max(c,0)+p)).attr("y",v),T.attr("dy",".32em").style("text-anchor","end"),T.text(function(t){return r(y,t)?s(t):""}),S.attr("d","M"+-f+","+_[0]+"H0V"+_[1]+"H"+-f)}if(h.ticks)x.call(o,k),w.call(o,C),b.call(o,C);else{var F=C.rangeBand()/2,E=function(t){return C(t)+F};x.call(o,E),w.call(o,E)}})}var h=a.scale.linear(),u="bottom",c=6,f=6,p=3,d=!1,g=10,v=0,y=null,m=[];return l.scale=function(t){return arguments.length?(h=t,l):h},l.orient=function(t){return arguments.length?(u=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",l):u},l.categories=function(t){return arguments.length?(m=t,l):m},l.tickCentered=function(t){return arguments.length?(d=t,l):d},l.tickTextNum=function(t){return arguments.length?(g=t,l):g},l.tickFormat=function(t){return arguments.length?(y=t,l):y},l.tickOffset=function(){return v},l.ticks=function(){},l}function n(t){return t||0===t}function i(t){return void 0===t}function r(t){return void 0!==t}var o=t.c3={},a=t.d3;o.generate=function(o){function s(t,e){if(!(t in o))throw Error(e)}function l(t,e){for(var n=o,i=0;i<t.length;i++){if(!(t[i]in n))return e;n=n[t[i]]}return n}function h(){zn=f(),Nn=p(),kn={top:0,left:($i?_i+zr:0)+d(),bottom:20+($i?0:_i)+Cr,right:g()},Tn=zn-kn.left-kn.right,Pn=Nn-kn.top-kn.bottom,An={top:$i?kn.top:Nn-_i-Cr,left:$i?Er:kn.left,bottom:20+Cr,right:NaN},Rn=$i?kn.left-Er-zr:Tn,Fn=$i?Pn:Nn-An.top-An.bottom,Ln={top:Nn-Cr,right:NaN,bottom:0,left:kn.left},En=Nn-Ln.top-Ln.bottom,u()}function u(){Bn=.95*(In=Pn/2),Dn=le(hn.data.targets)?.6*Bn:0}function c(){var t=Or.property("offsetLeft");return t||0}function f(){return gn||y()}function p(){var t=vn||m();return t>0?t:320}function d(){return yn||(Ii?1:v("y"))}function g(){return mn||(Oi?Xi||$i?1:v("y2"):1)}function v(){return 40}function y(){return+a.select(dn).style("width").replace("px","")}function m(){return+a.select(dn).style("height").replace("px","")}function x(){return Tn+2+kn.left+kn.right}function b(){return 40}function w(){return kn.left+20}function _(){return Pn-kn.top+2}function M(){var t=$i?Pn:Tn,e=U(),n=gt();return n>1?t*e/(n-1):t}function S(){var t,e;jn=$i?1:0,Yn=$i?Pn:Tn,Xn=$i?0:Pn,Vn=$i?Tn:1,Un=jn,Gn=Yn,$n=$i?0:Fn,Zn=$i?Rn:1,Qn=k(jn,Yn,Qn?Qn.domain():undefined,function(){return ii.tickOffset()}),Kn=A(Xn,Vn,Kn?Kn.domain():undefined),Jn=A(Xn,Vn,Jn?Jn.domain():undefined),ti=k(jn,Yn,Gr,function(t){return t%1?0:ai.tickOffset()}),ei=A($n,Zn),ni=A($n,Zn),t=E(),e=z(),ii=R(Qn,Lr,t,e),ai=R(ti,Pr,t,e),ri=P(Kn,Tr,Di,Wi),oi=P(Jn,Rr,Vi,Gi),C()}function C(){Hn=B(),Wn=I(),On=I(.98)}function k(t,e,n,o){var s=(xr?a.time.scale():a.scale.linear()).range([t,e]);if(s.orgDomain=function(){return s.domain()},r(n)&&s.domain(n),i(o)&&(o=function(){return 0}),br){var l,h=s;s=function(t){return h(t)+o(t)};for(l in h)s[l]=h[l];s.orgDomain=function(){return h.domain()},s.domain=function(t){return arguments.length?(h.domain(t),s):(t=h.domain(),[t[0],t[1]+1])}}return s}function A(t,e){return a.scale.linear().range([t,e])}function L(t){return"y2"===F(t)?Jn:Kn}function T(t){return"y2"===F(t)?ni:ei}function R(t,n,i,r){var o=(br?e():a.svg.axis()).scale(t).orient(n);return o.tickFormat(i).ticks(r),br?o.categories(Li).tickCentered(Ti):o.tickOffset=function(){return 0},o}function P(t,e,n,i){return a.svg.axis().scale(t).orient(e).tickFormat(n).ticks(i).outerTickSize(0)}function F(t){return t in pi?pi[t]:"y"}function E(){var t=xr?Ar:br?St:null;return Ri&&("function"==typeof Ri?t=Ri:xr&&(t=function(t){return a.time.format(Ri)(t)})),t}function z(){var t=gt();return t<10?t:10}function N(t){var e=!1;return qn(hn.data.targets).forEach(function(n){if(!e&&n.data.id===t.data.id)return e=!0,void(t=n)}),e?t:null}function B(){var t=a.svg.arc().outerRadius(Bn).innerRadius(Dn),e=function(e,n){var i;return n?t(e):(i=N(e))?t(i):"M 0 0"};return e.centroid=t.centroid,e}function I(t){var e=a.svg.arc().outerRadius(In*(t||1)).innerRadius(Dn);return function(t){var n=N(t);return n?e(n):"M 0 0"}}function D(t,e){return ve(t.data)?Hn(t,e):"M 0 0"}function H(t){var e,n,i,r,o=N(t),a="";return o&&(n=(e=Hn.centroid(o))[0],i=e[1],a="translate("+n/(r=Math.sqrt(n*n+i*i))*Bn*.8+","+i/r*Bn*.8+")"),a}function W(t){return(t.endAngle-t.startAngle)/(2*Math.PI)}function O(t){return hr(t,W(t))}function q(t,e){var n=Or.selectAll(".chart-arc"+an(t)),i=Or.selectAll(".-arc").filter(function(e){return e.data.id!==t});n.selectAll("path").transition().duration(50).attr("d",Wn).transition().duration(100).attr("d",On).each(function(t){ge(t.data)}),e||i.style("opacity",.3)}function j(t){Or.selectAll(".chart-arc"+an(t)).selectAll("path").transition().duration(50).attr("d",Hn),Or.selectAll(".-arc").style("opacity",1)}function Y(t){var e,n,i,r,o,s=bt(t);if(fi.length>0)for(o=_t(t),e=0;e<fi.length;e++)for(i=fi[e][0],o&&s[i]&&s[i].forEach(function(t,e){s[i][e]=t<0?t:0}),n=1;n<fi[e].length;n++)r=fi[e][n],s[r]&&s[r].forEach(function(t,e){F(r)!==F(i)||!s[i]||o&&+t>0||(s[i][e]+=+t)});return a.min(Object.keys(s).map(function(t){return a.min(s[t])}))}function X(t){var e,n,i,r,o,s=bt(t);if(fi.length>0)for(o=Mt(t),e=0;e<fi.length;e++)for(i=fi[e][0],o&&s[i]&&s[i].forEach(function(t,e){s[i][e]=t>0?t:0}),n=1;n<fi[e].length;n++)r=fi[e][n],s[r]&&s[r].forEach(function(t,e){F(r)!==F(i)||!s[i]||o&&+t<0||(s[i][e]+=+t)});return a.max(Object.keys(s).map(function(t){return a.max(s[t])}))}function V(t){var e=xt(function(e){return F(e.id)===t}),i="y2"===t?ji:zi,r="y2"===t?qi:Ei,o=i||Y(e),a=r||X(e),s=.1*Math.abs(a-o),l=s,h=s,u="y2"===t?Yi:Ni;if(u){var c=Math.max(Math.abs(o),Math.abs(a));a=c-u,o=u-c}return"y"===t&&Hi&&(l=n(Hi.top)?Hi.top:s,h=n(Hi.bottom)?Hi.bottom:s),"y2"===t&&Ui&&(l=n(Ui.top)?Ui.top:s,h=n(Ui.bottom)?Ui.bottom:s),oe(e)&&!_t(e)&&(h=o),[o-h,a+l]}function U(t){return t?1:Q(Gr)/Q(Qn.domain())}function G(t){return a.min(t,function(t){return a.min(t.values,function(t){return t.x})})}function $(t){return a.max(t,function(t){return a.max(t.values,function(t){return t.x})})}function Z(t){var e=[G(t),$(t)],n=e[0],i=e[1],r=br?0:.01*Math.abs(n-i);return[xr?new Date(n.getTime()-r):n-r,xr?new Date(i.getTime()+r):i+r]}function Q(t){return t[1]-t[0]}function K(t){for(var e=0;e<t.length;e++)if(!(t[e]in un))return!1;return!0}function J(t,e){un[t]=ft(e)}function tt(t){for(var e=[],n=0;n<t.length;n++)t[n]in un&&e.push(ft(un[t[n]]));return e}function et(t){return"start"in t?Qn(xr?be(t.start):t.start):0}function nt(t){var e=et(t),n=("end"in t?Qn(xr?be(t.end):t.end):Tn)-e;return n<0?0:n}function it(t){return si&&t===si||li&&Se(li,t)}function rt(t){return!it(t)}function ot(t){return si||(li?li[t]:null)}function at(t,e){return t in hn.data.x&&hn.data.x[t]&&hn.data.x[t][e]?hn.data.x[t][e]:e}function st(t){Object.keys(t).forEach(function(e){li[e]=t[e]})}function lt(t){var e;return t&&(e=ci[t.id],t.name=e||t.id),t}function ht(t){var e,n,i=t[0],r={},o=[];for(e=1;e<t.length;e++){for(r={},n=0;n<t[e].length;n++)r[i[n]]=t[e][n];o.push(r)}return o}function ut(t){var e,n,r,o=[];for(e=0;e<t.length;e++)for(r=t[e][0],n=1;n<t[e].length;n++)i(o[n-1])&&(o[n-1]={}),o[n-1][r]=t[e][n];return o}function ct(e){var n,i=a.keys(e[0]).filter(rt),r=a.keys(e[0]).filter(it);return xr&&0===r.length?(t.alert('data.x or data.xs must be specified when axis.x.type == "timeseries"'),[]):(wr&&i.forEach(function(t){var n=ot(t);r.indexOf(n)>=0?hn.data.x[t]=e.map(function(t){return t[n]}):hn.data.x[t]=hn.data.x[Object.keys(hn.data.x)[0]]}),(n=i.map(function(t){var n=ui(t);return{id:n,id_org:t,values:e.map(function(e,i){var r,o=ot(t);return r=xr?be(e[o]):wr?e[o]?+e[o]:at(t,i):i,e.x=r,{x:r,value:null===e[t]||isNaN(e[t])?null:+e[t],id:n}})}})).forEach(function(t){var e;t.values=t.values.sort(function(t,e){return(t.x||0===t.x?t.x:Infinity)-(e.x||0===e.x?e.x:Infinity)}),e=0,t.values.forEach(function(t){t.index=e++})}),di&&ne(yt(n).filter(function(t){return!(t in gi)}),di),n.forEach(function(t){J(t.id_org,t)}),n)}function ft(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}}function pt(t){return t>0&&hn.data.targets[0].values[t-1]?hn.data.targets[0].values[t-1].x:undefined}function dt(t){return t<gt()-1?hn.data.targets[0].values[t+1].x:undefined}function gt(){return a.max(hn.data.targets,function(t){return t.values.length})}function vt(){var t,e=hn.data.targets.length,n=0;return e>1?hn.data.targets.forEach(function(e){e.values.length>n&&(t=e,n=e.values.length)}):t=e?hn.data.targets[0]:null,t}function yt(t){return(t=i(t)?hn.data.targets:t).map(function(t){return t.id})}function mt(t){var e,n=yt();for(e=0;e<n.length;e++)if(n[e]===t)return!0;return!1}function xt(t){return r(t)?hn.data.targets.filter(t):hn.data.targets}function bt(t){var e={};return t.forEach(function(t){e[t.id]=[],t.values.forEach(function(n){e[t.id].push(n.value)})}),e}function wt(t,e){var n,i,r,o=Object.keys(t);for(n=0;n<o.length;n++)for(r=t[o[n]].values,i=0;i<r.length;i++)if(e(r[i].value))return!0;return!1}function _t(t){return wt(t,function(t){return t<0})}function Mt(t){return wt(t,function(t){return t>0})}function St(t){return t<Li.length?Li[t]:t}function Ct(t){return"-shapes -shapes-"+t.id}function kt(t){return Ct(t)+" -line -line-"+t.id}function At(t){return Ct(t)+" -circles -circles-"+t.id}function Lt(t){return Ct(t)+" -bars -bars-"+t.id}function Tt(t){return Ct(t.data)+" -arc -arc-"+t.data.id}function Rt(t){return Ct(t)+" -area -area-"+t.id}function Pt(t,e){return"-shape -shape-"+e}function Ft(t,e){return Pt(t,e)+" -circle -circle-"+e}function Et(t,e){return Pt(t,e)+" -bar -bar-"+e}function zt(t,e){return"region region-"+e+" "+("classes"in t?[].concat(t.classes).join(" "):"")}function Nt(t,e){return"event-rect event-rect-"+e}function Bt(t){return n(t.value)?pe(t)?.5:1:0}function It(t){return t?Qn(t.x):null}function Dt(t){return Qn(xr?be(t.value):t.value)}function Ht(t){return Kn(t.value)}function Wt(t){return ti(t.x)}function Ot(t,e){var n,i=t[e].x,r=[];for(n=e-1;n>=0&&i===t[n].x;n--)r.push(t[n]);for(n=e;n<t.length&&i===t[n].x;n++)r.push(t[n]);return r}function qt(t,e,n,i){var r,o=n||0,a=i||t.length-1,s=Math.floor((a-o)/2)+o,l=t[s];return Qn(l.x)-e[0]>0?a=s:o=s,a-o==1?(r=[],t[o].x&&(r=r.concat(Ot(t,o))),t[a].x&&(r=r.concat(Ot(t,a))),Yt(r,e)):qt(t,e,o,a)}function jt(t,e){var n;return n=t.map(function(t){return qt(t.values,e)}),Yt(n,e)}function Yt(t,e){var n,i;return t.forEach(function(t){var r=Ce(t,e);(r<n||!n)&&(n=r,i=t)}),i}function Xt(t,e){var i,r,o,a,s,l=t.filter(function(t){return t&&n(t.value)});fr&&0!==l.length&&(Vr.html(pr(t)).style("visibility","hidden").style("display","block"),i=Vr.property("offsetWidth"),r=Vr.property("offsetHeight"),$i?a=e[0]:(a=(o=c())+d()+Qn(l[0].x)+20)+i>o+f()-g()&&(a-=i+30),s=e[1]+15+r<p()?e[1]+15:e[1]-r,Vr.style("top",s+"px").style("left",a+"px").style("visibility","visible"))}function Vt(){Vr.style("display","none")}function Ut(t){var e=t.filter(function(t){return t&&n(t.value)});fr&&(ae(hn.data.targets)||he(hn.data.targets)||jr.selectAll("line.xgrid-focus").style("visibility","visible").data([e[0]]).attr($i?"y1":"x1",It).attr($i?"y2":"x2",It))}function Gt(){jr.select("line.xgrid-focus").style("visibility","hidden")}function $t(t){return t.x||0===t.x?Qn(t.x):null}function Zt(t){return L(t.id)(t.value)}function Qt(){var t,e,n={},r=0;return xt(fe).forEach(function(o){for(t=0;t<fi.length;t++)if(!(fi[t].indexOf(o.id)<0))for(e=0;e<fi[t].length;e++)if(fi[t][e]in n){n[o.id]=n[fi[t][e]];break}i(n[o.id])&&(n[o.id]=r++)}),n.__max__=r-1,n}function Kt(t,e,n,i){var r=i?ti:Qn;return e?function(i){var o=i.id in n?n[i.id]:0;return i.x||0===i.x?r(i.x)-t*(e/2-o):0}:function(){return 0}}function Jt(t){return function(e){return(t?T(e.id):L(e.id))(e.value)}}function te(t,e){var n=Object.keys(t);return function(i,r){var o=e?T(i.id):L(i.id),a=o(0),s=a;return xt(fe).forEach(function(e){e.id!==i.id&&t[e.id]===t[i.id]&&n.indexOf(e.id)<n.indexOf(i.id)&&e.values[r].value*i.value>0&&(s+=o(e.values[r].value)-a)}),s}}function ee(t,e,n){return br?e?2*t.tickOffset()*.6/e:0:($i?Pn:Tn)*U(n)/(gt()-1)*.6}function ne(t,e){var n=i(t)?yt():t;"string"==typeof n&&(n=[n]);for(var r=0;r<n.length;r++)Zr[n[r]]=e===gi[n[r]],gi[n[r]]=e}function ie(t,e){var n=!1;return t.forEach(function(t){gi[t.id]===e&&(n=!0),t.id in gi||"line"!==e||(n=!0)}),n}function re(t){return Zr[t.id]?1:0}function oe(t){return ie(t,"bar")}function ae(t){return ie(t,"scatter")}function se(t){return ie(t,"pie")}function le(t){return ie(t,"donut")}function he(t){return se(t)||le(t)}function ue(t){var e="string"==typeof t?t:t.id;return!(e in gi)||"line"===gi[e]||"spline"===gi[e]||"area"===gi[e]||"area-spline"===gi[e]}function ce(t){var e="string"==typeof t?t:t.id;return"spline"===gi[e]||"area-spline"===gi[e]}function fe(t){var e="string"==typeof t?t:t.id;return"bar"===gi[e]}function pe(t){var e="string"==typeof t?t:t.id;return"scatter"===gi[e]}function de(t){var e="string"==typeof t?t:t.id;return"pie"===gi[e]}function ge(t){var e="string"==typeof t?t:t.id;return"donut"===gi[e]}function ve(t){return de(t)||ge(t)}function ye(t){return fe(t)?t.values:[]}function me(t){return ue(t)||pe(t)?t.values:[]}function xe(t,e){var n=[],i=t,r=null!==e?e:["#2dcc70","#1abc9c","#3598DB","#9A59B5","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];return function(e){return e in i?t[e]:(-1===n.indexOf(e)&&n.push(e),r[n.indexOf(e)%r.length])}}function be(t){var e;if(!t)throw Error(t+" can not be parsed as d3.time with format "+hi+". Maybe 'x' of this data is not defined. See data.x or data.xs option.");if(!(e=a.time.format(hi).parse(t)))throw Error("Failed to parse '"+t+"' with format "+hi);return e}function we(t,e){var n=a.mouse(t),i=a.select(t),r=1*i.attr("cx"),o=1*i.attr("cy");return Math.sqrt(Math.pow(r-n[0],2)+Math.pow(o-n[1],2))<e}function _e(t){var e=a.mouse(t),n=a.select(t),i=1*n.attr("x"),r=1*n.attr("y"),o=i+1*n.attr("width")+10,s=r-10;return i-10<e[0]&&e[0]<o&&s<e[1]}function Me(t,e){var n;for(n=0;n<e.length;n++)if(e[n].start<t&&t<=e[n].end)return!0;return!1}function Se(t,e){var n=!1;return Object.keys(t).forEach(function(i){t[i]===e&&(n=!0)}),n}function Ce(t,e){return Math.pow(Qn(t.x)-e[0],2)+Math.pow(Kn(t.value)-e[1],2)}function ke(t,e,n){sr(t,e),jr.select(".selected-circles-"+e.id).selectAll(".selected-circle-"+n).data([e]).enter().append("circle").attr("class",function(){return"selected-circle selected-circle-"+n}).attr("cx",$i?Zt:$t).attr("cy",$i?$t:Zt).attr("stroke",function(){return kr(e.id)}).attr("r",1.4*or).transition().duration(100).attr("r",or)}function Ae(t,e,n){lr(t,e),jr.select(".selected-circles-"+e.id).selectAll(".selected-circle-"+n).transition().duration(100).attr("r",0).remove()}function Le(t,e,n,i){t?ke(e,n,i):Ae(e,n,i)}function Te(){}function Re(){}function Pe(t,e,n,i){t?Te(e,n,i):Re(e,n,i)}function Fe(t){return t.filter(function(t){return n(t.value)})}function Ee(t,e){return(e?jr.selectAll(".-circles-"+e):jr).selectAll(".-circle"+(n(t)?"-"+t:""))}function ze(t,e){Ee(t,e).classed(cn,!0).attr("r",rr)}function Ne(t){Ee(t).filter(function(){return a.select(this).classed(cn)}).classed(cn,!1).attr("r",er)}function Be(t){return jr.selectAll(".-bar"+(n(t)?"-"+t:""))}function Ie(t){Be(t).classed(cn,!1)}function De(t){Be(t).classed(cn,!1)}function He(t,e,n,o){var a,s,l,h,u,c,f,p,d,g,v="M",y=[];if(r(o))for(a=0;a<o.length;a++)y[a]={},i(o[a].start)?y[a].start=t[0].x:y[a].start=xr?be(o[a].start):o[a].start,i(o[a].end)?y[a].end=t[t.length-1].x:y[a].end=xr?be(o[a].end):o[a].end;for(d=$i?function(t){return n(t.value)}:function(t){return e(t.x)},g=$i?function(t){return e(t.x)}:function(t){return n(t.value)},l=xr?function(t,i,r,o){
var a=t.x.getTime(),s=i.x-t.x,l=new Date(a+s*r),h=new Date(a+s*(r+o));return"M"+e(l)+" "+n(u(r))+" "+e(h)+" "+n(u(r+o))}:function(t,i,r,o){return"M"+e(h(r))+" "+n(u(r))+" "+e(h(r+o))+" "+n(u(r+o))},a=0;a<t.length;a++){if(i(y)||!Me(t[a].x,y))v+=" "+d(t[a])+" "+g(t[a]);else{h=k(t[a-1].x,t[a].x),u=A(t[a-1].value,t[a].value),c=e(t[a].x)-e(t[a-1].x),f=n(t[a].value)-n(t[a-1].value);var m=2*(p=2/Math.sqrt(Math.pow(c,2)+Math.pow(f,2)));for(s=p;s<=1;s+=m)v+=l(t[a-1],t[a],s,p)}t[a].x}return v}function We(e){var n,i,r,o;if((Ur=a.select(dn)).empty())t.alert('No bind element found. Check the selector specified by "bindto" and existance of that element. Default "bindto" is "#chart".');else{if(Ur.html(""),hn.data.x={},hn.data.targets=ct(e),h(),S(),Qn.domain(a.extent(Z(hn.data.targets))),Kn.domain(V("y")),Jn.domain(V("y2")),ti.domain(Qn.domain()),ei.domain(Kn.domain()),ni.domain(Jn.domain()),Gr=Qn.domain(),Hr.scale(ti),(bn||xn)&&Wr.scale(Qn),Or=a.select(dn).append("svg").attr("width",Tn+kn.left+kn.right).attr("height",Pn+kn.top+kn.bottom).on("mouseenter",Mn).on("mouseleave",Sn),(qr=Or.append("defs")).append("clipPath").attr("id",yr).append("rect").attr("y",kn.top).attr("width",Tn).attr("height",Pn-kn.top),qr.append("clipPath").attr("id","xaxis-clip").append("rect").attr("x",-1-kn.left).attr("y",-20).attr("width",x).attr("height",b),qr.append("clipPath").attr("id","yaxis-clip").append("rect").attr("x",1-kn.left).attr("y",kn.top-1).attr("width",w).attr("height",_),jr=Or.append("g").attr("transform",Fr.main),Yr=wi?Or.append("g").attr("transform",Fr.context):null,Xr=Si?Or.append("g").attr("transform",Fr.legend):null,Vr=a.select(dn).style("position","relative").append("div").style("position","absolute").style("z-index","10").style("display","none"),jr.append("g").attr("class","x axis").attr("clip-path",$i?"":"url("+document.URL+"#xaxis-clip)").attr("transform",Fr.x).call($i?ri:ii).append("text").attr("class","-axis-x-label").attr("x",Tn).attr("dy","-.5em").style("text-anchor","end").text(Fi),jr.append("g").attr("class","y axis").attr("clip-path",$i?"url("+document.URL+"#yaxis-clip)":"").call($i?ii:ri).append("text").attr("transform","rotate(-90)").attr("dy","1.2em").attr("dx","-.5em").style("text-anchor","end").text(Bi),Oi&&jr.append("g").attr("class","y2 axis").attr("transform",Fr.y2).call(oi),n=jr.append("g").attr("clip-path",mr).attr("class","grid"),Zi&&n.append("g").attr("class","xgrids"),Ki&&((i=n.append("g").attr("class","xgrid-lines").selectAll(".xgrid-line").data(Ki).enter().append("g").attr("class","xgrid-line")).append("line").attr("class",function(t){return""+t["class"]}),i.append("text").attr("class",function(t){return""+t["class"]}).attr("text-anchor","end").attr("transform",$i?"":"rotate(-90)").attr("dx",$i?0:-kn.top).attr("dy",-5).text(function(t){return t.text})),nr&&n.append("g").attr("class","xgrid-focus").append("line").attr("class","xgrid-focus").attr("x1",$i?0:-10).attr("x2",$i?Tn:-10).attr("y1",$i?-10:kn.top).attr("y2",$i?-10:Pn),Ji&&n.append("g").attr("class","ygrids"),tr&&((r=n.append("g").attr("class","ygrid-lines").selectAll("ygrid-line").data(tr).enter().append("g").attr("class","ygrid-line")).append("line").attr("class",function(t){return""+t["class"]}),r.append("text").attr("class",function(t){return""+t["class"]}).attr("text-anchor","end").attr("transform",$i?"rotate(-90)":"").attr("dx",$i?0:-kn.top).attr("dy",-5).text(function(t){return t.text})),jr.append("g").attr("clip-path",mr).attr("class","regions"),jr.append("g").attr("clip-path",mr).attr("class","chart"),jr.select(".chart").append("g").attr("class","event-rects").style("fill-opacity",0).style("cursor",bn||xn?$i?"ns-resize":"ew-resize":null),jr.select(".chart").append("g").attr("class","chart-bars"),jr.select(".chart").append("g").attr("class","chart-lines"),jr.select(".chart").append("g").attr("class","chart-arcs").attr("transform",Fr.arc).append("text").attr("class","chart-arcs-title").style("text-anchor","middle").text(ur),(bn||xn)&&jr.insert("rect",_n?null:"g.grid").attr("class","zoom-rect").attr("width",Tn).attr("height",Pn).style("opacity",0).style("cursor",$i?"ns-resize":"ew-resize").call(Wr).on("dblclick.zoom",null),null!==Pi&&Hr.extent("function"!=typeof Pi?Pi:Pi(Z())),wi&&(Yr.append("g").attr("clip-path",mr).attr("class","chart"),Yr.select(".chart").append("g").attr("class","chart-bars"),Yr.select(".chart").append("g").attr("class","chart-lines"),Yr.append("g").attr("clip-path",mr).attr("class","x brush").call(Hr).selectAll("rect").attr($i?"width":"height",$i?Rn:Fn),Yr.append("g").attr("class","x axis").attr("transform",Fr.subx).attr("clip-path",$i?"url("+document.URL+"#yaxis-clip)":"").call(ai)),Si&&rn(hn.data.targets),Ke(hn.data.targets),Ue({withTransform:!0,withUpdateXDomain:!0}),dr){if(xr&&"string"==typeof gr){for(gr=be(gr),o=0;o<hn.data.targets[0].values.length&&hn.data.targets[0].values[o].x-gr!=0;o++);gr=o}Vr.html(pr(hn.data.targets.map(function(t){return lt(t.values[gr])}))),Vr.style("top",vr.top).style("left",vr.left).style("display","block")}null==t.onresize&&(t.onresize=Ze()),t.onresize.add&&t.onresize.add(Qe)}}function Oe(t){t.append("rect").attr("class",Nt).style("cursor",mi&&xi?"pointer":null).on("mouseover",function(t,e){if(!Mr&&!he(hn.data.targets)){var n,i,r=hn.data.targets.map(function(t){return lt(t.values[e])});if(Object.keys(ci).length>0){i=[];for(var o in ci)for(n=0;n<r.length;n++)if(r[n].id===o){i.push(r[n]),r.shift(n);break}r=i.concat(r)}ir&&ze(e),Ie(e),Ut(r)}}).on("mouseout",function(t,e){he(hn.data.targets)||(Gt(),Vt(),Ne(e),De())}).on("mousemove",function(t,e){Mr||he(hn.data.targets)||(Xt(hn.data.targets.map(function(t){return lt(t.values[e])}),a.mouse(this)),mi&&(xi||jr.selectAll(".-shape-"+e).filter(function(t){return bi(t)}).each(function(){var t=a.select(this).classed(cn,!0);"circle"===this.nodeName&&t.attr("r",rr),Or.select(".event-rect-"+e).style("cursor",null)}).filter(function(){var t=a.select(this);return"circle"===this.nodeName?we(this,or):"rect"===this.nodeName?_e(this,t.attr("x"),t.attr("y")):void 0}).each(function(){var t=a.select(this);t.classed(cn)||(t.classed(cn,!0),"circle"===this.nodeName&&t.attr("r",or)),Or.select(".event-rect-"+e).style("cursor","pointer")})))}).on("click",function(t,e){he(hn.data.targets)||(Sr?Sr=!1:jr.selectAll(".-shape-"+e).each(function(t){je(this,t,e)}))}).call(a.behavior.drag().origin(Object).on("drag",function(){Ye(a.mouse(this))}).on("dragstart",function(){Xe(a.mouse(this))}).on("dragend",function(){Ve()})).call(Wr).on("dblclick.zoom",null)}function qe(t){t.append("rect").attr("x",0).attr("y",0).attr("width",Tn).attr("height",Pn).attr("class","event-rect").on("mouseout",function(){he(hn.data.targets)||(Gt(),Vt(),Ne())}).on("mousemove",function(){var t,e,n;Mr||he(hn.data.targets)||(t=a.mouse(this),Xt(n=[lt(e=jt(hn.data.targets,t))],t),ir&&(Ne(),ze(e.index,e.id)),Ut(n),Ce(e,t)<100?Or.select(".event-rect").style("cursor","pointer"):Or.select(".event-rect").style("cursor",null))}).on("click",function(){var t,e;he(hn.data.targets)||(t=a.mouse(this),Ce(e=jt(hn.data.targets,t),t)<100&&jr.select(".-circles-"+e.id).select(".-circle-"+e.index).each(function(){je(this,e,e.index)}))}).call(a.behavior.drag().origin(Object).on("drag",function(){Ye(a.mouse(this))}).on("dragstart",function(){Xe(a.mouse(this))}).on("dragend",function(){Ve()})).call(Wr).on("dblclick.zoom",null)}function je(t,e,n){var i,r=a.select(t),o=r.classed(fn),s=!1;"circle"===t.nodeName?(s=we(t,1.5*or),i=Le):"rect"===t.nodeName&&(s=_e(t),i=Pe),(xi||s)&&(mi&&bi(e)&&(r.classed(fn,!o),i(!o,r,e,n)),ar(e,r))}function Ye(t){var e,n,i,r,o,s,l,h;he(hn.data.targets)||mi&&(!bn&&!xn||Wr.altDomain)&&(e=_r[0],n=_r[1],i=t[0],r=t[1],o=Math.min(e,i),s=Math.max(e,i),l=xi?kn.top:Math.min(n,r),h=xi?Pn:Math.max(n,r),jr.select(".dragarea").attr("x",o).attr("y",l).attr("width",s-o).attr("height",h-l),jr.selectAll(".-shapes").selectAll(".-shape").filter(function(t){return bi(t)}).each(function(t,e){var n,i,r,u,c=a.select(this),f=c.classed(fn),p=c.classed(pn),d=!1;"circle"===this.nodeName?(n=1*c.attr("cx"),i=1*c.attr("cy"),u=Le,d=o<n&&n<s&&l<i&&i<h):"rect"===this.nodeName&&(n=1*c.attr("x"),i=1*c.attr("y"),r=1*c.attr("width"),u=Pe,d=o<n+r&&n<s&&i<h),d^p&&(c.classed(pn,!p),c.classed(fn,!f),u(!f,c,t,e))}))}function Xe(t){he(hn.data.targets)||mi&&(_r=t,jr.select(".chart").append("rect").attr("class","dragarea").style("opacity",.1),Mr=!0)}function Ve(){he(hn.data.targets)||mi&&(jr.select(".dragarea").transition().duration(100).style("opacity",0).remove(),jr.selectAll(".-shape").classed(pn,!1),Mr=!1)}function Ue(t){var e,i,o,s,l,h,u,c,f,p,d,g,v,y,m,x,b,w,_,S,C=Qt(),k=he(hn.data.targets);if(t=r(t)?t:{},y=!r(t.withY)||t.withY,m=!r(t.withSubchart)||t.withSubchart,x=!r(t.withTransition)||t.withTransition,b=!!r(t.withTransform)&&t.withTransform,w=!!r(t.withUpdateXDomain)&&t.withUpdateXDomain,_=!!r(t.withUpdateOrgXDomain)&&t.withUpdateOrgXDomain,S=x?Cn:0,_&&(Qn.domain(a.extent(Z(hn.data.targets))),Gr=Qn.domain(),Wr.scale(Qn).updateScaleExtent(),ti.domain(Qn.domain()),Hr.scale(ti)),w&&(Qn.domain(Hr.empty()?Gr:Hr.extent()),(bn||xn)&&Wr.scale(Qn).updateScaleExtent()),Kn.domain(V("y")),Jn.domain(V("y2")),jr.select(".x.axis").style("opacity",k?0:1).transition().duration($i?S:0).call($i?ri:ii),jr.select(".y.axis").style("opacity",k?0:1).transition().duration($i?0:S).call($i?ii:ri),jr.select(".y2.axis").style("opacity",k?0:1).transition().call(oi),jr.select(".x.axis .-axis-x-label").attr("x",Tn),ei.domain(Kn.domain()),ni.domain(Jn.domain()),Vr.style("display","none"),jr.select("line.xgrid-focus").style("visibility","hidden").attr("y2",Pn),Zi){if("year"===Qi){i=[];for(var A=Z(),L=A[0].getFullYear(),T=A[1].getFullYear(),R=L;R<=T;R++)i.push(new Date(R+"-01-01 00:00:00"))}else i=Qn.ticks(10);(e=jr.select(".xgrids").selectAll(".xgrid").data(i)).enter().append("line").attr("class","xgrid"),e.attr("x1",$i?0:function(t){return Qn(t)-ii.tickOffset()}).attr("x2",$i?Tn:function(t){return Qn(t)-ii.tickOffset()}).attr("y1",$i?function(t){return Qn(t)-ii.tickOffset()}:kn.top).attr("y2",$i?function(t){return Qn(t)-ii.tickOffset()}:Pn).style("opacity",function(){return+a.select(this).attr($i?"y1":"x1")===($i?Pn:0)?0:1}),e.exit().remove()}Ki&&((o=jr.selectAll(".xgrid-lines")).selectAll("line").transition().duration(S).attr("x1",$i?0:Dt).attr("x2",$i?Tn:Dt).attr("y1",$i?Dt:kn.top).attr("y2",$i?Dt:Pn),o.selectAll("text").attr("x",$i?Tn:0).attr("y",Dt)),y&&Ji&&((s=jr.select(".ygrids").selectAll(".ygrid").data(Kn.ticks(10))).enter().append("line").attr("class","ygrid"),s.attr("x1",$i?Kn:0).attr("x2",$i?Kn:Tn).attr("y1",$i?0:Kn).attr("y2",$i?Pn:Kn),s.exit().remove()),y&&tr&&((l=jr.select(".ygrid-lines")).selectAll("line").transition().duration(S).attr("x1",$i?Ht:0).attr("x2",$i?Ht:Tn).attr("y1",$i?0:Ht).attr("y2",$i?Pn:Ht),l.selectAll("text").attr("x",$i?0:Tn).attr("y",Ht)),(u=jr.selectAll(".-bars").selectAll(".-bar").data(ye)).enter().append("path").attr("d",Ir(C,!1)).style("stroke","none").style("opacity",0).style("fill",function(t){return kr(t.id)}).attr("class",Et),u.style("opacity",re).transition().duration(S).attr("d",Ir(C,!1)).style("opacity",1),u.exit().transition().duration(S).style("opacity",0).remove(),jr.selectAll(".-line").style("opacity",re).transition().duration(S).attr("d",Nr).style("opacity",1),jr.selectAll(".-area").style("opacity",0).transition().duration(S).attr("d",Br).style("opacity",$r),(h=jr.selectAll(".-circles").selectAll(".-circle").data(me)).enter().append("circle").attr("class",Ft).style("opacity",0).attr("r",er),h.style("opacity",re).transition().duration(S).style("opacity",Bt).attr("cx",$i?Zt:$t).attr("cy",$i?$t:Zt),h.exit().remove(),jr.selectAll(".chart-arc").select(".-arc").attr("transform",b?"scale(0)":"").style("opacity",function(t){return t===this._current?0:1}).transition().duration(S).attrTween("d",function(t){var e=N(t);if(!e)return function(){return"M 0 0"};var n=a.interpolate(this._current,e);return this._current=n(0),function(t){return D(n(t),!0)}}).attr("transform",b?"scale(1)":"").style("opacity",1),jr.selectAll(".chart-arc").select("text").attr("transform",H).style("opacity",0).transition().duration(S).text(O).style("opacity",function(t){return ve(t.data)?1:0}),jr.select(".chart-arcs-title").style("opacity",le(hn.data.targets)?1:0),wi&&(null!==a.event&&"zoom"===a.event.type&&Hr.extent(Qn.orgDomain()).update(),m&&(Yr.select(".x.axis").style("opacity",k?0:1).transition().duration($i?S:0).call(ai),Hr.empty()||Hr.extent(Qn.orgDomain()).update(),(f=Yr.selectAll(".-bars").selectAll(".-bar").data(ye)).enter().append("path").attr("d",Ir(C)).style("stroke","none").style("fill",function(t){return kr(t.id)}).attr("class",Et),f.style("opacity",re).transition().duration(S).attr("d",Ir(C)).style("opacity",1),f.exit().transition().duration(S).style("opacity",0).remove(),Yr.selectAll(".-line").style("opacity",re).transition().duration(S).attr("d",Dr).style("opacity",1))),jr.selectAll(".selected-circles").filter(function(t){return fe(t)}).selectAll("circle").remove(),jr.selectAll(".selected-circle").transition().duration(S).attr("cx",$i?Zt:$t).attr("cy",$i?$t:Zt),li?(qe((p=jr.select(".event-rects").selectAll(".event-rect").data([0])).enter()),p.attr("x",0).attr("y",0).attr("width",Tn).attr("height",Pn)):(wr?(v=function(t,e){var n=pt(e),i=dt(e);return(Qn(i||t.x+50)-Qn(n||t.x-50))/2},g=function(t,e){var n=pt(e);return(Qn(t.x)+Qn(n||t.x-50))/2}):(v=M(),g=function(t){return Qn(t.x)-v/2}),d=vt(),jr.select(".event-rects").datum(d?d.values:[]),Oe((p=jr.select(".event-rects").selectAll(".event-rect").data(function(t){return t})).enter()),p.attr("class",Nt).attr("x",$i?0:g).attr("y",$i?g:0).attr("width",$i?Tn:v).attr("height",$i?v:Pn),p.exit().remove()),(c=jr.select(".regions").selectAll("rect.region").data(cr)).enter().append("rect").style("fill-opacity",0),c.attr("class",zt).attr("x",$i?0:et).attr("y",$i?et:kn.top).attr("width",$i?Tn:nt).attr("height",$i?nt:Pn).transition().duration(S).style("fill-opacity",function(t){return n(t.opacity)?t.opacity:.1}),c.exit().transition().duration(S).style("fill-opacity",0).remove(),yt().forEach(function(t){Zr[t]=!0})}function Ge(){Ue({withTransition:!1,withY:!1,withSubchart:!1,withUpdateXDomain:!0})}function $e(){if("mousemove"===a.event.sourceEvent.type&&Wr.altDomain)return Qn.domain(Wr.altDomain),void Wr.scale(Qn).updateScaleExtent();br&&Qn.orgDomain()[0]===Gr[0]&&Qn.domain([Gr[0]-1e-10,Qn.orgDomain()[1]]),Ue({withTransition:!1,withY:!1,withSubchart:!1}),"mousemove"===a.event.sourceEvent.type&&(Sr=!0)}function Ze(){function t(){e.forEach(function(t){t()})}var e=[];return t.add=function(t){e.push(t)},t}function Qe(){h(),S(),Hr.scale(ti),(bn||xn)&&Wr.scale(Qn),Or.attr("width",zn).attr("height",Nn),Or.select("#"+yr).select("rect").attr("width",Tn).attr("height",Pn),Or.select("#xaxis-clip").select("rect").attr("width",x),Or.select(".zoom-rect").attr("width",Tn).attr("height",Pn),jr.select(".x.axis").attr("transform",Fr.x),jr.select(".y2.axis").attr("transform",Fr.y2),jr.select(".chart-arcs").attr("transform",Fr.arc),wi&&(Yr.attr("transform",Fr.context),Yr.select(".x.axis").attr("transform",Fr.subx)),Si&&(Xr.attr("transform",Fr.legend),rn(hn.data.targets,{withTransition:!1})),Ue({withTransition:!1,withUpdateXDomain:!0})}function Ke(t){var e,n;jr.select(".chart-bars").selectAll(".chart-bar").data(t).enter().append("g").attr("class",function(t){return"chart-bar target target-"+t.id}).style("pointer-events","none").append("g").attr("class",Lt).style("fill",function(t){return kr(t.id)}).style("stroke","none").style("cursor",function(t){return bi(t)?"pointer":null}),(e=jr.select(".chart-lines").selectAll(".chart-line").data(t).enter().append("g").attr("class",function(t){return"chart-line target target-"+t.id}).style("pointer-events","none")).append("path").attr("class",kt).style("opacity",0).style("stroke",function(t){return kr(t.id)}),e.append("path").attr("class",Rt).style("opacity",function(){return $r=+a.select(this).style("opacity"),0}).style("fill",function(t){return kr(t.id)}),e.append("g").attr("class",function(t){return"selected-circles selected-circles-"+t.id}),e.append("g").attr("class",At).style("fill",function(t){return kr(t.id)}).style("cursor",function(t){return bi(t)?"pointer":null}),t.forEach(function(t){var e=on(t.id);jr.selectAll(".selected-circles"+e).selectAll(".selected-circle").each(function(e){e.value=t.values[e.x].value})}),(n=jr.select(".chart-arcs").selectAll(".chart-arc").data(qn(t)).enter().append("g").attr("class",function(t){return"chart-arc target target-"+t.data.id})).append("path").attr("class",Tt).style("opacity",0).style("fill",function(t){return kr(t.data.id)}).style("cursor",function(t){return bi(t)?"pointer":null}).each(function(t){this._current=t}).on("mouseover",function(t){q(t.data.id),tn(t.data.id)}).on("mouseout",function(t){j(t.data.id),nn()}),n.append("text").attr("dy",".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none"),wi&&(Yr.select(".chart-bars").selectAll(".chart-bar").data(t).enter().append("g").attr("class",function(t){return"chart-bar target target-"+t.id}).append("g").attr("class",Lt).style("fill",function(t){return kr(t.id)}),Yr.select(".chart-lines").selectAll(".chart-line").data(t).enter().append("g").attr("class",function(t){return"chart-line target target-"+t.id}).append("path").attr("class",kt).style("opacity",0).style("stroke",function(t){return kr(t.id)})),Si&&rn(t),Or.selectAll(".target").transition().style("opacity",1)}function Je(t,e){hn.data.targets.forEach(function(e){for(var n=0;n<t.length;n++)if(e.id===t[n].id){e.values=t[n].values,t.splice(n,1);break}}),hn.data.targets=hn.data.targets.concat(t),Ke(hn.data.targets),Ue({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}),e()}function tn(t){var e=Or.selectAll(".legend-item"),n=function(e){return!t||e===t},i=function(t){return!n(t)};e.filter(i).transition().duration(100).style("opacity",.3),e.filter(n).transition().duration(100).style("opacity",1)}function en(t){var e=Or.selectAll(".legend-item"),n=function(e){return!t||e===t},i=function(t){return!n(t)};e.filter(i).transition().duration(100).style("opacity",1),e.filter(n).transition().duration(100).style("opacity",.3)}function nn(){Or.selectAll(".legend-item").transition().duration(100).style("opacity",1)}function rn(t,e){var n,o,a=yt(t),s=Tn/2-Ci*Object.keys(t).length/2;o=!r((e=i(e)?{}:e).withTransition)||e.withTransition,(n=Xr.selectAll(".legend-item").data(a).enter().append("g").attr("class",function(t){return"legend-item legend-item-"+t}).style("cursor","pointer").on("click",function(t){ki(t)}).on("mouseover",function(t){tn(t),hn.focus(t)}).on("mouseout",function(){nn(),hn.revert()})).append("rect").attr("class","legend-item-event").style("fill-opacity",0).attr("x",-200).attr("y",function(){return Cr/2-16}).attr("width",Ci).attr("height",24),n.append("rect").attr("class","legend-item-tile").style("pointer-events","none").style("fill",function(t){return kr(t)}).attr("x",-200).attr("y",function(){return Cr/2-9}).attr("width",10).attr("height",10),n.append("text").text(function(t){return r(ci[t])?ci[t]:t}).style("pointer-events","none").attr("x",-200).attr("y",function(){return Cr/2}),Xr.selectAll("rect.legend-item-event").data(a).transition().duration(o?250:0).attr("x",function(t,e){return s+Ci*e}),Xr.selectAll("rect.legend-item-tile").data(a).transition().duration(o?250:0).attr("x",function(t,e){return s+Ci*e}),Xr.selectAll("text").data(a).transition().duration(o?250:0).attr("x",function(t,e){return s+Ci*e+14})}function on(t){return t?"-"+t.replace(/\./g,"\\."):""}function an(t){return".target"+on(t)}function sn(t){return mt(t.id)}function ln(t){return"data"in t&&mt(t.data.id)}var hn={data:{}},un={},cn="_expanded_",fn="_selected_",pn="_included_",dn=l(["bindto"],"#chart"),gn=l(["size","width"],null),vn=l(["size","height"],null),yn=l(["padding","left"],null),mn=l(["padding","right"],null),xn=l(["scroll","enabled"],!1),bn=l(["zoom","enabled"],!1),wn=l(["zoom","extent"],null),_n=l(["zoom","privileged"],!1),Mn=l(["onenter"],function(){}),Sn=l(["onleave"],function(){}),Cn=l(["transition","duration"],350);s("data","data is required in config");var kn,An,Ln,Tn,Rn,Pn,Fn,En,zn,Nn,Bn,In,Dn,Hn,Wn,On,qn,jn,Yn,Xn,Vn,Un,Gn,$n,Zn,Qn,Kn,Jn,ti,ei,ni,ii,ri,oi,ai,si=l(["data","x"],null),li=l(["data","xs"],null),hi=l(["data","x_format"],"%Y-%m-%d"),ui=l(["data","id_converter"],function(t){return t}),ci=l(["data","names"],{}),fi=l(["data","groups"],[]),pi=l(["data","axes"],{}),di=l(["data","type"],null),gi=l(["data","types"],{}),vi=l(["data","regions"],{}),yi=l(["data","colors"],{}),mi=l(["data","selection","enabled"],!1),xi=l(["data","selection","grouped"],!1),bi=l(["data","selection","isselectable"],function(){return!0}),wi=l(["subchart","show"],!1),_i=wi?l(["subchart","size","height"],60):0,Mi=l(["color","pattern"],null),Si=l(["legend","show"],!0),Ci=l(["legend","item","width"],80),ki=l(["legend","item","onclick"],function(){}),Ai=l(["axis","x","type"],"indexed"),Li=l(["axis","x","categories"],[]),Ti=l(["axis","x","tick","centered"],!1),Ri=l(["axis","x","tick","format"],null),Pi=l(["axis","x","default"],null),Fi=l(["axis","x","label"],null),Ei=l(["axis","y","max"],null),zi=l(["axis","y","min"],null),Ni=l(["axis","y","center"],null),Bi=l(["axis","y","label"],null),Ii=l(["axis","y","inner"],!1),Di=l(["axis","y","tick","format"],null),Hi=l(["axis","y","padding"],null),Wi=l(["axis","y","ticks"],10),Oi=l(["axis","y2","show"],!1),qi=l(["axis","y2","max"],null),ji=l(["axis","y2","min"],null),Yi=l(["axis","y2","center"],null),Xi=l(["axis","y2","inner"],!1),Vi=l(["axis","y2","tick","format"],null),Ui=l(["axis","y2","padding"],null),Gi=l(["axis","y2","ticks"],10),$i=l(["axis","rotated"],!1),Zi=l(["grid","x","show"],!1),Qi=l(["grid","x","type"],"tick"),Ki=l(["grid","x","lines"],null),Ji=l(["grid","y","show"],!1),tr=l(["grid","y","lines"],null),er=l(["point","show"],!0)?l(["point","r"],2.5):0,nr=l(["point","focus","line","enabled"],!0),ir=l(["point","focus","expand","enabled"],!0),rr=l(["point","focus","expand","r"],ir?4:er),or=l(["point","focus","select","r"],8),ar=l(["point","onclick"],function(){}),sr=l(["point","onselected"],function(){}),lr=l(["point","onunselected"],function(){}),hr=l(["arc","label","format"],function(t,e){return(100*e).toFixed(1)+"%"}),ur=l(["arc","title"],""),cr=l(["regions"],[]),fr=l(["tooltip","enabled"],!0),pr=l(["tooltip","contents"],function(t){var e,i,r,o,a=Di||function(t){return+t},s=E();for(i=0;i<t.length;i++)t[i]&&n(t[i].value)&&(e||(e="<table class='-tooltip'><tr><th colspan='2'>"+(s?s(t[i].x):t[i].x)+"</th></tr>"),o=t[i].name,r=a(t[i].value),e+="<tr class='-tooltip-name-"+t[i].id+"'><td class='name'><span style='background-color:"+kr(t[i].id)+"'></span>"+o+"</td><td class='value'>"+r+"</td></tr>");return e+"</table>"}),dr=l(["tooltip","init","show"],!1),gr=l(["tooltip","init","x"],0),vr=l(["tooltip","init","position"],{top:"0px",left:"50px"}),yr=dn.replace("#","")+"-clip",mr="url("+document.URL+"#"+yr+")",xr="timeseries"===Ai,br="categorized"===Ai,wr=!xr&&(si||li),_r=null,Mr=!1,Sr=!1,Cr=Si?40:0,kr=xe(yi,Mi),Ar=function(){var t=[[a.time.format("%Y/%-m/%-d"),function(){return!0}],[a.time.format("%-m/%-d"),function(t){return t.getMonth()}],[a.time.format("%-m/%-d"),function(t){return 1!==t.getDate()}],[a.time.format("%-m/%-d"),function(t){return t.getDay()&&1!==t.getDate()}],[a.time.format("%I %p"),function(t){return t.getHours()}],[a.time.format("%I:%M"),function(t){return t.getMinutes()}],[a.time.format(":%S"),function(t){return t.getSeconds()}],[a.time.format(".%L"),function(t){return t.getMilliseconds()}]];return function(e){for(var n=t.length-1,i=t[n];!i[1](e);)i=t[--n];return i[0](e)}}(),Lr=$i?"left":"bottom",Tr=$i?Ii?"top":"bottom":Ii?"right":"left",Rr=$i?Xi?"bottom":"top":Xi?"left":"right",Pr=$i?"left":"bottom",Fr={main:function(){return"translate("+kn.left+","+kn.top+")"},context:function(){return"translate("+An.left+","+An.top+")"},legend:function(){return"translate("+Ln.left+","+Ln.top+")"},y2:function(){return"translate("+($i?0:Tn)+","+($i?10:0)+")"},x:function(){return"translate(0,"+Pn+")"},subx:function(){return"translate(0,"+($i?0:Fn)+")"},arc:function(){return"translate("+Tn/2+","+Pn/2+")"}},Er=40,zr=20;qn=a.layout.pie().value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)});var Nr=function(){var t=a.svg.line().x($i?function(t){return L(t.id)(t.value)}:It).y($i?It:function(t){return L(t.id)(t.value)});return function(e){var n,i,r=Fe(e.values);return ue(e)?(ce(e)?t.interpolate("cardinal"):t.interpolate("linear"),vi[e.id]?He(r,Qn,L(e.id),vi[e.id]):t(r)):(n=Qn(r[0].x),i=L(e.id)(r[0].value),$i?"M "+i+" "+n:"M "+n+" "+i)}}(),Br=function(){var t;return t=$i?a.svg.area().x0(function(t){return L(t.id)(0)}).x1(function(t){return L(t.id)(t.value)}).y(It):a.svg.area().x(It).y0(function(t){return L(t.id)(0)}).y1(function(t){return L(t.id)(t.value)}),function(e){var n,i,r=Fe(e.values);return ie([e],"area")||ie([e],"area-spline")?(ce(e)?t.interpolate("cardinal"):t.interpolate("linear"),t(r)):(n=Qn(r[0].x),i=L(e.id)(r[0].value),$i?"M "+i+" "+n:"M "+n+" "+i)}}(),Ir=function(t,e){var n=t.__max__+1,i=!(arguments.length>1)||e,r=ee(ii,n,!!i),o=Kt(r,n,t,!!i),a=Jt(!!i),s=te(t,!!i),l=i?T:L;return function(t,e){var n=l(t.id)(0),i=s(t,e)||n,h=[[o(t),i],[o(t),a(t)-(n-i)],[o(t)+r,a(t)-(n-i)],[o(t)+r,i]],u=$i?1:0,c=$i?0:1;return"M "+h[0][u]+","+h[0][c]+" L"+h[1][u]+","+h[1][c]+" L"+h[2][u]+","+h[2][c]+" L"+h[3][u]+","+h[3][c]+" z"}},Dr=function(){var t=a.svg.line().x($i?function(t){return T(t.id)(t.value)}:Wt).y($i?Wt:function(t){return T(t.id)(t.value)});return function(e){var n=Fe(e.values);return ue(e)?t(n):"M "+ti(n[0].x)+" "+T(e.id)(n[0].value)}}(),Hr=a.svg.brush().on("brush",Ge),Wr=a.behavior.zoom().on("zoomstart",function(){Wr.altDomain=a.event.sourceEvent.altKey?Qn.orgDomain():null}).on("zoom",bn||xn?$e:null);Hr.update=function(){return Yr&&Yr.select(".x.brush").call(this),this},Hr.scale=function(t){return $i?this.y(t):this.x(t)},Wr.scale=function(t){return $i?this.y(t):this.x(t)},Wr.orgScaleExtent=function(){var t=wn||[1,10];return[t[0],Math.max(gt()/t[1],t[1])]},Wr.updateScaleExtent=function(){var t,e,n;return bn?(t=Q(Qn.orgDomain())/Q(Gr),n=[(e=this.orgScaleExtent())[0]*t,e[1]*t]):xn&&(n=[1,1]),this.scaleExtent(n)};var Or,qr,jr,Yr,Xr,Vr,Ur,Gr,$r,Zr={};if(hn.focus=function(t){function e(t){t.transition().duration(100).style("opacity",1)}var n=Or.selectAll(an(t)),i=n.filter(sn),r=n.filter(ln);hn.revert(),hn.defocus(),e(i.classed("focused",!0)),e(r),he(hn.data.targets)&&q(t,!0),tn(t)},hn.defocus=function(t){function e(t){t.transition().duration(100).style("opacity",.3)}var n=Or.selectAll(an(t)),i=n.filter(sn),r=n.filter(ln);hn.revert(),e(i.classed("focused",!1)),e(r),he(hn.data.targets)&&j(t),en(t)},hn.revert=function(t){function e(t){t.transition().duration(100).style("opacity",1)}var n=Or.selectAll(an(t)),i=n.filter(sn),r=n.filter(ln);e(i.classed("focused",!1)),e(r),he(hn.data.targets)&&j(t),nn()},hn.show=function(t){Or.selectAll(an(t)).transition().style("opacity",1)},hn.hide=function(t){Or.selectAll(an(t)).transition().style("opacity",0)},hn.unzoom=function(){Hr.clear().update(),Ue({withUpdateXDomain:!0})},hn.load=function(t){if("function"!=typeof t.done&&(t.done=function(){}),t.xs&&st(t.xs),"categories"in t&&br&&(Li=t.categories,ii.categories(Li)),"cacheIds"in t&&K(t.cacheIds))Je(tt(t.cacheIds),t.done);else if("data"in t)Je(ct(t.data),t.done);else if("url"in t)a.csv(t.url,function(e,n){Je(ct(n),t.done)});else if("rows"in t)Je(ct(ht(t.rows)),t.done);else{if(!("columns"in t))throw Error("url or rows or columns is required.");Je(ct(ut(t.columns)),t.done)}},hn.unload=function(t){hn.data.targets=hn.data.targets.filter(function(e){return e.id!==t}),Or.selectAll(an(t)).transition().style("opacity",0).remove(),Si&&(Or.selectAll(".legend-item"+on(t)).remove(),rn(hn.data.targets)),hn.data.targets.length>0&&Ue({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},hn.selected=function(t){var e=on(t);return a.merge(jr.selectAll(".-shapes"+e).selectAll(".-shape").filter(function(){return a.select(this).classed(fn)}).map(function(t){return t.map(function(t){return t.__data__})}))},hn.select=function(t,e,n){mi&&jr.selectAll(".-shapes").selectAll(".-shape").each(function(o,s){var l="circle"===this.nodeName?ke:Te,h="circle"===this.nodeName?Ae:Re;e.indexOf(s)>=0?bi(o)&&(xi||i(t)||t.indexOf(o.id)>=0)&&l(a.select(this).classed(fn,!0),o,s):r(n)&&n&&h(a.select(this).classed(fn,!1),o,s)})},hn.unselect=function(t,e){mi&&jr.selectAll(".-shapes").selectAll(".-shape").each(function(n,r){var o="circle"===this.nodeName?Ae:Re;(i(e)||e.indexOf(r)>=0)&&bi(n)&&(xi||i(t)||t.indexOf(n.id)>=0)&&o(a.select(this).classed(fn,!1),n,r)})},hn.toLine=function(t){ne(t,"line"),Ue()},hn.toSpline=function(t){ne(t,"spline"),Ue()},hn.toBar=function(t){ne(t,"bar"),Ue()},hn.toScatter=function(t){ne(t,"scatter"),Ue()},hn.toArea=function(t){ne(t,"area"),Ue()},hn.toAreaSpline=function(t){ne(t,"area-spline"),Ue()},hn.toPie=function(t){ne(t,"pie"),u(),C(),Ue({withTransform:!0})},hn.toDonut=function(t){ne(t,"donut"),u(),C(),Ue({withTransform:!0})},hn.groups=function(t){return i(t)?fi:(fi=t,Ue(),fi)},hn.regions=function(t){return i(t)?cr:(cr=t,Ue(),cr)},hn.regions.add=function(t){return i(t)?cr:(cr=cr.concat(t),Ue(),cr)},hn.regions.remove=function(t,e){var i=[].concat(t);return e=r(e)?e:{},i.forEach(function(t){var i=n(e.duration)?e.duration:0;Or.selectAll("."+t).transition().duration(i).style("fill-opacity",0).remove(),cr=cr.filter(function(e){return e.classes.indexOf(t)<0})}),cr},hn.data.get=function(t){var e=hn.data.getAsTarget(t);return r(e)?e.values.map(function(t){return t.value}):undefined},hn.data.getAsTarget=function(t){var e=xt(function(e){return e.id===t});return e.length>0?e[0]:undefined},hn.resize=function(t){gn=t?t.width:null,vn=t?t.height:null,Qe()},hn.destroy=function(){hn.data.targets=undefined,hn.data.x={},Ur.html(""),t.onresize=null},"url"in o.data)a.csv(o.data.url,function(t,e){We(e)});else if("rows"in o.data)We(ht(o.data.rows));else{if(!("columns"in o.data))throw Error("url or rows or columns is required.");We(ut(o.data.columns))}return hn}}(window),function(){"use strict";var t=this,e=t.Chart,n=function(t){return this.canvas=t.canvas,this.ctx=t,this.width=t.canvas.width,this.height=t.canvas.height,this.aspectRatio=this.width/this.height,i.retinaScale(this),this};n.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},n.types={};var i=n.helpers={},r=i.each=function(t,e,n){var i=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length){var r;for(r=0;r<t.length;r++)e.apply(n,[t[r],r].concat(i))}else for(var o in t)e.apply(n,[t[o],o].concat(i))},o=i.clone=function(t){var e={};return r(t,function(n,i){t.hasOwnProperty(i)&&(e[i]=n)}),e},a=i.extend=function(t){return r(Array.prototype.slice.call(arguments,1),function(e){r(e,function(n,i){e.hasOwnProperty(i)&&(t[i]=n)})}),t},s=i.merge=function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift({}),a.apply(null,t)},l=i.indexOf=function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},h=(i.where=function(t,e){var n=[];return i.each(t,function(t){e(t)&&n.push(t)}),n},i.findNextWhere=function(t,e,n){n||(n=-1);for(var i=n+1;i<t.length;i++){var r=t[i];if(e(r))return r}},i.findPreviousWhere=function(t,e,n){n||(n=t.length);for(var i=n-1;i>=0;i--){var r=t[i];if(e(r))return r}},i.inherits=function(t){var e=this,n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},i=function(){this.constructor=n};return i.prototype=e.prototype,n.prototype=new i,n.extend=h,t&&a(n.prototype,t),n.__super__=e.prototype,n
}),u=i.noop=function(){},c=i.uid=function(){var t=0;return function(){return"chart-"+t++}}(),f=i.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},p=i.amd="function"==typeof t.define&&t.define.amd,d=i.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},g=i.max=function(t){return Math.max.apply(Math,t)},v=i.min=function(t){return Math.min.apply(Math,t)},y=(i.cap=function(t,e,n){if(d(e)){if(t>e)return e}else if(d(n)&&n>t)return n;return t},i.getDecimalPlaces=function(t){return t%1!=0&&d(t)?t.toString().split(".")[1].length:0}),m=i.radians=function(t){return t*(Math.PI/180)},x=(i.getAngleFromPoint=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i),o=2*Math.PI+Math.atan2(i,n);return 0>n&&0>i&&(o+=2*Math.PI),{angle:o,distance:r}},i.aliasPixel=function(t){return t%2==0?0:.5}),b=(i.splineCurve=function(t,e,n,i){var r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),o=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)),a=i*r/(r+o),s=i*o/(r+o);return{inner:{x:e.x-a*(n.x-t.x),y:e.y-a*(n.y-t.y)},outer:{x:e.x+s*(n.x-t.x),y:e.y+s*(n.y-t.y)}}},i.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),w=(i.calculateScaleRange=function(t,e,n,i,r){var o=2,a=Math.floor(e/(1.5*n)),s=o>=a,l=g(t),h=v(t);l===h&&(l+=.5,h>=.5&&!i?h-=.5:l+=.5);for(var u=Math.abs(l-h),c=b(u),f=Math.ceil(l/(1*Math.pow(10,c)))*Math.pow(10,c),p=i?0:Math.floor(h/(1*Math.pow(10,c)))*Math.pow(10,c),d=f-p,y=Math.pow(10,c),m=Math.round(d/y);(m>a||a>2*m)&&!s;)if(m>a)y*=2,(m=Math.round(d/y))%1!=0&&(s=!0);else if(r&&c>=0){if(y/2%1!=0)break;y/=2,m=Math.round(d/y)}else y/=2,m=Math.round(d/y);return s&&(m=o,y=d/m),{steps:m,stepValue:y,min:p,max:p+m*y}},i.template=function(t,e){function n(t,e){var n=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):i[t]=i[t];return e?n(e):n}if(t instanceof Function)return t(e);var i={};return n(t,e)}),_=(i.generateLabels=function(t,e,n,i){var o=new Array(e);return labelTemplateString&&r(o,function(e,r){o[r]=w(t,{value:n+i*(r+1)})}),o},i.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(1-Math.pow(2,-10*t/1))},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),-i*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/n))},easeOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin(2*(1*t-e)*Math.PI/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:2==(t/=.5)?1:(n||(n=.3*1.5),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),1>t?-.5*i*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/n):i*Math.pow(2,-10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/n)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*t*t*((1+(e*=1.525))*t-e):.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-_.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*_.easeInBounce(2*t):.5*_.easeOutBounce(2*t-1)+.5}}),M=i.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},S=(i.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)},i.animationLoop=function(t,e,n,i,r,o){var a=0,s=_[n]||_.linear,l=function(){var n=++a/e,h=s(n);t.call(o,h,n,a),i.call(o,h,n),e>a?o.animationFrame=M(l):r.apply(o)};M(l)},i.getRelativePosition=function(t){var e,n,i=t.originalEvent||t,r=(t.currentTarget||t.srcElement).getBoundingClientRect();return i.touches?(e=i.touches[0].clientX-r.left,n=i.touches[0].clientY-r.top):(e=i.clientX-r.left,n=i.clientY-r.top),{x:e,y:n}},i.addEvent=function(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}),C=i.removeEvent=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=u},k=(i.bindEvents=function(t,e,n){t.events||(t.events={}),r(e,function(e){t.events[e]=function(){n.apply(t,arguments)},S(t.chart.canvas,e,t.events[e])})},i.unbindEvents=function(t,e){r(e,function(e,n){C(t.chart.canvas,n,e)})}),A=i.getMaximumWidth=function(t){return t.parentNode.clientWidth},L=i.getMaximumHeight=function(t){return t.parentNode.clientHeight},T=(i.getMaximumSize=i.getMaximumWidth,i.retinaScale=function(t){var e=t.ctx,n=t.canvas.width,i=t.canvas.height;window.devicePixelRatio&&(e.canvas.style.width=n+"px",e.canvas.style.height=i+"px",e.canvas.height=i*window.devicePixelRatio,e.canvas.width=n*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio))}),R=i.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},P=i.fontString=function(t,e,n){return e+" "+t+"px "+n},F=i.longestText=function(t,e,n){t.font=e;var i=0;return r(n,function(e){var n=t.measureText(e).width;i=n>i?n:i}),i},E=i.drawRoundedRectangle=function(t,e,n,i,r,o){t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+i-o,n),t.quadraticCurveTo(e+i,n,e+i,n+o),t.lineTo(e+i,n+r-o),t.quadraticCurveTo(e+i,n+r,e+i-o,n+r),t.lineTo(e+o,n+r),t.quadraticCurveTo(e,n+r,e,n+r-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath()};n.instances={},n.Type=function(t,e,i){this.options=e,this.chart=i,this.id=c(),n.instances[this.id]=this,e.responsive&&this.resize(),this.initialize.call(this,t)},a(n.Type.prototype,{initialize:function(){return this},clear:function(){return R(this.chart),this},stop:function(){return i.cancelAnimFrame.call(t,this.animationFrame),this},resize:function(t){this.stop();var e=this.chart.canvas,n=A(this.chart.canvas),i=this.options.maintainAspectRatio?n/this.chart.aspectRatio:L(this.chart.canvas);return e.width=this.chart.width=n,e.height=this.chart.height=i,T(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:u,render:function(t){return t&&this.reflow(),this.options.animation&&!t?i.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return w(this.options.legendTemplate,this)},destroy:function(){this.clear(),k(this,this.events),delete n.instances[this.id]},showTooltip:function(t,e){"undefined"==typeof this.activeElements&&(this.activeElements=[]);if(function(t){var e=!1;return t.length!==this.activeElements.length?e=!0:(r(t,function(t,n){t!==this.activeElements[n]&&(e=!0)},this),e)}.call(this,t)||e){if(this.activeElements=t,this.draw(),t.length>0)if(this.datasets&&this.datasets.length>1){for(var o,a,s=this.datasets.length-1;s>=0&&(o=this.datasets[s].points||this.datasets[s].bars||this.datasets[s].segments,-1===(a=l(o,t[0])));s--);var h=[],u=[],c=function(){var t,e,n,r,o,s=[],l=[],c=[];return i.each(this.datasets,function(e){(t=e.points||e.bars||e.segments)[a]&&t[a].hasValue()&&s.push(t[a])}),i.each(s,function(t){l.push(t.x),c.push(t.y),h.push(i.template(this.options.multiTooltipTemplate,t)),u.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),o=v(c),n=g(c),r=v(l),e=g(l),{x:r>this.chart.width/2?r:e,y:(o+n)/2}}.call(this,a);new n.MultiTooltip({x:c.x,y:c.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:h,legendColors:u,legendColorBackground:this.options.multiTooltipKeyBackground,title:t[0].label,chart:this.chart,ctx:this.chart.ctx}).draw()}else r(t,function(t){var e=t.tooltipPosition();new n.Tooltip({x:Math.round(e.x),y:Math.round(e.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:w(this.options.tooltipTemplate,t),chart:this.chart}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),n.Type.extend=function(t){var e=this,i=function(){return e.apply(this,arguments)};if(i.prototype=o(e.prototype),a(i.prototype,t),i.extend=n.Type.extend,t.name||e.prototype.name){var r=t.name||e.prototype.name,l=n.defaults[e.prototype.name]?o(n.defaults[e.prototype.name]):{};n.defaults[r]=a(l,t.defaults),n.types[r]=i,n.prototype[r]=function(t,e){var o=s(n.defaults.global,n.defaults[r],e||{});return new i(t,o,this)}}else f("Name not provided for this chart, so it hasn't been registered");return e},n.Element=function(t){a(this,t),this.initialize.apply(this,arguments),this.save()},a(n.Element.prototype,{initialize:function(){},restore:function(t){return t?r(t,function(t){this[t]=this._saved[t]},this):a(this,this._saved),this},save:function(){return this._saved=o(this),delete this._saved._saved,this},update:function(t){return r(t,function(t,e){this._saved[e]=this[e],this[e]=t},this),this},transition:function(t,e){return r(t,function(t,n){this[n]=(t-this._saved[n])*e+this._saved[n]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return d(this.value)}}),n.Element.extend=h,n.Point=n.Element.extend({display:!0,inRange:function(t,e){var n=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(e-this.y,2)<Math.pow(n,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),n.Arc=n.Element.extend({inRange:function(t,e){var n=i.getAngleFromPoint(this,{x:t,y:e}),r=n.angle>=this.startAngle&&n.angle<=this.endAngle,o=n.distance>=this.innerRadius&&n.distance<=this.outerRadius;return r&&o},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,e=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*e,y:this.y+Math.sin(t)*e}},draw:function(){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),t.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.lineJoin="bevel",this.showStroke&&t.stroke()}}),n.Rectangle=n.Element.extend({draw:function(){var t=this.ctx,e=this.width/2,n=this.x-e,i=this.x+e,r=this.base-(this.base-this.y),o=this.strokeWidth/2;this.showStroke&&(n+=o,i-=o,r+=o),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(n,this.base),t.lineTo(n,r),t.lineTo(i,r),t.lineTo(i,this.base),t.fill(),this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,e){return t>=this.x-this.width/2&&t<=this.x+this.width/2&&e>=this.y&&e<=this.base}}),n.Tooltip=n.Element.extend({draw:function(){var t=this.chart.ctx;t.font=P(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var e=2,n=t.measureText(this.text).width+2*this.xPadding,i=this.fontSize+2*this.yPadding,r=i+this.caretHeight+e;this.x+n/2>this.chart.width?this.xAlign="left":this.x-n/2<0&&(this.xAlign="right"),this.y-r<0&&(this.yAlign="below");var o=this.x-n/2,a=this.y-r;switch(t.fillStyle=this.fillColor,this.yAlign){case"above":t.beginPath(),t.moveTo(this.x,this.y-e),t.lineTo(this.x+this.caretHeight,this.y-(e+this.caretHeight)),t.lineTo(this.x-this.caretHeight,this.y-(e+this.caretHeight)),t.closePath(),t.fill();break;case"below":a=this.y+e+this.caretHeight,t.beginPath(),t.moveTo(this.x,this.y+e),t.lineTo(this.x+this.caretHeight,this.y+e+this.caretHeight),t.lineTo(this.x-this.caretHeight,this.y+e+this.caretHeight),t.closePath(),t.fill()}switch(this.xAlign){case"left":o=this.x-n+(this.cornerRadius+this.caretHeight);break;case"right":o=this.x-(this.cornerRadius+this.caretHeight)}E(t,o,a,n,i,this.cornerRadius),t.fill(),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,o+n/2,a+i/2)}}),n.MultiTooltip=n.Element.extend({initialize:function(){this.font=P(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=P(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,e=F(this.ctx,this.font,this.labels)+this.fontSize+3,n=g([e,t]);this.width=n+2*this.xPadding;var i=this.height/2;this.y-i<0?this.y=i:this.y+i>this.chart.height&&(this.y=this.chart.height-i),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var e=this.y-this.height/2+this.yPadding,n=t-1;return 0===t?e+this.titleFontSize/2:e+(1.5*this.fontSize*n+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){E(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor,t.fill(),t.closePath(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.titleTextColor,t.font=this.titleFont,t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),t.font=this.font,i.each(this.labels,function(e,n){t.fillStyle=this.textColor,t.fillText(e,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(n+1)),t.fillStyle=this.legendColorBackground,t.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize),t.fillStyle=this.legendColors[n].fill,t.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}),n.Scale=n.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=y(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(w(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?F(this.ctx,this.font,this.yLabels):0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,e=this.endPoint-this.startPoint;for(this.calculateYRange(e),this.buildYLabels(),this.calculateXLabelRotation();e>this.endPoint-this.startPoint;)e=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(e),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,e=this.ctx.measureText(this.xLabels[0]).width,n=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=n/2+3,this.xScalePaddingLeft=e/2>this.yLabelWidth+10?e/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var i,r=F(this.ctx,this.font,this.xLabels);this.xLabelWidth=r;for(var o=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>o&&0===this.xLabelRotation||this.xLabelWidth>o&&this.xLabelRotation<=90&&this.xLabelRotation>0;)i=Math.cos(m(this.xLabelRotation)),t=i*e,i*n,t+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=i*r;this.xLabelRotation>0&&(this.endPoint-=Math.sin(m(this.xLabelRotation))*r+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:u,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var e=this.drawingArea()/(this.min-this.max);return this.endPoint-e*(t-this.min)},calculateX:function(t){var e=(this.xLabelRotation,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight))/(this.valuesCount-(this.offsetGridLines?0:1)),n=e*t+this.xScalePaddingLeft;return this.offsetGridLines&&(n+=e/2),Math.round(n)},update:function(t){i.extend(this,t),this.fit()},draw:function(){var t=this.ctx,e=(this.endPoint-this.startPoint)/this.steps,n=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,r(this.yLabels,function(r,o){var a=this.endPoint-e*o,s=Math.round(a);t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(r,n-10,a),t.beginPath(),o>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),s+=i.aliasPixel(t.lineWidth),t.moveTo(n,s),t.lineTo(this.width,s),t.stroke(),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(n-5,s),t.lineTo(n,s),t.stroke(),t.closePath()},this),r(this.xLabels,function(e,n){var i=this.calculateX(n)+x(this.lineWidth),r=this.calculateX(n-(this.offsetGridLines?.5:0))+x(this.lineWidth),o=this.xLabelRotation>0;t.beginPath(),n>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),t.moveTo(r,this.endPoint),t.lineTo(r,this.startPoint-3),t.stroke(),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(r,this.endPoint),t.lineTo(r,this.endPoint+5),t.stroke(),t.closePath(),t.save(),t.translate(i,o?this.endPoint+12:this.endPoint+8),t.rotate(-1*m(this.xLabelRotation)),t.font=this.font,t.textAlign=o?"right":"center",t.textBaseline=o?"middle":"top",t.fillText(e,0,0),t.restore()},this))}}),n.RadialScale=n.Element.extend({initialize:function(){this.size=v([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var e=this.drawingArea/(this.max-this.min);return(t-this.min)*e},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=y(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(w(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,e,n,i,r,o,a,s,l,h,u,c,f=v([this.height/2-this.pointLabelFontSize-5,this.width/2]),p=this.width,g=0;for(this.ctx.font=P(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e=0;e<this.valuesCount;e++)t=this.getPointPosition(e,f),n=this.ctx.measureText(w(this.templateString,{value:this.labels[e]})).width+5,0===e||e===this.valuesCount/2?(i=n/2,t.x+i>p&&(p=t.x+i,r=e),t.x-i<g&&(g=t.x-i,a=e)):e<this.valuesCount/2?t.x+n>p&&(p=t.x+n,r=e):e>this.valuesCount/2&&t.x-n<g&&(g=t.x-n,a=e);l=g,h=Math.ceil(p-this.width),o=this.getIndexAngle(r),s=this.getIndexAngle(a),u=h/Math.sin(o+Math.PI/2),c=l/Math.sin(s+Math.PI/2),u=d(u)?u:0,c=d(c)?c:0,this.drawingArea=f-(c+u)/2,this.setCenterPoint(c,u)},setCenterPoint:function(t,e){var n=this.width-e-this.drawingArea,i=t+this.drawingArea;this.xCenter=(i+n)/2,this.yCenter=this.height/2},getIndexAngle:function(t){return t*(2*Math.PI/this.valuesCount)-Math.PI/2},getPointPosition:function(t,e){var n=this.getIndexAngle(t);return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter}},draw:function(){if(this.display){var t=this.ctx;if(r(this.yLabels,function(e,n){if(n>0){var i,r=n*(this.drawingArea/this.steps),o=this.yCenter-r;if(this.lineWidth>0)if(t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,this.lineArc)t.beginPath(),t.arc(this.xCenter,this.yCenter,r,0,2*Math.PI),t.closePath(),t.stroke();else{t.beginPath();for(var a=0;a<this.valuesCount;a++)i=this.getPointPosition(a,this.calculateCenterOffset(this.min+n*this.stepValue)),0===a?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y);t.closePath(),t.stroke()}if(this.showLabels){if(t.font=P(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var s=t.measureText(e).width;t.fillStyle=this.backdropColor,t.fillRect(this.xCenter-s/2-this.backdropPaddingX,o-this.fontSize/2-this.backdropPaddingY,s+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.fontColor,t.fillText(e,this.xCenter,o)}}},this),!this.lineArc){t.lineWidth=this.angleLineWidth,t.strokeStyle=this.angleLineColor;for(var e=this.valuesCount-1;e>=0;e--){if(this.angleLineWidth>0){var n=this.getPointPosition(e,this.calculateCenterOffset(this.max));t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(n.x,n.y),t.stroke(),t.closePath()}var i=this.getPointPosition(e,this.calculateCenterOffset(this.max)+5);t.font=P(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t.fillStyle=this.pointLabelFontColor;var o=this.labels.length,a=this.labels.length/2,s=a/2,l=s>e||e>o-s,h=e===s||e===o-s;t.textAlign=0===e?"center":e===a?"center":a>e?"left":"right",t.textBaseline=h?"middle":l?"bottom":"top",t.fillText(this.labels[e],i.x,i.y)}}}}}),i.addEvent(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){r(n.instances,function(t){t.options.responsive&&t.resize(t.render,!0)})},50)}}()),p?define(function(){return n}):"object"==typeof module&&module.exports&&(module.exports=n),t.Chart=n,n.noConflict=function(){return t.Chart=e,n}}.call(this),function(){"use strict";var t=this.Chart,e=t.helpers,n={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};t.Type.extend({name:"Bar",defaults:n,initialize:function(n){var i=this.options;this.ScaleClass=t.Scale.extend({offsetGridLines:!0,calculateBarX:function(t,e,n){var r=this.calculateBaseWidth(),o=this.calculateX(n)-r/2,a=this.calculateBarWidth(t);return o+a*e+e*i.barDatasetSpacing+a/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*i.barValueSpacing},calculateBarWidth:function(t){return(this.calculateBaseWidth()-(t-1)*i.barDatasetSpacing)/t}}),this.datasets=[],this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var n="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(t){t.restore(["fillColor","strokeColor"])}),e.each(n,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(n)}),this.BarClass=t.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),e.each(n.datasets,function(t){var i={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,bars:[]};this.datasets.push(i),e.each(t.data,function(e,r){i.bars.push(new this.BarClass({value:e,label:n.labels[r],datasetLabel:t.label,strokeColor:t.strokeColor,fillColor:t.fillColor,highlightFill:t.highlightFill||t.fillColor,highlightStroke:t.highlightStroke||t.strokeColor}))},this)},this),this.buildScale(n.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(t,n,i){e.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,i,n),y:this.scale.endPoint}),t.save()},this),this.render()},update:function(){this.scale.update(),e.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachBars(function(t){t.save()}),this.render()},eachBars:function(t){e.each(this.datasets,function(n,i){e.each(n.bars,t,this,i)},this)},getBarsAtEvent:function(t){for(var n,i=[],r=e.getRelativePosition(t),o=function(t){i.push(t.bars[n])},a=0;a<this.datasets.length;a++)for(n=0;n<this.datasets[a].bars.length;n++)if(this.datasets[a].bars[n].inRange(r.x,r.y))return e.each(this.datasets,o),i;return i},buildScale:function(t){var n=this,i=function(){var t=[];return n.eachBars(function(e){t.push(e.value)}),t},r={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var n=e.calculateScaleRange(i(),t,this.fontSize,this.beginAtZero,this.integersOnly);e.extend(this,n)},xLabels:t,font:e.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&e.extend(r,{calculateYRange:e.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(r)},addData:function(t,n){e.each(t,function(t,e){this.datasets[e].bars.push(new this.BarClass({value:t,label:n,x:this.scale.calculateBarX(this.datasets.length,e,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[e].strokeColor,fillColor:this.datasets[e].fillColor}))},this),this.scale.addXLabel(n),this.update()},removeData:function(){this.scale.removeXLabel(),e.each(this.datasets,function(t){t.bars.shift()},this),this.update()},reflow:function(){e.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=e.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var n=t||1;this.clear(),this.chart.ctx,this.scale.draw(n),e.each(this.datasets,function(t,i){e.each(t.bars,function(t,e){t.hasValue()&&(t.base=this.scale.endPoint,t.transition({x:this.scale.calculateBarX(this.datasets.length,i,e),y:this.scale.calculateY(t.value),width:this.scale.calculateBarWidth(this.datasets.length)},n).draw())},this)},this)}})}.call(this),function(){"use strict";var t=this.Chart,e=t.helpers,n={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};t.Type.extend({name:"Doughnut",defaults:n,initialize:function(n){this.segments=[],this.outerRadius=(e.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=t.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var n="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];e.each(this.segments,function(t){t.restore(["fillColor"])}),e.each(n,function(t){t.fillColor=t.highlightColor}),this.showTooltip(n)}),this.calculateTotal(n),e.each(n,function(t,e){this.addData(t,e,!0)},this),this.render()},getSegmentsAtEvent:function(t){var n=[],i=e.getRelativePosition(t);return e.each(this.segments,function(t){t.inRange(i.x,i.y)&&n.push(t)},this),n},addData:function(t,e,n){var i=e||this.segments.length;this.segments.splice(i,0,new this.SegmentArc({value:t.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:t.color,highlightColor:t.highlight||t.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(t.value),label:t.label})),n||(this.reflow(),this.update())},calculateCircumference:function(t){return 2*Math.PI*(t/this.total)},calculateTotal:function(t){this.total=0,e.each(t,function(t){this.total+=t.value},this)},update:function(){this.calculateTotal(this.segments),e.each(this.activeElements,function(t){t.restore(["fillColor"])}),e.each(this.segments,function(t){t.save()}),this.render()},removeData:function(t){var n=e.isNumber(t)?t:this.segments.length-1;this.segments.splice(n,1),this.reflow(),this.update()},reflow:function(){e.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(e.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,e.each(this.segments,function(t){t.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var n=t||1;this.clear(),e.each(this.segments,function(t,e){t.transition({circumference:this.calculateCircumference(t.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},n),t.endAngle=t.startAngle+t.circumference,t.draw(),0===e&&(t.startAngle=1.5*Math.PI),e<this.segments.length-1&&(this.segments[e+1].startAngle=t.endAngle)},this)}}),t.types.Doughnut.extend({name:"Pie",defaults:e.merge(n,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var t=this.Chart,e=t.helpers,n={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};t.Type.extend({name:"Line",
defaults:n,initialize:function(n){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(t){return Math.pow(t-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var n="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),e.each(n,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(n)}),e.each(n.datasets,function(t){var i={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(i),e.each(t.data,function(e,r){i.points.push(new this.PointClass({value:e,label:n.labels[r],datasetLabel:t.label,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this),this.buildScale(n.labels),this.eachPoints(function(t,n){e.extend(t,{x:this.scale.calculateX(n),y:this.scale.endPoint}),t.save()},this)},this),this.render()},update:function(){this.scale.update(),e.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachPoints(function(t){t.save()}),this.render()},eachPoints:function(t){e.each(this.datasets,function(n){e.each(n.points,t,this)},this)},getPointsAtEvent:function(t){var n=[],i=e.getRelativePosition(t);return e.each(this.datasets,function(t){e.each(t.points,function(t){t.inRange(i.x,i.y)&&n.push(t)})},this),n},buildScale:function(n){var i=this,r=function(){var t=[];return i.eachPoints(function(e){t.push(e.value)}),t},o={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:n.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var n=e.calculateScaleRange(r(),t,this.fontSize,this.beginAtZero,this.integersOnly);e.extend(this,n)},xLabels:n,font:e.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&e.extend(o,{calculateYRange:e.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new t.Scale(o)},addData:function(t,n){e.each(t,function(t,e){this.datasets[e].points.push(new this.PointClass({value:t,label:n,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[e].pointStrokeColor,fillColor:this.datasets[e].pointColor}))},this),this.scale.addXLabel(n),this.update()},removeData:function(){this.scale.removeXLabel(),e.each(this.datasets,function(t){t.points.shift()},this),this.update()},reflow:function(){var t=e.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var n=t||1;this.clear();var i=this.chart.ctx,r=function(t){return null!==t.value},o=function(t,n,i){return e.findNextWhere(n,r,i)||t},a=function(t,n,i){return e.findPreviousWhere(n,r,i)||t};this.scale.draw(n),e.each(this.datasets,function(t){var s=e.where(t.points,r);e.each(t.points,function(t,e){t.hasValue()&&t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(e)},n)},this),this.options.bezierCurve&&e.each(s,function(t,n){var i=n>0&&n<s.length-1?this.options.bezierCurveTension:0;t.controlPoints=e.splineCurve(a(t,s,n),t,o(t,s,n),i),t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint),t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this),i.lineWidth=this.options.datasetStrokeWidth,i.strokeStyle=t.strokeColor,i.beginPath(),e.each(s,function(t,e){if(0===e)i.moveTo(t.x,t.y);else if(this.options.bezierCurve){var n=a(t,s,e);i.bezierCurveTo(n.controlPoints.outer.x,n.controlPoints.outer.y,t.controlPoints.inner.x,t.controlPoints.inner.y,t.x,t.y)}else i.lineTo(t.x,t.y)},this),i.stroke(),this.options.datasetFill&&s.length>0&&(i.lineTo(s[s.length-1].x,this.scale.endPoint),i.lineTo(s[0].x,this.scale.endPoint),i.fillStyle=t.fillColor,i.closePath(),i.fill()),e.each(s,function(t){t.draw()})},this)}})}.call(this),function(){"use strict";var t=this.Chart,e=t.helpers,n={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};t.Type.extend({name:"PolarArea",defaults:n,initialize:function(n){this.segments=[],this.SegmentArc=t.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:n.length}),this.updateScaleRange(n),this.scale.update(),e.each(n,function(t,e){this.addData(t,e,!0)},this),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var n="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];e.each(this.segments,function(t){t.restore(["fillColor"])}),e.each(n,function(t){t.fillColor=t.highlightColor}),this.showTooltip(n)}),this.render()},getSegmentsAtEvent:function(t){var n=[],i=e.getRelativePosition(t);return e.each(this.segments,function(t){t.inRange(i.x,i.y)&&n.push(t)},this),n},addData:function(t,e,n){var i=e||this.segments.length;this.segments.splice(i,0,new this.SegmentArc({fillColor:t.color,highlightColor:t.highlight||t.color,label:t.label,value:t.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(t.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),n||(this.reflow(),this.update())},removeData:function(t){var n=e.isNumber(t)?t:this.segments.length-1;this.segments.splice(n,1),this.reflow(),this.update()},calculateTotal:function(t){this.total=0,e.each(t,function(t){this.total+=t.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var n=[];e.each(t,function(t){n.push(t.value)});var i=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:e.calculateScaleRange(n,e.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);e.extend(this.scale,i,{size:e.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),e.each(this.segments,function(t){t.save()}),this.render()},reflow:function(){e.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),e.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),e.each(this.segments,function(t){t.update({outerRadius:this.scale.calculateCenterOffset(t.value)})},this)},draw:function(t){var n=t||1;this.clear(),e.each(this.segments,function(t,e){t.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(t.value)},n),t.endAngle=t.startAngle+t.circumference,0===e&&(t.startAngle=1.5*Math.PI),e<this.segments.length-1&&(this.segments[e+1].startAngle=t.endAngle),t.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var t=this.Chart,e=t.helpers;t.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(n){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(n),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var n="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),e.each(n,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(n)}),e.each(n.datasets,function(t){var i={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(i),e.each(t.data,function(e,r){var o;this.scale.animation||(o=this.scale.getPointPosition(r,this.scale.calculateCenterOffset(e))),i.points.push(new this.PointClass({value:e,label:n.labels[r],datasetLabel:t.label,x:this.options.animation?this.scale.xCenter:o.x,y:this.options.animation?this.scale.yCenter:o.y,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(t){e.each(this.datasets,function(n){e.each(n.points,t,this)},this)},getPointsAtEvent:function(t){var n=e.getRelativePosition(t),i=e.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},n),r=2*Math.PI/this.scale.valuesCount,o=Math.round((i.angle-1.5*Math.PI)/r),a=[];return(o>=this.scale.valuesCount||0>o)&&(o=0),i.distance<=this.scale.drawingArea&&e.each(this.datasets,function(t){a.push(t.points[o])}),a},buildScale:function(e){this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:e.labels,valuesCount:e.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(e.datasets),this.scale.buildYLabels()},updateScaleRange:function(t){var n=function(){var n=[];return e.each(t,function(t){t.data?n=n.concat(t.data):e.each(t.points,function(t){n.push(t.value)})}),n}(),i=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:e.calculateScaleRange(n,e.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);e.extend(this.scale,i)},addData:function(t,n){this.scale.valuesCount++,e.each(t,function(t,e){var i=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(t));this.datasets[e].points.push(new this.PointClass({value:t,label:n,x:i.x,y:i.y,strokeColor:this.datasets[e].pointStrokeColor,fillColor:this.datasets[e].pointColor}))},this),this.scale.labels.push(n),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),e.each(this.datasets,function(t){t.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(t){t.save()}),this.reflow(),this.render()},reflow:function(){e.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:e.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(t){var n=t||1,i=this.chart.ctx;this.clear(),this.scale.draw(),e.each(this.datasets,function(t){e.each(t.points,function(t,e){t.hasValue()&&t.transition(this.scale.getPointPosition(e,this.scale.calculateCenterOffset(t.value)),n)},this),i.lineWidth=this.options.datasetStrokeWidth,i.strokeStyle=t.strokeColor,i.beginPath(),e.each(t.points,function(t,e){0===e?i.moveTo(t.x,t.y):i.lineTo(t.x,t.y)},this),i.closePath(),i.stroke(),i.fillStyle=t.fillColor,i.fill(),e.each(t.points,function(t){t.hasValue()&&t.draw()})},this)}})}.call(this),function(){var t,e,n,i,r=[].slice,o=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};e=window.Morris={},t=jQuery,e.EventEmitter=function(){function t(){}return t.prototype.on=function(t,e){return null==this.handlers&&(this.handlers={}),null==this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e),this},t.prototype.fire=function(){var t,e,n,i,o,a,s;if(n=arguments[0],t=2<=arguments.length?r.call(arguments,1):[],null!=this.handlers&&null!=this.handlers[n]){for(s=[],i=0,o=(a=this.handlers[n]).length;i<o;i++)e=a[i],s.push(e.apply(null,t));return s}},t}(),e.commas=function(t){var e,n,i,r;return null!=t?(i=t<0?"-":"",e=Math.abs(t),n=Math.floor(e).toFixed(0),i+=n.replace(/(?=(?:\d{3})+$)(?!^)/g,","),(r=e.toString()).length>n.length&&(i+=r.slice(n.length)),i):"-"},e.pad2=function(t){return(t<10?"0":"")+t},e.Grid=function(n){function i(e){this.resizeHandler=o(this.resizeHandler,this);var n=this;if("string"==typeof e.element?this.el=t(document.getElementById(e.element)):this.el=t(e.element),null==this.el||0===this.el.length)throw new Error("Graph container element not found");"static"===this.el.css("position")&&this.el.css("position","relative"),this.options=t.extend({},this.gridDefaults,this.defaults||{},e),"string"==typeof this.options.units&&(this.options.postUnits=e.units),this.raphael=new Raphael(this.el[0]),this.elementWidth=null,this.elementHeight=null,this.dirty=!1,this.selectFrom=null,this.init&&this.init(),this.setData(this.options.data),this.el.bind("mousemove",function(t){var e,i,r,o,a;return i=n.el.offset(),a=t.pageX-i.left,n.selectFrom?(e=n.data[n.hitTest(Math.min(a,n.selectFrom))]._x,r=n.data[n.hitTest(Math.max(a,n.selectFrom))]._x,o=r-e,n.selectionRect.attr({x:e,width:o})):n.fire("hovermove",a,t.pageY-i.top)}),this.el.bind("mouseleave",function(){return n.selectFrom&&(n.selectionRect.hide(),n.selectFrom=null),n.fire("hoverout")}),this.el.bind("touchstart touchmove touchend",function(t){var e,i;return i=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],e=n.el.offset(),n.fire("hovermove",i.pageX-e.left,i.pageY-e.top)}),this.el.bind("click",function(t){var e;return e=n.el.offset(),n.fire("gridclick",t.pageX-e.left,t.pageY-e.top)}),this.options.rangeSelect&&(this.selectionRect=this.raphael.rect(0,0,0,this.el.innerHeight()).attr({fill:this.options.rangeSelectColor,stroke:!1}).toBack().hide(),this.el.bind("mousedown",function(t){var e;return e=n.el.offset(),n.startRange(t.pageX-e.left)}),this.el.bind("mouseup",function(t){var e;return e=n.el.offset(),n.endRange(t.pageX-e.left),n.fire("hovermove",t.pageX-e.left,t.pageY-e.top)})),this.options.resize&&t(window).bind("resize",function(){return null!=n.timeoutId&&window.clearTimeout(n.timeoutId),n.timeoutId=window.setTimeout(n.resizeHandler,100)}),this.el.css("-webkit-tap-highlight-color","rgba(0,0,0,0)"),this.postInit&&this.postInit()}return s(i,n),i.prototype.gridDefaults={dateFormat:null,axes:!0,grid:!0,gridLineColor:"#aaa",gridStrokeWidth:.5,gridTextColor:"#888",gridTextSize:12,gridTextFamily:"sans-serif",gridTextWeight:"normal",hideHover:!1,yLabelFormat:null,xLabelAngle:0,numLines:5,padding:25,parseTime:!0,postUnits:"",preUnits:"",ymax:"auto",ymin:"auto 0",goals:[],goalStrokeWidth:1,goalLineColors:["#666633","#999966","#cc6666","#663333"],events:[],eventStrokeWidth:1,eventLineColors:["#005a04","#ccffbb","#3a5f0b","#005502"],rangeSelect:null,rangeSelectColor:"#eef",resize:!1},i.prototype.setData=function(t,n){var i,r,o,a,s,l,h,u,c,f,p,d,g,v,y;return null==n&&(n=!0),this.options.data=t,null==t||0===t.length?(this.data=[],this.raphael.clear(),void(null!=this.hover&&this.hover.hide())):(d=this.cumulative?0:null,g=this.cumulative?0:null,this.options.goals.length>0&&(s=Math.min.apply(Math,this.options.goals),a=Math.max.apply(Math,this.options.goals),g=null!=g?Math.min(g,s):s,d=null!=d?Math.max(d,a):a),this.data=function(){var n,i,a;for(a=[],o=n=0,i=t.length;n<i;o=++n)h=t[o],(l={src:h}).label=h[this.options.xkey],this.options.parseTime?(l.x=e.parseDate(l.label),this.options.dateFormat?l.label=this.options.dateFormat(l.x):"number"==typeof l.label&&(l.label=new Date(l.label).toString())):(l.x=o,this.options.xLabelFormat&&(l.label=this.options.xLabelFormat(l))),c=0,l.y=function(){var t,e,n,i;for(n=this.options.ykeys,i=[],r=t=0,e=n.length;t<e;r=++t)p=n[r],"string"==typeof(v=h[p])&&(v=parseFloat(v)),null!=v&&"number"!=typeof v&&(v=null),null!=v&&(this.cumulative?c+=v:null!=d?(d=Math.max(v,d),g=Math.min(v,g)):d=g=v),this.cumulative&&null!=c&&(d=Math.max(c,d),g=Math.min(c,g)),i.push(v);return i}.call(this),a.push(l);return a}.call(this),this.options.parseTime&&(this.data=this.data.sort(function(t,e){return(t.x>e.x)-(e.x>t.x)})),this.xmin=this.data[0].x,this.xmax=this.data[this.data.length-1].x,this.events=[],this.options.events.length>0&&(this.options.parseTime?this.events=function(){var t,n,r,o;for(o=[],t=0,n=(r=this.options.events).length;t<n;t++)i=r[t],o.push(e.parseDate(i));return o}.call(this):this.events=this.options.events,this.xmax=Math.max(this.xmax,Math.max.apply(Math,this.events)),this.xmin=Math.min(this.xmin,Math.min.apply(Math,this.events))),this.xmin===this.xmax&&(this.xmin-=1,this.xmax+=1),this.ymin=this.yboundary("min",g),this.ymax=this.yboundary("max",d),this.ymin===this.ymax&&(g&&(this.ymin-=1),this.ymax+=1),!0!==(y=this.options.axes)&&"both"!==y&&"y"!==y&&!0!==this.options.grid||(this.options.ymax===this.gridDefaults.ymax&&this.options.ymin===this.gridDefaults.ymin?(this.grid=this.autoGridLines(this.ymin,this.ymax,this.options.numLines),this.ymin=Math.min(this.ymin,this.grid[0]),this.ymax=Math.max(this.ymax,this.grid[this.grid.length-1])):(u=(this.ymax-this.ymin)/(this.options.numLines-1),this.grid=function(){var t,e,n;for(n=[],f=t=this.ymin,e=this.ymax;u>0?t<=e:t>=e;f=t+=u)n.push(f);return n}.call(this))),this.dirty=!0,n?this.redraw():void 0)},i.prototype.yboundary=function(t,e){var n,i;return"string"==typeof(n=this.options["y"+t])?"auto"===n.slice(0,4)?n.length>5?(i=parseInt(n.slice(5),10),null==e?i:Math[t](e,i)):null!=e?e:0:parseInt(n,10):n},i.prototype.autoGridLines=function(t,e,n){var i,r,o,a,s,l,h,u,c;return s=e-t,c=Math.floor(Math.log(s)/Math.log(10)),h=Math.pow(10,c),r=Math.floor(t/h)*h,i=Math.ceil(e/h)*h,l=(i-r)/(n-1),1===h&&l>1&&Math.ceil(l)!==l&&(l=Math.ceil(l),i=r+l*(n-1)),r<0&&i>0&&(r=Math.floor(t/l)*l,i=Math.ceil(e/l)*l),l<1?(a=Math.floor(Math.log(l)/Math.log(10)),o=function(){var t,e;for(e=[],u=t=r;l>0?t<=i:t>=i;u=t+=l)e.push(parseFloat(u.toFixed(1-a)));return e}()):o=function(){var t,e;for(e=[],u=t=r;l>0?t<=i:t>=i;u=t+=l)e.push(u);return e}(),o},i.prototype._calc=function(){var t,e,n,i,r,o,a,s;if(r=this.el.width(),n=this.el.height(),(this.elementWidth!==r||this.elementHeight!==n||this.dirty)&&(this.elementWidth=r,this.elementHeight=n,this.dirty=!1,this.left=this.options.padding,this.right=this.elementWidth-this.options.padding,this.top=this.options.padding,this.bottom=this.elementHeight-this.options.padding,!0!==(a=this.options.axes)&&"both"!==a&&"y"!==a||(o=function(){var t,n,i,r;for(r=[],t=0,n=(i=this.grid).length;t<n;t++)e=i[t],r.push(this.measureText(this.yAxisFormat(e)).width);return r}.call(this),this.left+=Math.max.apply(Math,o)),!0!==(s=this.options.axes)&&"both"!==s&&"x"!==s||(t=function(){var t,e,n;for(n=[],i=t=0,e=this.data.length;0<=e?t<e:t>e;i=0<=e?++t:--t)n.push(this.measureText(this.data[i].text,-this.options.xLabelAngle).height);return n}.call(this),this.bottom-=Math.max.apply(Math,t)),this.width=Math.max(1,this.right-this.left),this.height=Math.max(1,this.bottom-this.top),this.dx=this.width/(this.xmax-this.xmin),this.dy=this.height/(this.ymax-this.ymin),this.calc))return this.calc()},i.prototype.transY=function(t){return this.bottom-(t-this.ymin)*this.dy},i.prototype.transX=function(t){return 1===this.data.length?(this.left+this.right)/2:this.left+(t-this.xmin)*this.dx},i.prototype.redraw=function(){if(this.raphael.clear(),this._calc(),this.drawGrid(),this.drawGoals(),this.drawEvents(),this.draw)return this.draw()},i.prototype.measureText=function(t,e){var n,i;return null==e&&(e=0),i=this.raphael.text(100,100,t).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).rotate(e),n=i.getBBox(),i.remove(),n},i.prototype.yAxisFormat=function(t){return this.yLabelFormat(t)},i.prototype.yLabelFormat=function(t){return"function"==typeof this.options.yLabelFormat?this.options.yLabelFormat(t):""+this.options.preUnits+e.commas(t)+this.options.postUnits},i.prototype.drawGrid=function(){var t,e,n,i,r,o,a,s;if(!1!==this.options.grid||!0===(r=this.options.axes)||"both"===r||"y"===r){for(s=[],n=0,i=(o=this.grid).length;n<i;n++)t=o[n],e=this.transY(t),!0!==(a=this.options.axes)&&"both"!==a&&"y"!==a||this.drawYAxisLabel(this.left-this.options.padding/2,e,this.yAxisFormat(t)),this.options.grid?s.push(this.drawGridLine("M"+this.left+","+e+"H"+(this.left+this.width))):s.push(void 0);return s}},i.prototype.drawGoals=function(){var t,e,n,i,r,o,a;for(a=[],n=i=0,r=(o=this.options.goals).length;i<r;n=++i)e=o[n],t=this.options.goalLineColors[n%this.options.goalLineColors.length],a.push(this.drawGoal(e,t));return a},i.prototype.drawEvents=function(){var t,e,n,i,r,o,a;for(a=[],n=i=0,r=(o=this.events).length;i<r;n=++i)e=o[n],t=this.options.eventLineColors[n%this.options.eventLineColors.length],a.push(this.drawEvent(e,t));return a},i.prototype.drawGoal=function(t,e){return this.raphael.path("M"+this.left+","+this.transY(t)+"H"+this.right).attr("stroke",e).attr("stroke-width",this.options.goalStrokeWidth)},i.prototype.drawEvent=function(t,e){return this.raphael.path("M"+this.transX(t)+","+this.bottom+"V"+this.top).attr("stroke",e).attr("stroke-width",this.options.eventStrokeWidth)},i.prototype.drawYAxisLabel=function(t,e,n){return this.raphael.text(t,e,n).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor).attr("text-anchor","end")},i.prototype.drawGridLine=function(t){return this.raphael.path(t).attr("stroke",this.options.gridLineColor).attr("stroke-width",this.options.gridStrokeWidth)},i.prototype.startRange=function(t){return this.hover.hide(),this.selectFrom=t,this.selectionRect.attr({x:t,width:0}).show()},i.prototype.endRange=function(t){var e,n;if(this.selectFrom)return n=Math.min(this.selectFrom,t),e=Math.max(this.selectFrom,t),this.options.rangeSelect.call(this.el,{start:this.data[this.hitTest(n)].x,end:this.data[this.hitTest(e)].x}),this.selectFrom=null},i.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},i}(e.EventEmitter),e.parseDate=function(t){var e,n,i,r,o,a,s,l,h,u,c;return"number"==typeof t?t:(n=t.match(/^(\d+) Q(\d)$/),r=t.match(/^(\d+)-(\d+)$/),o=t.match(/^(\d+)-(\d+)-(\d+)$/),s=t.match(/^(\d+) W(\d+)$/),l=t.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/),h=t.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/),n?new Date(parseInt(n[1],10),3*parseInt(n[2],10)-1,1).getTime():r?new Date(parseInt(r[1],10),parseInt(r[2],10)-1,1).getTime():o?new Date(parseInt(o[1],10),parseInt(o[2],10)-1,parseInt(o[3],10)).getTime():s?(4!==(u=new Date(parseInt(s[1],10),0,1)).getDay()&&u.setMonth(0,1+(4-u.getDay()+7)%7),u.getTime()+6048e5*parseInt(s[2],10)):l?l[6]?(a=0,"Z"!==l[6]&&(a=60*parseInt(l[8],10)+parseInt(l[9],10),"+"===l[7]&&(a=0-a)),Date.UTC(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10)+a)):new Date(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10)).getTime():h?(c=parseFloat(h[6]),e=Math.floor(c),i=Math.round(1e3*(c-e)),h[8]?(a=0,"Z"!==h[8]&&(a=60*parseInt(h[10],10)+parseInt(h[11],10),"+"===h[9]&&(a=0-a)),Date.UTC(parseInt(h[1],10),parseInt(h[2],10)-1,parseInt(h[3],10),parseInt(h[4],10),parseInt(h[5],10)+a,e,i)):new Date(parseInt(h[1],10),parseInt(h[2],10)-1,parseInt(h[3],10),parseInt(h[4],10),parseInt(h[5],10),e,i).getTime()):new Date(parseInt(t,10),0,1).getTime())},e.Hover=function(){function n(n){null==n&&(n={}),this.options=t.extend({},e.Hover.defaults,n),this.el=t("<div class='"+this.options["class"]+"'></div>"),this.el.hide(),this.options.parent.append(this.el)}return n.defaults={"class":"morris-hover morris-default-style"},n.prototype.update=function(t,e,n){return t?(this.html(t),this.show(),this.moveTo(e,n)):this.hide()},n.prototype.html=function(t){return this.el.html(t)},n.prototype.moveTo=function(t,e){var n,i,r,o,a,s;return a=this.options.parent.innerWidth(),o=this.options.parent.innerHeight(),i=this.el.outerWidth(),n=this.el.outerHeight(),r=Math.min(Math.max(0,t-i/2),a-i),null!=e?(s=e-n-10)<0&&(s=e+10)+n>o&&(s=o/2-n/2):s=o/2-n/2,this.el.css({left:r+"px",top:parseInt(s)+"px"})},n.prototype.show=function(){return this.el.show()},n.prototype.hide=function(){return this.el.hide()},n}(),e.Line=function(t){function n(t){if(this.hilight=o(this.hilight,this),this.onHoverOut=o(this.onHoverOut,this),this.onHoverMove=o(this.onHoverMove,this),this.onGridClick=o(this.onGridClick,this),!(this instanceof e.Line))return new e.Line(t);n.__super__.constructor.call(this,t)}return s(n,t),n.prototype.init=function(){if("always"!==this.options.hideHover)return this.hover=new e.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)},n.prototype.defaults={lineWidth:3,pointSize:4,lineColors:["#0b62a4","#7A92A3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],pointStrokeWidths:[1],pointStrokeColors:["#ffffff"],pointFillColors:[],smooth:!0,xLabels:"auto",xLabelFormat:null,xLabelMargin:24,hideHover:!1},n.prototype.calc=function(){return this.calcPoints(),this.generatePaths()},n.prototype.calcPoints=function(){var t,e,n,i,r,o;for(o=[],n=0,i=(r=this.data).length;n<i;n++)(t=r[n])._x=this.transX(t.x),t._y=function(){var n,i,r,o;for(o=[],n=0,i=(r=t.y).length;n<i;n++)null!=(e=r[n])?o.push(this.transY(e)):o.push(e);return o}.call(this),o.push(t._ymax=Math.min.apply(Math,[this.bottom].concat(function(){var n,i,r,o;for(o=[],n=0,i=(r=t._y).length;n<i;n++)null!=(e=r[n])&&o.push(e);return o}())));return o},n.prototype.hitTest=function(t){var e,n,i,r,o;if(0===this.data.length)return null;for(e=i=0,r=(o=this.data.slice(1)).length;i<r&&(n=o[e],!(t<(n._x+this.data[e]._x)/2));e=++i);return e},n.prototype.onGridClick=function(t,e){var n;return n=this.hitTest(t),this.fire("click",n,this.data[n].src,t,e)},n.prototype.onHoverMove=function(t){var e;return e=this.hitTest(t),this.displayHoverForRow(e)},n.prototype.onHoverOut=function(){if(!1!==this.options.hideHover)return this.displayHoverForRow(null)},n.prototype.displayHoverForRow=function(t){var e;return null!=t?((e=this.hover).update.apply(e,this.hoverContentForRow(t)),this.hilight(t)):(this.hover.hide(),this.hilight())},n.prototype.hoverContentForRow=function(t){var e,n,i,r,o,a,s;for(e="<div class='morris-hover-row-label'>"+(i=this.data[t]).label+"</div>",n=o=0,a=(s=i.y).length;o<a;n=++o)r=s[n],e+="<div class='morris-hover-point' style='color: "+this.colorFor(i,n,"label")+"'>\n  "+this.options.labels[n]+":\n  "+this.yLabelFormat(r)+"\n</div>";return"function"==typeof this.options.hoverCallback&&(e=this.options.hoverCallback(t,this.options,e,i.src)),[e,i._x,i._ymax]},n.prototype.generatePaths=function(){var t,n,i,r;return this.paths=function(){var o,a,s,h;for(h=[],n=o=0,a=this.options.ykeys.length;0<=a?o<a:o>a;n=0<=a?++o:--o)r="boolean"==typeof this.options.smooth?this.options.smooth:(s=this.options.ykeys[n],l.call(this.options.smooth,s)>=0),(t=function(){var t,e,r,o;for(o=[],t=0,e=(r=this.data).length;t<e;t++)void 0!==(i=r[t])._y[n]&&o.push({x:i._x,y:i._y[n]});return o}.call(this)).length>1?h.push(e.Line.createPath(t,r,this.bottom)):h.push(null);return h}.call(this)},n.prototype.draw=function(){var t;if(!0!==(t=this.options.axes)&&"both"!==t&&"x"!==t||this.drawXAxis(),this.drawSeries(),!1===this.options.hideHover)return this.displayHoverForRow(this.data.length-1)},n.prototype.drawXAxis=function(){var t,n,i,r,o,a,s,l,h,u,c=this;for(s=this.bottom+this.options.padding/2,o=null,r=null,t=function(t,e){var n,i,a,l,h;return n=c.drawXAxisLabel(c.transX(e),s,t),h=n.getBBox(),n.transform("r"+-c.options.xLabelAngle),i=n.getBBox(),n.transform("t0,"+i.height/2+"..."),0!==c.options.xLabelAngle&&(l=-.5*h.width*Math.cos(c.options.xLabelAngle*Math.PI/180),n.transform("t"+l+",0...")),i=n.getBBox(),(null==o||o>=i.x+i.width||null!=r&&r>=i.x)&&i.x>=0&&i.x+i.width<c.el.width()?(0!==c.options.xLabelAngle&&(a=1.25*c.options.gridTextSize/Math.sin(c.options.xLabelAngle*Math.PI/180),r=i.x-a),o=i.x-c.options.xLabelMargin):n.remove()},(i=this.options.parseTime?1===this.data.length&&"auto"===this.options.xLabels?[[this.data[0].label,this.data[0].x]]:e.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat):function(){var t,e,n,i;for(i=[],t=0,e=(n=this.data).length;t<e;t++)a=n[t],i.push([a.label,a.x]);return i}.call(this)).reverse(),u=[],l=0,h=i.length;l<h;l++)n=i[l],u.push(t(n[0],n[1]));return u},n.prototype.drawSeries=function(){var t,e,n,i,r,o;for(this.seriesPoints=[],
t=e=i=this.options.ykeys.length-1;i<=0?e<=0:e>=0;t=i<=0?++e:--e)this._drawLineFor(t);for(o=[],t=n=r=this.options.ykeys.length-1;r<=0?n<=0:n>=0;t=r<=0?++n:--n)o.push(this._drawPointFor(t));return o},n.prototype._drawPointFor=function(t){var e,n,i,r,o,a;for(this.seriesPoints[t]=[],a=[],i=0,r=(o=this.data).length;i<r;i++)e=null,null!=(n=o[i])._y[t]&&(e=this.drawLinePoint(n._x,n._y[t],this.colorFor(n,t,"point"),t)),a.push(this.seriesPoints[t].push(e));return a},n.prototype._drawLineFor=function(t){var e;if(null!==(e=this.paths[t]))return this.drawLinePath(e,this.colorFor(null,t,"line"),t)},n.createPath=function(t,n,i){var r,o,a,s,l,h,u,c,f,p;for(u="",n&&(a=e.Line.gradients(t)),c={y:null},s=f=0,p=t.length;f<p;s=++f)null!=(r=t[s]).y&&(null!=c.y?n?(o=a[s],h=a[s-1],l=(r.x-c.x)/4,u+="C"+(c.x+l)+","+Math.min(i,c.y+l*h)+","+(r.x-l)+","+Math.min(i,r.y-l*o)+","+r.x+","+r.y):u+="L"+r.x+","+r.y:n&&null==a[s]||(u+="M"+r.x+","+r.y)),c=r;return u},n.gradients=function(t){var e,n,i,r,o,a,s,l;for(n=function(t,e){return(t.y-e.y)/(t.x-e.x)},l=[],i=a=0,s=t.length;a<s;i=++a)null!=(e=t[i]).y?(r=t[i+1]||{y:null},null!=(o=t[i-1]||{y:null}).y&&null!=r.y?l.push(n(o,r)):null!=o.y?l.push(n(o,e)):null!=r.y?l.push(n(e,r)):l.push(null)):l.push(null);return l},n.prototype.hilight=function(t){var e,n,i,r,o;if(null!==this.prevHilight&&this.prevHilight!==t)for(e=n=0,r=this.seriesPoints.length-1;0<=r?n<=r:n>=r;e=0<=r?++n:--n)this.seriesPoints[e][this.prevHilight]&&this.seriesPoints[e][this.prevHilight].animate(this.pointShrinkSeries(e));if(null!==t&&this.prevHilight!==t)for(e=i=0,o=this.seriesPoints.length-1;0<=o?i<=o:i>=o;e=0<=o?++i:--i)this.seriesPoints[e][t]&&this.seriesPoints[e][t].animate(this.pointGrowSeries(e));return this.prevHilight=t},n.prototype.colorFor=function(t,e,n){return"function"==typeof this.options.lineColors?this.options.lineColors.call(this,t,e,n):"point"===n?this.options.pointFillColors[e%this.options.pointFillColors.length]||this.options.lineColors[e%this.options.lineColors.length]:this.options.lineColors[e%this.options.lineColors.length]},n.prototype.drawXAxisLabel=function(t,e,n){return this.raphael.text(t,e,n).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},n.prototype.drawLinePath=function(t,e,n){return this.raphael.path(t).attr("stroke",e).attr("stroke-width",this.lineWidthForSeries(n))},n.prototype.drawLinePoint=function(t,e,n,i){return this.raphael.circle(t,e,this.pointSizeForSeries(i)).attr("fill",n).attr("stroke-width",this.pointStrokeWidthForSeries(i)).attr("stroke",this.pointStrokeColorForSeries(i))},n.prototype.pointStrokeWidthForSeries=function(t){return this.options.pointStrokeWidths[t%this.options.pointStrokeWidths.length]},n.prototype.pointStrokeColorForSeries=function(t){return this.options.pointStrokeColors[t%this.options.pointStrokeColors.length]},n.prototype.lineWidthForSeries=function(t){return this.options.lineWidth instanceof Array?this.options.lineWidth[t%this.options.lineWidth.length]:this.options.lineWidth},n.prototype.pointSizeForSeries=function(t){return this.options.pointSize instanceof Array?this.options.pointSize[t%this.options.pointSize.length]:this.options.pointSize},n.prototype.pointGrowSeries=function(t){return Raphael.animation({r:this.pointSizeForSeries(t)+3},25,"linear")},n.prototype.pointShrinkSeries=function(t){return Raphael.animation({r:this.pointSizeForSeries(t)},25,"linear")},n}(e.Grid),e.labelSeries=function(n,i,r,o,a){var s,l,h,u,c,f,p,d,g,v,y;if(h=200*(i-n)/r,l=new Date(n),void 0===(p=e.LABEL_SPECS[o]))for(g=0,v=(y=e.AUTO_LABEL_ORDER).length;g<v;g++)if(u=y[g],f=e.LABEL_SPECS[u],h>=f.span){p=f;break}for(void 0===p&&(p=e.LABEL_SPECS.second),a&&(p=t.extend({},p,{fmt:a})),s=p.start(l),c=[];(d=s.getTime())<=i;)d>=n&&c.push([p.fmt(s),d]),p.incr(s);return c},n=function(t){return{span:60*t*1e3,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours())},fmt:function(t){return e.pad2(t.getHours())+":"+e.pad2(t.getMinutes())},incr:function(e){return e.setUTCMinutes(e.getUTCMinutes()+t)}}},i=function(t){return{span:1e3*t,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes())},fmt:function(t){return e.pad2(t.getHours())+":"+e.pad2(t.getMinutes())+":"+e.pad2(t.getSeconds())},incr:function(e){return e.setUTCSeconds(e.getUTCSeconds()+t)}}},e.LABEL_SPECS={decade:{span:1728e8,start:function(t){return new Date(t.getFullYear()-t.getFullYear()%10,0,1)},fmt:function(t){return""+t.getFullYear()},incr:function(t){return t.setFullYear(t.getFullYear()+10)}},year:{span:1728e7,start:function(t){return new Date(t.getFullYear(),0,1)},fmt:function(t){return""+t.getFullYear()},incr:function(t){return t.setFullYear(t.getFullYear()+1)}},month:{span:24192e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),1)},fmt:function(t){return t.getFullYear()+"-"+e.pad2(t.getMonth()+1)},incr:function(t){return t.setMonth(t.getMonth()+1)}},week:{span:6048e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},fmt:function(t){return t.getFullYear()+"-"+e.pad2(t.getMonth()+1)+"-"+e.pad2(t.getDate())},incr:function(t){return t.setDate(t.getDate()+7)}},day:{span:864e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},fmt:function(t){return t.getFullYear()+"-"+e.pad2(t.getMonth()+1)+"-"+e.pad2(t.getDate())},incr:function(t){return t.setDate(t.getDate()+1)}},hour:n(60),"30min":n(30),"15min":n(15),"10min":n(10),"5min":n(5),minute:n(1),"30sec":i(30),"15sec":i(15),"10sec":i(10),"5sec":i(5),second:i(1)},e.AUTO_LABEL_ORDER=["decade","year","month","week","day","hour","30min","15min","10min","5min","minute","30sec","15sec","10sec","5sec","second"],e.Area=function(n){function i(n){var o;if(!(this instanceof e.Area))return new e.Area(n);o=t.extend({},r,n),this.cumulative=!o.behaveLikeLine,"auto"===o.fillOpacity&&(o.fillOpacity=o.behaveLikeLine?.8:1),i.__super__.constructor.call(this,o)}var r;return s(i,n),r={fillOpacity:"auto",behaveLikeLine:!1},i.prototype.calcPoints=function(){var t,e,n,i,r,o,a;for(a=[],i=0,r=(o=this.data).length;i<r;i++)(t=o[i])._x=this.transX(t.x),e=0,t._y=function(){var i,r,o,a;for(a=[],i=0,r=(o=t.y).length;i<r;i++)n=o[i],this.options.behaveLikeLine?a.push(this.transY(n)):(e+=n||0,a.push(this.transY(e)));return a}.call(this),a.push(t._ymax=Math.max.apply(Math,t._y));return a},i.prototype.drawSeries=function(){var t,e,n,i,r,o,a,s;for(this.seriesPoints=[],s=[],n=0,i=(e=this.options.behaveLikeLine?function(){o=[];for(var t=0,e=this.options.ykeys.length-1;0<=e?t<=e:t>=e;0<=e?t++:t--)o.push(t);return o}.apply(this):function(){a=[];for(var t=r=this.options.ykeys.length-1;r<=0?t<=0:t>=0;r<=0?t++:t--)a.push(t);return a}.apply(this)).length;n<i;n++)t=e[n],this._drawFillFor(t),this._drawLineFor(t),s.push(this._drawPointFor(t));return s},i.prototype._drawFillFor=function(t){var e;if(null!==(e=this.paths[t]))return e=e+"L"+this.transX(this.xmax)+","+this.bottom+"L"+this.transX(this.xmin)+","+this.bottom+"Z",this.drawFilledPath(e,this.fillForSeries(t))},i.prototype.fillForSeries=function(t){var e;return e=Raphael.rgb2hsl(this.colorFor(this.data[t],t,"line")),Raphael.hsl(e.h,this.options.behaveLikeLine?.9*e.s:.75*e.s,Math.min(.98,this.options.behaveLikeLine?1.2*e.l:1.25*e.l))},i.prototype.drawFilledPath=function(t,e){return this.raphael.path(t).attr("fill",e).attr("fill-opacity",this.options.fillOpacity).attr("stroke","none")},i}(e.Line),e.Bar=function(n){function i(n){if(this.onHoverOut=o(this.onHoverOut,this),this.onHoverMove=o(this.onHoverMove,this),this.onGridClick=o(this.onGridClick,this),!(this instanceof e.Bar))return new e.Bar(n);i.__super__.constructor.call(this,t.extend({},n,{parseTime:!1}))}return s(i,n),i.prototype.init=function(){if(this.cumulative=this.options.stacked,"always"!==this.options.hideHover)return this.hover=new e.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)},i.prototype.defaults={barSizeRatio:.75,barGap:3,barColors:["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],barOpacity:1,barRadius:[0,0,0,0],xLabelMargin:50},i.prototype.calc=function(){var t;if(this.calcBars(),!1===this.options.hideHover)return(t=this.hover).update.apply(t,this.hoverContentForRow(this.data.length-1))},i.prototype.calcBars=function(){var t,e,n,i,r,o,a;for(a=[],t=i=0,r=(o=this.data).length;i<r;t=++i)(e=o[t])._x=this.left+this.width*(t+.5)/this.data.length,a.push(e._y=function(){var t,i,r,o;for(o=[],t=0,i=(r=e.y).length;t<i;t++)null!=(n=r[t])?o.push(this.transY(n)):o.push(null);return o}.call(this));return a},i.prototype.draw=function(){var t;return!0!==(t=this.options.axes)&&"both"!==t&&"x"!==t||this.drawXAxis(),this.drawSeries()},i.prototype.drawXAxis=function(){var t,e,n,i,r,o,a,s,l,h,u,c,f;for(h=this.bottom+(this.options.xAxisLabelTopPadding||this.options.padding/2),a=null,o=null,f=[],t=u=0,c=this.data.length;0<=c?u<c:u>c;t=0<=c?++u:--u)s=this.data[this.data.length-1-t],l=(e=this.drawXAxisLabel(s._x,h,s.label)).getBBox(),e.transform("r"+-this.options.xLabelAngle),n=e.getBBox(),e.transform("t0,"+n.height/2+"..."),0!==this.options.xLabelAngle&&(r=-.5*l.width*Math.cos(this.options.xLabelAngle*Math.PI/180),e.transform("t"+r+",0...")),(null==a||a>=n.x+n.width||null!=o&&o>=n.x)&&n.x>=0&&n.x+n.width<this.el.width()?(0!==this.options.xLabelAngle&&(i=1.25*this.options.gridTextSize/Math.sin(this.options.xLabelAngle*Math.PI/180),o=n.x-i),f.push(a=n.x-this.options.xLabelMargin)):f.push(e.remove());return f},i.prototype.drawSeries=function(){var t,e,n,i,r,o,a,s,l,h,u,c,f,p,d;return n=this.width/this.options.data.length,s=this.options.stacked?1:this.options.ykeys.length,t=(n*this.options.barSizeRatio-this.options.barGap*(s-1))/s,this.options.barSize&&(t=Math.min(t,this.options.barSize)),c=n-t*s-this.options.barGap*(s-1),a=c/2,d=this.ymin<=0&&this.ymax>=0?this.transY(0):null,this.bars=function(){var s,c,g,v;for(g=this.data,v=[],i=s=0,c=g.length;s<c;i=++s)l=g[i],r=0,v.push(function(){var s,c,g,v;for(g=l._y,v=[],h=s=0,c=g.length;s<c;h=++s)null!==(p=g[h])?(d?(f=Math.min(p,d),e=Math.max(p,d)):(f=p,e=this.bottom),o=this.left+i*n+a,this.options.stacked||(o+=h*(t+this.options.barGap)),u=e-f,this.options.verticalGridCondition&&this.options.verticalGridCondition(l.x)&&this.drawBar(this.left+i*n,this.top,n,Math.abs(this.top-this.bottom),this.options.verticalGridColor,this.options.verticalGridOpacity,this.options.barRadius),this.options.stacked&&(f-=r),this.drawBar(o,f,t,u,this.colorFor(l,h,"bar"),this.options.barOpacity,this.options.barRadius),v.push(r+=u)):v.push(null);return v}.call(this));return v}.call(this)},i.prototype.colorFor=function(t,e,n){var i,r;return"function"==typeof this.options.barColors?(i={x:t.x,y:t.y[e],label:t.label},r={index:e,key:this.options.ykeys[e],label:this.options.labels[e]},this.options.barColors.call(this,i,r,n)):this.options.barColors[e%this.options.barColors.length]},i.prototype.hitTest=function(t){return 0===this.data.length?null:(t=Math.max(Math.min(t,this.right),this.left),Math.min(this.data.length-1,Math.floor((t-this.left)/(this.width/this.data.length))))},i.prototype.onGridClick=function(t,e){var n;return n=this.hitTest(t),this.fire("click",n,this.data[n].src,t,e)},i.prototype.onHoverMove=function(t){var e,n;return e=this.hitTest(t),(n=this.hover).update.apply(n,this.hoverContentForRow(e))},i.prototype.onHoverOut=function(){if(!1!==this.options.hideHover)return this.hover.hide()},i.prototype.hoverContentForRow=function(t){var e,n,i,r,o,a,s,l;for(e="<div class='morris-hover-row-label'>"+(i=this.data[t]).label+"</div>",n=a=0,s=(l=i.y).length;a<s;n=++a)o=l[n],e+="<div class='morris-hover-point' style='color: "+this.colorFor(i,n,"label")+"'>\n  "+this.options.labels[n]+":\n  "+this.yLabelFormat(o)+"\n</div>";return"function"==typeof this.options.hoverCallback&&(e=this.options.hoverCallback(t,this.options,e,i.src)),r=this.left+(t+.5)*this.width/this.data.length,[e,r]},i.prototype.drawXAxisLabel=function(t,e,n){return this.raphael.text(t,e,n).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},i.prototype.drawBar=function(t,e,n,i,r,o,a){var s;return s=Math.max.apply(Math,a),(0===s||s>i?this.raphael.rect(t,e,n,i):this.raphael.path(this.roundedRect(t,e,n,i,a))).attr("fill",r).attr("fill-opacity",o).attr("stroke","none")},i.prototype.roundedRect=function(t,e,n,i,r){return null==r&&(r=[0,0,0,0]),["M",t,r[0]+e,"Q",t,e,t+r[0],e,"L",t+n-r[1],e,"Q",t+n,e,t+n,e+r[1],"L",t+n,e+i-r[2],"Q",t+n,e+i,t+n-r[2],e+i,"L",t+r[3],e+i,"Q",t,e+i,t,e+i-r[3],"Z"]},i}(e.Grid),e.Donut=function(n){function i(n){this.resizeHandler=o(this.resizeHandler,this),this.select=o(this.select,this),this.click=o(this.click,this);var i=this;if(!(this instanceof e.Donut))return new e.Donut(n);if(this.options=t.extend({},this.defaults,n),"string"==typeof n.element?this.el=t(document.getElementById(n.element)):this.el=t(n.element),null===this.el||0===this.el.length)throw new Error("Graph placeholder not found.");void 0!==n.data&&0!==n.data.length&&(this.raphael=new Raphael(this.el[0]),this.options.resize&&t(window).bind("resize",function(){return null!=i.timeoutId&&window.clearTimeout(i.timeoutId),i.timeoutId=window.setTimeout(i.resizeHandler,100)}),this.setData(n.data))}return s(i,n),i.prototype.defaults={colors:["#0B62A4","#3980B5","#679DC6","#95BBD7","#B0CCE1","#095791","#095085","#083E67","#052C48","#042135"],backgroundColor:"#FFFFFF",labelColor:"#000000",formatter:e.commas,resize:!1},i.prototype.redraw=function(){var t,n,i,r,o,a,s,l,h,u,c,f,p,d,g,v,y,m,x,b,w,_;for(this.raphael.clear(),n=this.el.width()/2,i=this.el.height()/2,f=(Math.min(n,i)-10)/3,c=0,p=0,v=(x=this.values).length;p<v;p++)c+=x[p];for(l=5/(2*f),t=1.9999*Math.PI-l*this.data.length,a=0,o=0,this.segments=[],r=d=0,y=(b=this.values).length;d<y;r=++d)h=a+l+t*(b[r]/c),(u=new e.DonutSegment(n,i,2*f,f,a,h,this.data[r].color||this.options.colors[o%this.options.colors.length],this.options.backgroundColor,o,this.raphael)).render(),this.segments.push(u),u.on("hover",this.select),u.on("click",this.click),a=h,o+=1;for(this.text1=this.drawEmptyDonutLabel(n,i-10,this.options.labelColor,15,800),this.text2=this.drawEmptyDonutLabel(n,i+10,this.options.labelColor,14),s=Math.max.apply(Math,this.values),o=0,_=[],g=0,m=(w=this.values).length;g<m;g++){if(w[g]===s){this.select(o);break}_.push(o+=1)}return _},i.prototype.setData=function(t){var e;return this.data=t,this.values=function(){var t,n,i,r;for(r=[],t=0,n=(i=this.data).length;t<n;t++)e=i[t],r.push(parseFloat(e.value));return r}.call(this),this.redraw()},i.prototype.click=function(t){return this.fire("click",t,this.data[t])},i.prototype.select=function(t){var e,n,i,r;for(n=0,i=(r=this.segments).length;n<i;n++)r[n].deselect();return this.segments[t].select(),e=this.data[t],this.setLabels(e.label,this.options.formatter(e.value,e))},i.prototype.setLabels=function(t,e){var n,i,r,o,a,s,l,h;return n=2*(Math.min(this.el.width()/2,this.el.height()/2)-10)/3,o=1.8*n,r=n/2,i=n/3,this.text1.attr({text:t,transform:""}),a=this.text1.getBBox(),s=Math.min(o/a.width,r/a.height),this.text1.attr({transform:"S"+s+","+s+","+(a.x+a.width/2)+","+(a.y+a.height)}),this.text2.attr({text:e,transform:""}),l=this.text2.getBBox(),h=Math.min(o/l.width,i/l.height),this.text2.attr({transform:"S"+h+","+h+","+(l.x+l.width/2)+","+l.y})},i.prototype.drawEmptyDonutLabel=function(t,e,n,i,r){var o;return o=this.raphael.text(t,e,"").attr("font-size",i).attr("fill",n),null!=r&&o.attr("font-weight",r),o},i.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},i}(e.EventEmitter),e.DonutSegment=function(t){function e(t,e,n,i,r,a,s,l,h,u){this.cx=t,this.cy=e,this.inner=n,this.outer=i,this.color=s,this.backgroundColor=l,this.index=h,this.raphael=u,this.deselect=o(this.deselect,this),this.select=o(this.select,this),this.sin_p0=Math.sin(r),this.cos_p0=Math.cos(r),this.sin_p1=Math.sin(a),this.cos_p1=Math.cos(a),this.is_long=a-r>Math.PI?1:0,this.path=this.calcSegment(this.inner+3,this.inner+this.outer-5),this.selectedPath=this.calcSegment(this.inner+3,this.inner+this.outer),this.hilight=this.calcArc(this.inner)}return s(e,t),e.prototype.calcArcPoints=function(t){return[this.cx+t*this.sin_p0,this.cy+t*this.cos_p0,this.cx+t*this.sin_p1,this.cy+t*this.cos_p1]},e.prototype.calcSegment=function(t,e){var n,i,r,o,a,s,l,h,u,c;return u=this.calcArcPoints(t),n=u[0],r=u[1],i=u[2],o=u[3],c=this.calcArcPoints(e),a=c[0],l=c[1],s=c[2],h=c[3],"M"+n+","+r+"A"+t+","+t+",0,"+this.is_long+",0,"+i+","+o+"L"+s+","+h+"A"+e+","+e+",0,"+this.is_long+",1,"+a+","+l+"Z"},e.prototype.calcArc=function(t){var e,n,i,r,o;return o=this.calcArcPoints(t),e=o[0],i=o[1],n=o[2],r=o[3],"M"+e+","+i+"A"+t+","+t+",0,"+this.is_long+",0,"+n+","+r},e.prototype.render=function(){var t=this;return this.arc=this.drawDonutArc(this.hilight,this.color),this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return t.fire("hover",t.index)},function(){return t.fire("click",t.index)})},e.prototype.drawDonutArc=function(t,e){return this.raphael.path(t).attr({stroke:e,"stroke-width":2,opacity:0})},e.prototype.drawDonutSegment=function(t,e,n,i,r){return this.raphael.path(t).attr({fill:e,stroke:n,"stroke-width":3}).hover(i).click(r)},e.prototype.select=function(){if(!this.selected)return this.seg.animate({path:this.selectedPath},150,"<>"),this.arc.animate({opacity:1},150,"<>"),this.selected=!0},e.prototype.deselect=function(){if(this.selected)return this.seg.animate({path:this.path},150,"<>"),this.arc.animate({opacity:0},150,"<>"),this.selected=!1},e}(e.EventEmitter)}.call(this),function(t){var e,n,i="0.3.4",r="hasOwnProperty",o=/[\.\/]/,a="*",s=function(){},l=function(t,e){return t-e},h={n:{}},u=function(t,i){var r,o=n,a=Array.prototype.slice.call(arguments,2),s=u.listeners(t),h=0,c=[],f={},p=[],d=e;e=t,n=0;for(var g=0,v=s.length;g<v;g++)"zIndex"in s[g]&&(c.push(s[g].zIndex),s[g].zIndex<0&&(f[s[g].zIndex]=s[g]));for(c.sort(l);c[h]<0;)if(r=f[c[h++]],p.push(r.apply(i,a)),n)return n=o,p;for(g=0;g<v;g++)if("zIndex"in(r=s[g]))if(r.zIndex==c[h]){if(p.push(r.apply(i,a)),n)break;do{if(h++,(r=f[c[h]])&&p.push(r.apply(i,a)),n)break}while(r)}else f[r.zIndex]=r;else if(p.push(r.apply(i,a)),n)break;return n=o,e=d,p.length?p:null};u.listeners=function(t){var e,n,i,r,s,l,u,c,f=t.split(o),p=h,d=[p],g=[];for(r=0,s=f.length;r<s;r++){for(c=[],l=0,u=d.length;l<u;l++)for(n=[(p=d[l].n)[f[r]],p[a]],i=2;i--;)(e=n[i])&&(c.push(e),g=g.concat(e.f||[]));d=c}return g},u.on=function(t,e){for(var n=t.split(o),i=h,r=0,a=n.length;r<a;r++)!(i=i.n)[n[r]]&&(i[n[r]]={n:{}}),i=i[n[r]];for(i.f=i.f||[],r=0,a=i.f.length;r<a;r++)if(i.f[r]==e)return s;return i.f.push(e),function(t){+t==+t&&(e.zIndex=+t)}},u.stop=function(){n=1},u.nt=function(t){return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},u.off=u.unbind=function(t,e){var n,i,s,l,u,c,f,p=t.split(o),d=[h];for(l=0,u=p.length;l<u;l++)for(c=0;c<d.length;c+=s.length-2){if(s=[c,1],n=d[c].n,p[l]!=a)n[p[l]]&&s.push(n[p[l]]);else for(i in n)n[r](i)&&s.push(n[i]);d.splice.apply(d,s)}for(l=0,u=d.length;l<u;l++)for(n=d[l];n.n;){if(e){if(n.f){for(c=0,f=n.f.length;c<f;c++)if(n.f[c]==e){n.f.splice(c,1);break}!n.f.length&&delete n.f}for(i in n.n)if(n.n[r](i)&&n.n[i].f){var g=n.n[i].f;for(c=0,f=g.length;c<f;c++)if(g[c]==e){g.splice(c,1);break}!g.length&&delete n.n[i].f}}else{delete n.f;for(i in n.n)n.n[r](i)&&n.n[i].f&&delete n.n[i].f}n=n.n}},u.once=function(t,e){var n=function(){var i=e.apply(this,arguments);return u.unbind(t,n),i};return u.on(t,n)},u.version=i,u.toString=function(){return"You are running Eve "+i},"undefined"!=typeof module&&module.exports?module.exports=u:"undefined"!=typeof define?define("eve",[],function(){return u}):t.eve=u}(this),function(){function t(t){for(var e=0;e<oe.length;e++)oe[e].el.paper==t&&oe.splice(e--,1)}function e(t,e,n,r,a,s){n=Q(n);var l,h,u,c,f,p,d=t.ms,g={},v={},m={};if(r)for(w=0,_=oe.length;w<_;w++){var x=oe[w];if(x.el.id==e.id&&x.anim==t){x.percent!=n?(oe.splice(w,1),u=1):h=x,e.attr(x.totalOrigin);break}}else r=+v;for(var w=0,_=t.percents.length;w<_;w++){if(t.percents[w]==n||t.percents[w]>r*t.top){n=t.percents[w],f=t.percents[w-1]||0,d=d/t.top*(n-f),c=t.percents[w+1],l=t.anim[n];break}r&&e.attr(t.anim[t.percents[w]])}if(l){if(h)h.initstatus=r,h.start=new Date-h.ms*r;else{for(var S in l)if(l[M](S)&&(et[M](S)||e.paper.customAttributes[M](S)))switch(g[S]=e.attr(S),null==g[S]&&(g[S]=tt[S]),v[S]=l[S],et[S]){case j:m[S]=(v[S]-g[S])/d;break;case"colour":g[S]=y.getRGB(g[S]);var C=y.getRGB(v[S]);m[S]={r:(C.r-g[S].r)/d,g:(C.g-g[S].g)/d,b:(C.b-g[S].b)/d};break;case"path":var k=zt(g[S],v[S]),A=k[1];for(g[S]=k[0],m[S]=[],w=0,_=g[S].length;w<_;w++){m[S][w]=[0];for(var T=1,R=g[S][w].length;T<R;T++)m[S][w][T]=(A[w][T]-g[S][w][T])/d}break;case"transform":var P=e._,z=Ht(P[S],v[S]);if(z)for(g[S]=z.from,v[S]=z.to,m[S]=[],m[S].real=!0,w=0,_=g[S].length;w<_;w++)for(m[S][w]=[g[S][w][0]],T=1,R=g[S][w].length;T<R;T++)m[S][w][T]=(v[S][w][T]-g[S][w][T])/d;else{var N=e.matrix||new o,B={_:{transform:P.transform},getBBox:function(){return e.getBBox(1)}};g[S]=[N.a,N.b,N.c,N.d,N.e,N.f],It(B,v[S]),v[S]=B._.transform,m[S]=[(B.matrix.a-N.a)/d,(B.matrix.b-N.b)/d,(B.matrix.c-N.c)/d,(B.matrix.d-N.d)/d,(B.matrix.e-N.e)/d,(B.matrix.f-N.f)/d]}break;case"csv":var I=F(l[S])[E](b),D=F(g[S])[E](b);if("clip-rect"==S)for(g[S]=D,m[S]=[],w=D.length;w--;)m[S][w]=(I[w]-g[S][w])/d;v[S]=I;break;default:for(I=[][L](l[S]),D=[][L](g[S]),m[S]=[],w=e.paper.customAttributes[S].length;w--;)m[S][w]=((I[w]||0)-(D[w]||0))/d}var H=l.easing,W=y.easing_formulas[H];if(!W)if((W=F(H).match($))&&5==W.length){var O=W;W=function(t){return i(t,+O[1],+O[2],+O[3],+O[4],d)}}else W=ct;if(p=l.start||t.start||+new Date,x={anim:t,percent:n,timestamp:p,start:p+(t.del||0),status:0,initstatus:r||0,stop:!1,ms:d,easing:W,from:g,diff:m,to:v,el:e,callback:l.callback,prev:f,next:c,repeat:s||t.times,origin:e.attr(),totalOrigin:a},oe.push(x),r&&!h&&!u&&(x.stop=!0,x.start=new Date-d*r,1==oe.length))return se();u&&(x.start=new Date-x.ms*r),1==oe.length&&ae(se)}eve("raphael.anim.start."+e.id,e,t)}}function n(t,e){var n=[],i={};if(this.ms=e,this.times=1,t){for(var r in t)t[M](r)&&(i[Q(r)]=t[r],n.push(Q(r)));n.sort(ht)}this.anim=i,this.top=n[n.length-1],this.percents=n}function i(t,e,n,i,r,o){function a(t,e){var n,i,r,o,a,s;for(r=t,s=0;s<8;s++){if(o=l(r)-t,W(o)<e)return r;if(a=(3*c*r+2*u)*r+h,W(a)<1e-6)break;r-=o/a}if(n=0,i=1,(r=t)<n)return n;if(r>i)return i;for(;n<i;){if(o=l(r),W(o-t)<e)return r;t>o?n=r:i=r,r=(i-n)/2+n}return r}function s(t,e){var n=a(t,e);return((d*n+p)*n+f)*n}function l(t){return((c*t+u)*t+h)*t}var h=3*e,u=3*(i-e)-h,c=1-h-u,f=3*n,p=3*(r-n)-f,d=1-f-p;return s(t,1/(200*o))}function r(){return this.x+P+this.y+P+this.width+" \xd7 "+this.height}function o(t,e,n,i,r,o){null!=t?(this.a=+t,this.b=+e,this.c=+n,this.d=+i,this.e=+r,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function a(t,e,n){t=y._path2curve(t),e=y._path2curve(e);for(var i,r,o,a,l,h,u,c,f,p,d=n?0:[],g=0,v=t.length;g<v;g++){var m=t[g];if("M"==m[0])i=l=m[1],r=h=m[2];else{"C"==m[0]?(f=[i,r].concat(m.slice(1)),i=f[6],r=f[7]):(f=[i,r,i,r,l,h,l,h],i=l,r=h);for(var x=0,b=e.length;x<b;x++){var w=e[x];if("M"==w[0])o=u=w[1],a=c=w[2];else{"C"==w[0]?(p=[o,a].concat(w.slice(1)),o=p[6],a=p[7]):(p=[o,a,o,a,u,c,u,c],o=u,a=c);var _=s(f,p,n);if(n)d+=_;else{for(var M=0,S=_.length;M<S;M++)_[M].segment1=g,_[M].segment2=x,_[M].bez1=f,_[M].bez2=p;d=d.concat(_)}}}}}return d}function s(t,e,n){var i=y.bezierBBox(t),r=y.bezierBBox(e);if(!y.isBBoxIntersect(i,r))return n?0:[];for(var o=~~(u.apply(0,t)/5),a=~~(u.apply(0,e)/5),s=[],h=[],c={},f=n?0:[],p=0;p<o+1;p++){var d=y.findDotsAtSegment.apply(y,t.concat(p/o));s.push({x:d.x,y:d.y,t:p/o})}for(p=0;p<a+1;p++)d=y.findDotsAtSegment.apply(y,e.concat(p/a)),h.push({x:d.x,y:d.y,t:p/a});for(p=0;p<o;p++)for(var g=0;g<a;g++){var v=s[p],m=s[p+1],x=h[g],b=h[g+1],w=W(m.x-v.x)<.001?"y":"x",_=W(b.x-x.x)<.001?"y":"x",M=l(v.x,v.y,m.x,m.y,x.x,x.y,b.x,b.y);if(M){if(c[M.x.toFixed(4)]==M.y.toFixed(4))continue;c[M.x.toFixed(4)]=M.y.toFixed(4);var S=v.t+W((M[w]-v[w])/(m[w]-v[w]))*(m.t-v.t),C=x.t+W((M[_]-x[_])/(b[_]-x[_]))*(b.t-x.t);S>=0&&S<=1&&C>=0&&C<=1&&(n?f++:f.push({x:M.x,y:M.y,t1:S,t2:C}))}}return f}function l(t,e,n,i,r,o,a,s){if(!(D(t,n)<H(r,a)||H(t,n)>D(r,a)||D(e,i)<H(o,s)||H(e,i)>D(o,s))){var l=(t*i-e*n)*(r-a)-(t-n)*(r*s-o*a),h=(t*i-e*n)*(o-s)-(e-i)*(r*s-o*a),u=(t-n)*(o-s)-(e-i)*(r-a);if(!u)return;var c=l/u,f=h/u,p=+c.toFixed(2),d=+f.toFixed(2);if(p<+H(t,n).toFixed(2)||p>+D(t,n).toFixed(2)||p<+H(r,a).toFixed(2)||p>+D(r,a).toFixed(2)||d<+H(e,i).toFixed(2)||d>+D(e,i).toFixed(2)||d<+H(o,s).toFixed(2)||d>+D(o,s).toFixed(2))return;return{x:c,y:f}}}function h(t,e,n,i,r,o,a,s,l){if(!(l<0||u(t,e,n,i,r,o,a,s)<l)){var h,c=1,f=c/2,p=c-f,d=.01;for(h=u(t,e,n,i,r,o,a,s,p);W(h-l)>d;)f/=2,p+=(h<l?1:-1)*f,h=u(t,e,n,i,r,o,a,s,p);return p}}function u(t,e,n,i,r,o,a,s,l){null==l&&(l=1);for(var h=(l=l>1?1:l<0?0:l)/2,u=12,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,g=0;g<u;g++){var v=h*f[g]+h,y=c(v,t,n,r,a),m=c(v,e,i,o,s),x=y*y+m*m;d+=p[g]*I.sqrt(x)}return h*d}function c(t,e,n,i,r){return t*(t*(-3*e+9*n-9*i+3*r)+6*e-12*n+6*i)-3*e+3*n}function f(t,e){for(var n=[],i=0,r=t.length;r-2*!e>i;i+=2){var o=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?r-4==i?o[3]={x:+t[0],y:+t[1]}:r-2==i&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[r-2],y:+t[r-1]}:r-4==i?o[3]=o[2]:i||(o[0]={x:+t[i],y:+t[i+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}function p(){return this.hex}function d(t,e,n){function i(){var r=Array.prototype.slice.call(arguments,0),o=r.join("?"),a=i.cache=i.cache||{},s=i.count=i.count||[];return a[M](o)?(g(s,o),n?n(a[o]):a[o]):(s.length>=1e3&&delete a[s.shift()],s.push(o),a[o]=t[A](e,r),n?n(a[o]):a[o])}return i}function g(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return t.push(t.splice(n,1)[0])}function v(t){if(Object(t)!==t)return t;var e=new t.constructor;for(var n in t)t[M](n)&&(e[n]=v(t[n]));return e}function y(t){if(y.is(t,"function"))return m?t():eve.on("raphael.DOMload",t);if(y.is(t,X))return y._engine.create[A](y,t.splice(0,3+y.is(t[0],j))).add(t);var e=Array.prototype.slice.call(arguments,0);if(y.is(e[e.length-1],"function")){var n=e.pop();return m?n.call(y._engine.create[A](y,e)):eve.on("raphael.DOMload",function(){n.call(y._engine.create[A](y,e))})}return y._engine.create[A](y,arguments)}y.version="2.1.0",y.eve=eve;var m,x,b=/[, ]+/,w={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},_=/\{(\d+)\}/g,M="hasOwnProperty",S={doc:document,win:window},C={was:Object.prototype[M].call(S.win,"Raphael"),is:S.win.Raphael},k=function(){this.ca=this.customAttributes={}},A="apply",L="concat",T="createTouch"in S.doc,R="",P=" ",F=String,E="split",z="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[E](P),N={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},B=F.prototype.toLowerCase,I=Math,D=I.max,H=I.min,W=I.abs,O=I.pow,q=I.PI,j="number",Y="string",X="array",V=Object.prototype.toString,U=(y._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),G={NaN:1,Infinity:1,"-Infinity":1},$=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Z=I.round,Q=parseFloat,K=parseInt,J=F.prototype.toUpperCase,tt=y._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},et=y._availableAnimAttrs={blur:j,"clip-rect":"csv",cx:j,cy:j,fill:"colour","fill-opacity":j,"font-size":j,height:j,opacity:j,path:"path",r:j,rx:j,ry:j,stroke:"colour","stroke-opacity":j,"stroke-width":j,transform:"transform",width:j,x:j,y:j},nt=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,it={hs:1,rg:1},rt=/,?([achlmqrstvxz]),?/gi,ot=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,at=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,st=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,lt=(y._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ht=function(t,e){return Q(t)-Q(e)},ut=function(){},ct=function(t){return t},ft=y._rectPath=function(t,e,n,i,r){return r?[["M",t+r,e],["l",n-2*r,0],["a",r,r,0,0,1,r,r],["l",0,i-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-n,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-i],["a",r,r,0,0,1,r,-r],["z"]]:[["M",t,e],["l",n,0],["l",0,i],["l",-n,0],["z"]]},pt=function(t,e,n,i){return null==i&&(i=n),[["M",t,e],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]]},dt=y._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return pt(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return pt(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return ft(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return ft(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return ft(e.x,e.y,e.width,e.height)}},gt=y.mapPath=function(t,e){if(!e)return t;var n,i,r,o,a,s,l;for(r=0,a=(t=zt(t)).length;r<a;r++)for(o=1,s=(l=t[r]).length;o<s;o+=2)n=e.x(l[o],l[o+1]),i=e.y(l[o],l[o+1]),l[o]=n,l[o+1]=i;return t};if(y._g=S,y.type=S.win.SVGAngle||S.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==y.type){var vt,yt=S.doc.createElement("div");if(yt.innerHTML='<v:shape adj="1"/>',vt=yt.firstChild,vt.style.behavior="url(#default#VML)",!vt||"object"!=typeof vt.adj)return y.type=R;yt=null}y.svg=!(y.vml="VML"==y.type),y._Paper=k,y.fn=x=k.prototype=y.prototype,y._id=0,y._oid=0,y.is=function(t,e){return"finite"==(e=B.call(e))?!G[M](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||V.call(t).slice(8,-1).toLowerCase()==e},y.angle=function(t,e,n,i,r,o){if(null==r){var a=t-n,s=e-i;return a||s?(180+180*I.atan2(-s,-a)/q+360)%360:0}return y.angle(t,e,r,o)-y.angle(n,i,r,o)},y.rad=function(t){return t%360*q/180},y.deg=function(t){return 180*t/q%360},
y.snapTo=function(t,e,n){if(n=y.is(n,"finite")?n:10,y.is(t,X)){for(var i=t.length;i--;)if(W(t[i]-e)<=n)return t[i]}else{var r=e%(t=+t);if(r<n)return e-r;if(r>t-n)return e-r+t}return e};y.createUUID=function(t,e){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e).toUpperCase()}}(/[xy]/g,function(t){var e=16*I.random()|0;return("x"==t?e:3&e|8).toString(16)});y.setWindow=function(t){eve("raphael.setWindow",y,S.win,t),S.win=t,S.doc=S.win.document,y._engine.initWin&&y._engine.initWin(S.win)};var mt=function(t){if(y.vml){var e,n=/^\s+|\s+$/g;try{var i=new ActiveXObject("htmlfile");i.write("<body>"),i.close(),e=i.body}catch(a){e=createPopup().document.body}var r=e.createTextRange();mt=d(function(t){try{e.style.color=F(t).replace(n,R);var o=r.queryCommandValue("ForeColor");return"#"+("000000"+(o=(255&o)<<16|65280&o|(16711680&o)>>>16).toString(16)).slice(-6)}catch(i){return"none"}})}else{var o=S.doc.createElement("i");o.title="Rapha\xebl Colour Picker",o.style.display="none",S.doc.body.appendChild(o),mt=d(function(t){return o.style.color=t,S.doc.defaultView.getComputedStyle(o,R).getPropertyValue("color")})}return mt(t)},xt=function(){return"hsb("+[this.h,this.s,this.b]+")"},bt=function(){return"hsl("+[this.h,this.s,this.l]+")"},wt=function(){return this.hex},_t=function(t,e,n){if(null==e&&y.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(n=t.b,e=t.g,t=t.r),null==e&&y.is(t,Y)){var i=y.getRGB(t);t=i.r,e=i.g,n=i.b}return(t>1||e>1||n>1)&&(t/=255,e/=255,n/=255),[t,e,n]},Mt=function(t,e,n,i){var r={r:t*=255,g:e*=255,b:n*=255,hex:y.rgb(t,e,n),toString:wt};return y.is(i,"finite")&&(r.opacity=i),r};y.color=function(t){var e;return y.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=y.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):y.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=y.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):(y.is(t,"string")&&(t=y.getRGB(t)),y.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(e=y.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=y.rgb2hsb(t),t.v=e.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=wt,t},y.hsb2rgb=function(t,e,n,i){this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(n=t.b,e=t.s,t=t.h,i=t.o);var r,o,a,s,l;return t=(t*=360)%360/60,l=n*e,s=l*(1-W(t%2-1)),r=o=a=n-l,t=~~t,r+=[l,s,0,0,s,l][t],o+=[s,l,l,s,0,0][t],a+=[0,0,s,l,l,s][t],Mt(r,o,a,i)},y.hsl2rgb=function(t,e,n,i){this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(n=t.l,e=t.s,t=t.h),(t>1||e>1||n>1)&&(t/=360,e/=100,n/=100);var r,o,a,s,l;return t=(t*=360)%360/60,l=2*e*(n<.5?n:1-n),s=l*(1-W(t%2-1)),r=o=a=n-l/2,t=~~t,r+=[l,s,0,0,s,l][t],o+=[s,l,l,s,0,0][t],a+=[0,0,s,l,l,s][t],Mt(r,o,a,i)},y.rgb2hsb=function(t,e,n){t=(n=_t(t,e,n))[0],e=n[1],n=n[2];var i,r,o,a;return o=D(t,e,n),a=o-H(t,e,n),i=0==a?null:o==t?(e-n)/a:o==e?(n-t)/a+2:(t-e)/a+4,i=(i+360)%6*60/360,r=0==a?0:a/o,{h:i,s:r,b:o,toString:xt}},y.rgb2hsl=function(t,e,n){t=(n=_t(t,e,n))[0],e=n[1],n=n[2];var i,r,o,a,s,l;return a=D(t,e,n),s=H(t,e,n),l=a-s,i=0==l?null:a==t?(e-n)/l:a==e?(n-t)/l+2:(t-e)/l+4,i=(i+360)%6*60/360,o=(a+s)/2,r=0==l?0:o<.5?l/(2*o):l/(2-2*o),{h:i,s:r,l:o,toString:bt}},y._path2string=function(){return this.join(",").replace(rt,"$1")};y._preload=function(t,e){var n=S.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){e.call(this),this.onload=null,S.doc.body.removeChild(this)},n.onerror=function(){S.doc.body.removeChild(this)},S.doc.body.appendChild(n),n.src=t};y.getRGB=d(function(t){if(!t||(t=F(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:p};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:p};!it[M](t.toLowerCase().substring(0,2))&&"#"!=t.charAt()&&(t=mt(t));var e,n,i,r,o,a,s=t.match(U);return s?(s[2]&&(i=K(s[2].substring(5),16),n=K(s[2].substring(3,5),16),e=K(s[2].substring(1,3),16)),s[3]&&(i=K((o=s[3].charAt(3))+o,16),n=K((o=s[3].charAt(2))+o,16),e=K((o=s[3].charAt(1))+o,16)),s[4]&&(a=s[4][E](nt),e=Q(a[0]),"%"==a[0].slice(-1)&&(e*=2.55),n=Q(a[1]),"%"==a[1].slice(-1)&&(n*=2.55),i=Q(a[2]),"%"==a[2].slice(-1)&&(i*=2.55),"rgba"==s[1].toLowerCase().slice(0,4)&&(r=Q(a[3])),a[3]&&"%"==a[3].slice(-1)&&(r/=100)),s[5]?(a=s[5][E](nt),e=Q(a[0]),"%"==a[0].slice(-1)&&(e*=2.55),n=Q(a[1]),"%"==a[1].slice(-1)&&(n*=2.55),i=Q(a[2]),"%"==a[2].slice(-1)&&(i*=2.55),("deg"==a[0].slice(-3)||"\xb0"==a[0].slice(-1))&&(e/=360),"hsba"==s[1].toLowerCase().slice(0,4)&&(r=Q(a[3])),a[3]&&"%"==a[3].slice(-1)&&(r/=100),y.hsb2rgb(e,n,i,r)):s[6]?(a=s[6][E](nt),e=Q(a[0]),"%"==a[0].slice(-1)&&(e*=2.55),n=Q(a[1]),"%"==a[1].slice(-1)&&(n*=2.55),i=Q(a[2]),"%"==a[2].slice(-1)&&(i*=2.55),("deg"==a[0].slice(-3)||"\xb0"==a[0].slice(-1))&&(e/=360),"hsla"==s[1].toLowerCase().slice(0,4)&&(r=Q(a[3])),a[3]&&"%"==a[3].slice(-1)&&(r/=100),y.hsl2rgb(e,n,i,r)):(s={r:e,g:n,b:i,toString:p},s.hex="#"+(16777216|i|n<<8|e<<16).toString(16).slice(1),y.is(r,"finite")&&(s.opacity=r),s)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:p}},y),y.hsb=d(function(t,e,n){return y.hsb2rgb(t,e,n).hex}),y.hsl=d(function(t,e,n){return y.hsl2rgb(t,e,n).hex}),y.rgb=d(function(t,e,n){return"#"+(16777216|n|e<<8|t<<16).toString(16).slice(1)}),y.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},n=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),n.hex},y.getColor.reset=function(){delete this.start},y.parsePathString=function(t){if(!t)return null;var e=St(t);if(e.arr)return kt(e.arr);var n={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},i=[];return y.is(t,X)&&y.is(t[0],X)&&(i=kt(t)),i.length||F(t).replace(ot,function(t,e,r){var o=[],a=e.toLowerCase();if(r.replace(st,function(t,e){e&&o.push(+e)}),"m"==a&&o.length>2&&(i.push([e][L](o.splice(0,2))),a="l",e="m"==e?"l":"L"),"r"==a)i.push([e][L](o));else for(;o.length>=n[a]&&(i.push([e][L](o.splice(0,n[a]))),n[a]););}),i.toString=y._path2string,e.arr=kt(i),i},y.parseTransformString=d(function(t){if(!t)return null;var e=[];return y.is(t,X)&&y.is(t[0],X)&&(e=kt(t)),e.length||F(t).replace(at,function(t,n,i){var r=[];B.call(n);i.replace(st,function(t,e){e&&r.push(+e)}),e.push([n][L](r))}),e.toString=y._path2string,e});var St=function(t){var e=St.ps=St.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var n in e)e[M](n)&&n!=t&&(e[n].sleep--,!e[n].sleep&&delete e[n])}),e[t]};y.findDotsAtSegment=function(t,e,n,i,r,o,a,s,l){var h=1-l,u=O(h,3),c=O(h,2),f=l*l,p=f*l,d=u*t+3*c*l*n+3*h*l*l*r+p*a,g=u*e+3*c*l*i+3*h*l*l*o+p*s,v=t+2*l*(n-t)+f*(r-2*n+t),y=e+2*l*(i-e)+f*(o-2*i+e),m=n+2*l*(r-n)+f*(a-2*r+n),x=i+2*l*(o-i)+f*(s-2*o+i),b=h*t+l*n,w=h*e+l*i,_=h*r+l*a,M=h*o+l*s,S=90-180*I.atan2(v-m,y-x)/q;return(v>m||y<x)&&(S+=180),{x:d,y:g,m:{x:v,y:y},n:{x:m,y:x},start:{x:b,y:w},end:{x:_,y:M},alpha:S}},y.bezierBBox=function(t,e,n,i,r,o,a,s){y.is(t,"array")||(t=[t,e,n,i,r,o,a,s]);var l=Et.apply(null,t);return{x:l.min.x,y:l.min.y,x2:l.max.x,y2:l.max.y,width:l.max.x-l.min.x,height:l.max.y-l.min.y}},y.isPointInsideBBox=function(t,e,n){return e>=t.x&&e<=t.x2&&n>=t.y&&n<=t.y2},y.isBBoxIntersect=function(t,e){var n=y.isPointInsideBBox;return n(e,t.x,t.y)||n(e,t.x2,t.y)||n(e,t.x,t.y2)||n(e,t.x2,t.y2)||n(t,e.x,e.y)||n(t,e.x2,e.y)||n(t,e.x,e.y2)||n(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},y.pathIntersection=function(t,e){return a(t,e)},y.pathIntersectionNumber=function(t,e){return a(t,e,1)},y.isPointInsidePath=function(t,e,n){var i=y.pathBBox(t);return y.isPointInsideBBox(i,e,n)&&a(t,[["M",e,n],["H",i.x2+10]],1)%2==1},y._removedFactory=function(t){return function(){eve("raphael.log",null,"Rapha\xebl: you are calling to method \u201c"+t+"\u201d of removed object",t)}};var Ct=y.pathBBox=function(t){var e=St(t);if(e.bbox)return e.bbox;if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var n,i=0,r=0,o=[],a=[],s=0,l=(t=zt(t)).length;s<l;s++)if("M"==(n=t[s])[0])i=n[1],r=n[2],o.push(i),a.push(r);else{var h=Et(i,r,n[1],n[2],n[3],n[4],n[5],n[6]);o=o[L](h.min.x,h.max.x),a=a[L](h.min.y,h.max.y),i=n[5],r=n[6]}var u=H[A](0,o),c=H[A](0,a),f=D[A](0,o),p=D[A](0,a),d={x:u,y:c,x2:f,y2:p,width:f-u,height:p-c};return e.bbox=v(d),d},kt=function(t){var e=v(t);return e.toString=y._path2string,e},At=y._pathToRelative=function(t){var e=St(t);if(e.rel)return kt(e.rel);y.is(t,X)&&y.is(t&&t[0],X)||(t=y.parsePathString(t));var n=[],i=0,r=0,o=0,a=0,s=0;"M"==t[0][0]&&(i=t[0][1],r=t[0][2],o=i,a=r,s++,n.push(["M",i,r]));for(var l=s,h=t.length;l<h;l++){var u=n[l]=[],c=t[l];if(c[0]!=B.call(c[0]))switch(u[0]=B.call(c[0]),u[0]){case"a":u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=c[4],u[5]=c[5],u[6]=+(c[6]-i).toFixed(3),u[7]=+(c[7]-r).toFixed(3);break;case"v":u[1]=+(c[1]-r).toFixed(3);break;case"m":o=c[1],a=c[2];default:for(var f=1,p=c.length;f<p;f++)u[f]=+(c[f]-(f%2?i:r)).toFixed(3)}else{u=n[l]=[],"m"==c[0]&&(o=c[1]+i,a=c[2]+r);for(var d=0,g=c.length;d<g;d++)n[l][d]=c[d]}var v=n[l].length;switch(n[l][0]){case"z":i=o,r=a;break;case"h":i+=+n[l][v-1];break;case"v":r+=+n[l][v-1];break;default:i+=+n[l][v-2],r+=+n[l][v-1]}}return n.toString=y._path2string,e.rel=kt(n),n},Lt=y._pathToAbsolute=function(t){var e=St(t);if(e.abs)return kt(e.abs);if(y.is(t,X)&&y.is(t&&t[0],X)||(t=y.parsePathString(t)),!t||!t.length)return[["M",0,0]];var n=[],i=0,r=0,o=0,a=0,s=0;"M"==t[0][0]&&(i=+t[0][1],r=+t[0][2],o=i,a=r,s++,n[0]=["M",i,r]);for(var l,h,u=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),c=s,p=t.length;c<p;c++){if(n.push(l=[]),(h=t[c])[0]!=J.call(h[0]))switch(l[0]=J.call(h[0]),l[0]){case"A":l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=+(h[6]+i),l[7]=+(h[7]+r);break;case"V":l[1]=+h[1]+r;break;case"H":l[1]=+h[1]+i;break;case"R":for(var d=[i,r][L](h.slice(1)),g=2,v=d.length;g<v;g++)d[g]=+d[g]+i,d[++g]=+d[g]+r;n.pop(),n=n[L](f(d,u));break;case"M":o=+h[1]+i,a=+h[2]+r;default:for(g=1,v=h.length;g<v;g++)l[g]=+h[g]+(g%2?i:r)}else if("R"==h[0])d=[i,r][L](h.slice(1)),n.pop(),n=n[L](f(d,u)),l=["R"][L](h.slice(-2));else for(var m=0,x=h.length;m<x;m++)l[m]=h[m];switch(l[0]){case"Z":i=o,r=a;break;case"H":i=l[1];break;case"V":r=l[1];break;case"M":o=l[l.length-2],a=l[l.length-1];default:i=l[l.length-2],r=l[l.length-1]}}return n.toString=y._path2string,e.abs=kt(n),n},Tt=function(t,e,n,i){return[t,e,n,i,n,i]},Rt=function(t,e,n,i,r,o){var a=1/3,s=2/3;return[a*t+s*n,a*e+s*i,a*r+s*n,a*o+s*i,r,o]},Pt=function(t,e,n,i,r,o,a,s,l,h){var u,c=120*q/180,f=q/180*(+r||0),p=[],g=d(function(t,e,n){return{x:t*I.cos(n)-e*I.sin(n),y:t*I.sin(n)+e*I.cos(n)}});if(h)S=h[0],C=h[1],_=h[2],M=h[3];else{t=(u=g(t,e,-f)).x,e=u.y,s=(u=g(s,l,-f)).x,l=u.y;I.cos(q/180*r),I.sin(q/180*r);var v=(t-s)/2,y=(e-l)/2,m=v*v/(n*n)+y*y/(i*i);m>1&&(m=I.sqrt(m),n*=m,i*=m);var x=n*n,b=i*i,w=(o==a?-1:1)*I.sqrt(W((x*b-x*y*y-b*v*v)/(x*y*y+b*v*v))),_=w*n*y/i+(t+s)/2,M=w*-i*v/n+(e+l)/2,S=I.asin(((e-M)/i).toFixed(9)),C=I.asin(((l-M)/i).toFixed(9));S=t<_?q-S:S,C=s<_?q-C:C,S<0&&(S=2*q+S),C<0&&(C=2*q+C),a&&S>C&&(S-=2*q),!a&&C>S&&(C-=2*q)}var k=C-S;if(W(k)>c){var A=C,T=s,R=l;C=S+c*(a&&C>S?1:-1),s=_+n*I.cos(C),l=M+i*I.sin(C),p=Pt(s,l,n,i,r,0,a,T,R,[C,A,_,M])}k=C-S;var P=I.cos(S),F=I.sin(S),z=I.cos(C),N=I.sin(C),B=I.tan(k/4),D=4/3*n*B,H=4/3*i*B,O=[t,e],j=[t+D*F,e-H*P],Y=[s+D*N,l-H*z],X=[s,l];if(j[0]=2*O[0]-j[0],j[1]=2*O[1]-j[1],h)return[j,Y,X][L](p);for(var V=[],U=0,G=(p=[j,Y,X][L](p).join()[E](",")).length;U<G;U++)V[U]=U%2?g(p[U-1],p[U],f).y:g(p[U],p[U+1],f).x;return V},Ft=function(t,e,n,i,r,o,a,s,l){var h=1-l;return{x:O(h,3)*t+3*O(h,2)*l*n+3*h*l*l*r+O(l,3)*a,y:O(h,3)*e+3*O(h,2)*l*i+3*h*l*l*o+O(l,3)*s}},Et=d(function(t,e,n,i,r,o,a,s){var l,h=r-2*n+t-(a-2*r+n),u=2*(n-t)-2*(r-n),c=t-n,f=(-u+I.sqrt(u*u-4*h*c))/2/h,p=(-u-I.sqrt(u*u-4*h*c))/2/h,d=[e,s],g=[t,a];return W(f)>"1e12"&&(f=.5),W(p)>"1e12"&&(p=.5),f>0&&f<1&&(l=Ft(t,e,n,i,r,o,a,s,f),g.push(l.x),d.push(l.y)),p>0&&p<1&&(l=Ft(t,e,n,i,r,o,a,s,p),g.push(l.x),d.push(l.y)),h=o-2*i+e-(s-2*o+i),u=2*(i-e)-2*(o-i),c=e-i,f=(-u+I.sqrt(u*u-4*h*c))/2/h,p=(-u-I.sqrt(u*u-4*h*c))/2/h,W(f)>"1e12"&&(f=.5),W(p)>"1e12"&&(p=.5),f>0&&f<1&&(l=Ft(t,e,n,i,r,o,a,s,f),g.push(l.x),d.push(l.y)),p>0&&p<1&&(l=Ft(t,e,n,i,r,o,a,s,p),g.push(l.x),d.push(l.y)),{min:{x:H[A](0,g),y:H[A](0,d)},max:{x:D[A](0,g),y:D[A](0,d)}}}),zt=y._path2curve=d(function(t,e){var n=!e&&St(t);if(!e&&n.curve)return kt(n.curve);for(var i=Lt(t),r=e&&Lt(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=function(t,e){if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][L](Pt[A](0,[e.x,e.y][L](t.slice(1))));break;case"S":t=["C",e.x+(e.x-(e.bx||e.x)),e.y+(e.y-(e.by||e.y))][L](t.slice(1));break;case"T":e.qx=e.x+(e.x-(e.qx||e.x)),e.qy=e.y+(e.y-(e.qy||e.y)),t=["C"][L](Rt(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][L](Rt(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][L](Tt(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][L](Tt(e.x,e.y,t[1],e.y));break;case"V":t=["C"][L](Tt(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][L](Tt(e.x,e.y,e.X,e.Y))}return t},l=function(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)t.splice(e++,0,["C"][L](n.splice(0,6)));t.splice(e,1),c=D(i.length,r&&r.length||0)}},h=function(t,e,n,o,a){t&&e&&"M"==t[a][0]&&"M"!=e[a][0]&&(e.splice(a,0,["M",o.x,o.y]),n.bx=0,n.by=0,n.x=t[a][1],n.y=t[a][2],c=D(i.length,r&&r.length||0))},u=0,c=D(i.length,r&&r.length||0);u<c;u++){i[u]=s(i[u],o),l(i,u),r&&(r[u]=s(r[u],a)),r&&l(r,u),h(i,r,o,a,u),h(r,i,a,o,u);var f=i[u],p=r&&r[u],d=f.length,g=r&&p.length;o.x=f[d-2],o.y=f[d-1],o.bx=Q(f[d-4])||o.x,o.by=Q(f[d-3])||o.y,a.bx=r&&(Q(p[g-4])||a.x),a.by=r&&(Q(p[g-3])||a.y),a.x=r&&p[g-2],a.y=r&&p[g-1]}return r||(n.curve=kt(i)),r?[i,r]:i},null,kt),Nt=(y._parseDots=d(function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r={},o=t[n].match(/^([^:]*):?([\d\.]*)/);if(r.color=y.getRGB(o[1]),r.color.error)return null;r.color=r.color.hex,o[2]&&(r.offset=o[2]+"%"),e.push(r)}for(n=1,i=e.length-1;n<i;n++)if(!e[n].offset){for(var a=Q(e[n-1].offset||0),s=0,l=n+1;l<i;l++)if(e[l].offset){s=e[l].offset;break}s||(s=100,l=i);for(var h=((s=Q(s))-a)/(l-n+1);n<l;n++)a+=h,e[n].offset=a+"%"}return e}),y._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),Bt=(y._tofront=function(t,e){e.top!==t&&(Nt(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},y._toback=function(t,e){e.bottom!==t&&(Nt(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},y._insertafter=function(t,e,n){Nt(t,n),e==n.top&&(n.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},y._insertbefore=function(t,e,n){Nt(t,n),e==n.bottom&&(n.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},y.toMatrix=function(t,e){var n=Ct(t),i={_:{transform:R},getBBox:function(){return n}};return It(i,e),i.matrix}),It=(y.transformPath=function(t,e){return gt(t,Bt(t,e))},y._extractTransform=function(t,e){if(null==e)return t._.transform;e=F(e).replace(/\.{3}|\u2026/g,t._.transform||R);var n=y.parseTransformString(e),i=0,r=0,a=0,s=1,l=1,h=t._,u=new o;if(h.transform=n||[],n)for(var c=0,f=n.length;c<f;c++){var p,d,g,v,m,x=n[c],b=x.length,w=F(x[0]).toLowerCase(),_=x[0]!=w,M=_?u.invert():0;"t"==w&&3==b?_?(p=M.x(0,0),d=M.y(0,0),g=M.x(x[1],x[2]),v=M.y(x[1],x[2]),u.translate(g-p,v-d)):u.translate(x[1],x[2]):"r"==w?2==b?(m=m||t.getBBox(1),u.rotate(x[1],m.x+m.width/2,m.y+m.height/2),i+=x[1]):4==b&&(_?(g=M.x(x[2],x[3]),v=M.y(x[2],x[3]),u.rotate(x[1],g,v)):u.rotate(x[1],x[2],x[3]),i+=x[1]):"s"==w?2==b||3==b?(m=m||t.getBBox(1),u.scale(x[1],x[b-1],m.x+m.width/2,m.y+m.height/2),s*=x[1],l*=x[b-1]):5==b&&(_?(g=M.x(x[3],x[4]),v=M.y(x[3],x[4]),u.scale(x[1],x[2],g,v)):u.scale(x[1],x[2],x[3],x[4]),s*=x[1],l*=x[2]):"m"==w&&7==b&&u.add(x[1],x[2],x[3],x[4],x[5],x[6]),h.dirtyT=1,t.matrix=u}t.matrix=u,h.sx=s,h.sy=l,h.deg=i,h.dx=r=u.e,h.dy=a=u.f,1==s&&1==l&&!i&&h.bbox?(h.bbox.x+=+r,h.bbox.y+=+a):h.dirtyT=1}),Dt=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},Ht=y._equaliseTransform=function(t,e){e=F(e).replace(/\.{3}|\u2026/g,t),t=y.parseTransformString(t)||[],e=y.parseTransformString(e)||[];for(var n,i,r,o,a=D(t.length,e.length),s=[],l=[],h=0;h<a;h++){if(r=t[h]||Dt(e[h]),o=e[h]||Dt(r),r[0]!=o[0]||"r"==r[0].toLowerCase()&&(r[2]!=o[2]||r[3]!=o[3])||"s"==r[0].toLowerCase()&&(r[3]!=o[3]||r[4]!=o[4]))return;for(s[h]=[],l[h]=[],n=0,i=D(r.length,o.length);n<i;n++)n in r&&(s[h][n]=r[n]),n in o&&(l[h][n]=o[n])}return{from:s,to:l}};y._getContainer=function(t,e,n,i){var r;if(null!=(r=null!=i||y.is(t,"object")?t:S.doc.getElementById(t)))return r.tagName?null==e?{container:r,width:r.style.pixelWidth||r.offsetWidth,height:r.style.pixelHeight||r.offsetHeight}:{container:r,width:e,height:n}:{container:1,x:t,y:e,width:n,height:i}},y.pathToRelative=At,y._engine={},y.path2curve=zt,y.matrix=function(t,e,n,i,r,a){return new o(t,e,n,i,r,a)},function(t){function e(t){var e=I.sqrt(n(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}function n(t){return t[0]*t[0]+t[1]*t[1]}t.add=function(t,e,n,i,r,a){var s,l,h,u,c=[[],[],[]],f=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],p=[[t,n,r],[e,i,a],[0,0,1]];for(t&&t instanceof o&&(p=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),s=0;s<3;s++)for(l=0;l<3;l++){for(u=0,h=0;h<3;h++)u+=f[s][h]*p[h][l];c[s][l]=u}this.a=c[0][0],this.b=c[1][0],this.c=c[0][1],this.d=c[1][1],this.e=c[0][2],this.f=c[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new o(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new o(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,n,i){null==e&&(e=t),(n||i)&&this.add(1,0,0,1,n,i),this.add(t,0,0,e,0,0),(n||i)&&this.add(1,0,0,1,-n,-i)},t.rotate=function(t,e,n){t=y.rad(t),e=e||0,n=n||0;var i=+I.cos(t).toFixed(9),r=+I.sin(t).toFixed(9);this.add(i,r,-r,i,e,n),this.add(1,0,0,1,-e,-n)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[F.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return y.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];t.scalex=I.sqrt(n(i[0])),e(i[0]),t.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*t.shear,i[1][1]-i[0][1]*t.shear],t.scaley=I.sqrt(n(i[1])),e(i[1]),t.shear/=t.scaley;var r=-i[0][1],o=i[1][1];return o<0?(t.rotate=y.deg(I.acos(o)),r<0&&(t.rotate=360-t.rotate)):t.rotate=y.deg(I.asin(r)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[E]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:R)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:R)+(e.rotate?"r"+[e.rotate,0,0]:R)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(o.prototype);var Wt=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(Wt&&Wt[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Wt&&Wt[1]<8?x.safari=function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){t.remove()})}:x.safari=ut;for(var Ot=function(){this.returnValue=!1},qt=function(){return this.originalEvent.preventDefault()},jt=function(){this.cancelBubble=!0},Yt=function(){return this.originalEvent.stopPropagation()},Xt=S.doc.addEventListener?function(t,e,n,i){var r=T&&N[e]?N[e]:e,o=function(r){var o=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,a=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft,s=r.clientX+a,l=r.clientY+o;if(T&&N[M](e))for(var h=0,u=r.targetTouches&&r.targetTouches.length;h<u;h++)if(r.targetTouches[h].target==t){var c=r;(r=r.targetTouches[h]).originalEvent=c,r.preventDefault=qt,r.stopPropagation=Yt;break}return n.call(i,r,s,l)};return t.addEventListener(r,o,!1),function(){return t.removeEventListener(r,o,!1),!0}}:S.doc.attachEvent?function(t,e,n,i){var r=function(t){t=t||S.win.event;var e=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,r=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft,o=t.clientX+r,a=t.clientY+e;return t.preventDefault=t.preventDefault||Ot,t.stopPropagation=t.stopPropagation||jt,n.call(i,t,o,a)};t.attachEvent("on"+e,r);return function(){return t.detachEvent("on"+e,r),!0}}:void 0,Vt=[],Ut=function(t){for(var e,n=t.clientX,i=t.clientY,r=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,o=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft,a=Vt.length;a--;){if(e=Vt[a],T){for(var s,l=t.touches.length;l--;)if((s=t.touches[l]).identifier==e.el._drag.id){n=s.clientX,i=s.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var h,u=e.el.node,c=u.nextSibling,f=u.parentNode,p=u.style.display;S.win.opera&&f.removeChild(u),u.style.display="none",h=e.el.paper.getElementByPoint(n,i),u.style.display=p,S.win.opera&&(c?f.insertBefore(u,c):f.appendChild(u)),h&&eve("raphael.drag.over."+e.el.id,e.el,h),n+=o,i+=r,eve("raphael.drag.move."+e.el.id,e.move_scope||e.el,n-e.el._drag.x,i-e.el._drag.y,n,i,t)}},Gt=function(t){y.unmousemove(Ut).unmouseup(Gt);for(var e,n=Vt.length;n--;)e=Vt[n],e.el._drag={},eve("raphael.drag.end."+e.el.id,e.end_scope||e.start_scope||e.move_scope||e.el,t);Vt=[]},$t=y.el={},Zt=z.length;Zt--;)!function(t){y[t]=$t[t]=function(e,n){return y.is(e,"function")&&(this.events=this.events||[],this.events.push({name:t,f:e,unbind:Xt(this.shape||this.node||S.doc,t,e,n||this)})),this},y["un"+t]=$t["un"+t]=function(e){for(var n=this.events||[],i=n.length;i--;)if(n[i].name==t&&n[i].f==e)return n[i].unbind(),n.splice(i,1),!n.length&&delete this.events,this;return this}}(z[Zt]);$t.data=function(t,e){var n=lt[this.id]=lt[this.id]||{};if(1==arguments.length){if(y.is(t,"object")){for(var i in t)t[M](i)&&this.data(i,t[i]);return this}return eve("raphael.data.get."+this.id,this,n[t],t),n[t]}return n[t]=e,eve("raphael.data.set."+this.id,this,e,t),this},$t.removeData=function(t){return null==t?lt[this.id]={}:lt[this.id]&&delete lt[this.id][t],this},$t.hover=function(t,e,n,i){return this.mouseover(t,n).mouseout(e,i||n)},$t.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var Qt=[];$t.drag=function(t,e,n,i,r,o){function a(a){(a.originalEvent||a).preventDefault();var s=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,l=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft;this._drag.x=a.clientX+l,this._drag.y=a.clientY+s,this._drag.id=a.identifier,!Vt.length&&y.mousemove(Ut).mouseup(Gt),Vt.push({el:this,move_scope:i,start_scope:r,end_scope:o}),e&&eve.on("raphael.drag.start."+this.id,e),t&&eve.on("raphael.drag.move."+this.id,t),n&&eve.on("raphael.drag.end."+this.id,n),eve("raphael.drag.start."+this.id,r||i||this,a.clientX+l,a.clientY+s,a)}return this._drag={},Qt.push({el:this,start:a}),this.mousedown(a),this},$t.onDragOver=function(t){t?eve.on("raphael.drag.over."+this.id,t):eve.unbind("raphael.drag.over."+this.id)},$t.undrag=function(){for(var t=Qt.length;t--;)Qt[t].el==this&&(this.unmousedown(Qt[t].start),Qt.splice(t,1),eve.unbind("raphael.drag.*."+this.id));!Qt.length&&y.unmousemove(Ut).unmouseup(Gt)},x.circle=function(t,e,n){var i=y._engine.circle(this,t||0,e||0,n||0);return this.__set__&&this.__set__.push(i),i},x.rect=function(t,e,n,i,r){var o=y._engine.rect(this,t||0,e||0,n||0,i||0,r||0);return this.__set__&&this.__set__.push(o),o},x.ellipse=function(t,e,n,i){var r=y._engine.ellipse(this,t||0,e||0,n||0,i||0);return this.__set__&&this.__set__.push(r),r},x.path=function(t){t&&!y.is(t,Y)&&!y.is(t[0],X)&&(t+=R);var e=y._engine.path(y.format[A](y,arguments),this);return this.__set__&&this.__set__.push(e),e},x.image=function(t,e,n,i,r){var o=y._engine.image(this,t||"about:blank",e||0,n||0,i||0,r||0);return this.__set__&&this.__set__.push(o),o},x.text=function(t,e,n){var i=y._engine.text(this,t||0,e||0,F(n));return this.__set__&&this.__set__.push(i),i},x.set=function(t){!y.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var e=new he(t);return this.__set__&&this.__set__.push(e),e},x.setStart=function(t){this.__set__=t||this.set()},x.setFinish=function(){var t=this.__set__;return delete this.__set__,t},x.setSize=function(t,e){return y._engine.setSize.call(this,t,e)},x.setViewBox=function(t,e,n,i,r){return y._engine.setViewBox.call(this,t,e,n,i,r)},x.top=x.bottom=null,x.raphael=y;var Kt=function(t){var e=t.getBoundingClientRect(),n=t.ownerDocument,i=n.body,r=n.documentElement,o=r.clientTop||i.clientTop||0,a=r.clientLeft||i.clientLeft||0;return{y:e.top+(S.win.pageYOffset||r.scrollTop||i.scrollTop)-o,x:e.left+(S.win.pageXOffset||r.scrollLeft||i.scrollLeft)-a}};x.getElementByPoint=function(t,e){var n=this,i=n.canvas,r=S.doc.elementFromPoint(t,e);if(S.win.opera&&"svg"==r.tagName){var o=Kt(i),a=i.createSVGRect();a.x=t-o.x,a.y=e-o.y,a.width=a.height=1;var s=i.getIntersectionList(a,null);s.length&&(r=s[s.length-1])}if(!r)return null;for(;r.parentNode&&r!=i.parentNode&&!r.raphael;)r=r.parentNode;return r==n.canvas.parentNode&&(r=i),r=r&&r.raphael?n.getById(r.raphaelid):null},x.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},x.forEach=function(t,e){for(var n=this.bottom;n;){if(!1===t.call(e,n))return this;n=n.next}return this},x.getElementsByPoint=function(t,e){var n=this.set();return this.forEach(function(i){i.isPointInside(t,e)&&n.push(i)}),n},$t.isPointInside=function(t,e){var n=this.realPath=this.realPath||dt[this.type](this);return y.isPointInsidePath(n,t,e)},$t.getBBox=function(t){if(this.removed)return{};var e=this._;return t?(!e.dirty&&e.bboxwt||(this.realPath=dt[this.type](this),e.bboxwt=Ct(this.realPath),e.bboxwt.toString=r,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&(!e.dirty&&this.realPath||(e.bboxwt=0,this.realPath=dt[this.type](this)),e.bbox=Ct(gt(this.realPath,this.matrix)),e.bbox.toString=r,e.dirty=e.dirtyT=0),e.bbox)},$t.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},$t.glow=function(t){if("text"==this.type)return null;var e={width:((t=t||{}).width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity||.5,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},n=e.width/2,i=this.paper,r=i.set(),o=this.realPath||dt[this.type](this);o=this.matrix?gt(o,this.matrix):o;for(var a=1;a<n+1;a++)r.push(i.path(o).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/n*a).toFixed(3),opacity:+(e.opacity/n).toFixed(3)}));return r.insertBefore(this).translate(e.offsetx,e.offsety)};var Jt=function(t,e,n,i,r,o,a,s,l){return null==l?u(t,e,n,i,r,o,a,s):y.findDotsAtSegment(t,e,n,i,r,o,a,s,h(t,e,n,i,r,o,a,s,l))},te=function(t,e){return function(n,i,r){for(var o,a,s,l,h,u="",c={},f=0,p=0,d=(n=zt(n)).length;p<d;p++){if("M"==(s=n[p])[0])o=+s[1],a=+s[2];else{if(l=Jt(o,a,s[1],s[2],s[3],s[4],s[5],s[6]),f+l>i){if(e&&!c.start){if(h=Jt(o,a,s[1],s[2],s[3],s[4],s[5],s[6],i-f),u+=["C"+h.start.x,h.start.y,h.m.x,h.m.y,h.x,h.y],r)return u;c.start=u,u=["M"+h.x,h.y+"C"+h.n.x,h.n.y,h.end.x,h.end.y,s[5],s[6]].join(),f+=l,o=+s[5],a=+s[6];continue}if(!t&&!e)return h=Jt(o,a,s[1],s[2],s[3],s[4],s[5],s[6],i-f),{x:h.x,y:h.y,alpha:h.alpha}}f+=l,o=+s[5],a=+s[6]}u+=s.shift()+s}return c.end=u,(h=t?f:e?c:y.findDotsAtSegment(o,a,s[0],s[1],s[2],s[3],s[4],s[5],1)).alpha&&(h={x:h.x,y:h.y,alpha:h.alpha}),h}},ee=te(1),ne=te(),ie=te(0,1);y.getTotalLength=ee,y.getPointAtLength=ne,y.getSubpath=function(t,e,n){if(this.getTotalLength(t)-n<1e-6)return ie(t,e).end;var i=ie(t,n,1);return e?ie(i,e).end:i},$t.getTotalLength=function(){if("path"==this.type)return this.node.getTotalLength?this.node.getTotalLength():ee(this.attrs.path)},$t.getPointAtLength=function(t){if("path"==this.type)return ne(this.attrs.path,t)},$t.getSubpath=function(t,e){if("path"==this.type)return y.getSubpath(this.attrs.path,t,e)};var re=y.easing_formulas={linear:function(t){return t},"<":function(t){return O(t,1.7)},">":function(t){return O(t,.48)},"<>":function(t){var e=.48-t/1.04,n=I.sqrt(.1734+e*e),i=n-e,r=-n-e,o=O(W(i),1/3)*(i<0?-1:1)+O(W(r),1/3)*(r<0?-1:1)+.5;return 3*(1-o)*o*o+o*o*o},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},elastic:function(t){return t==!!t?t:O(2,-10*t)*I.sin(2*(t-.075)*q/.3)+1},bounce:function(t){var e,n=7.5625,i=2.75;return t<1/i?e=n*t*t:t<2/i?(t-=1.5/i,e=n*t*t+.75):t<2.5/i?(t-=2.25/i,e=n*t*t+.9375):(t-=2.625/i,e=n*t*t+.984375),e}};re.easeIn=re["ease-in"]=re["<"],re.easeOut=re["ease-out"]=re[">"],re.easeInOut=re["ease-in-out"]=re["<>"],re["back-in"]=re.backIn,re["back-out"]=re.backOut;var oe=[],ae=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)},se=function(){for(var t=+new Date,n=0;n<oe.length;n++){var i=oe[n];if(!i.el.removed&&!i.paused){var r,o,a=t-i.start,s=i.ms,l=i.easing,h=i.from,u=i.diff,c=i.to,f=(i.t,i.el),p={},d={};if(i.initstatus?(a=(i.initstatus*i.anim.top-i.prev)/(i.percent-i.prev)*s,i.status=i.initstatus,delete i.initstatus,i.stop&&oe.splice(n--,1)):i.status=(i.prev+(i.percent-i.prev)*(a/s))/i.anim.top,!(a<0))if(a<s){var g=l(a/s);for(var v in h)if(h[M](v)){switch(et[v]){case j:r=+h[v]+g*s*u[v];break;case"colour":r="rgb("+[le(Z(h[v].r+g*s*u[v].r)),le(Z(h[v].g+g*s*u[v].g)),le(Z(h[v].b+g*s*u[v].b))].join(",")+")";break;case"path":r=[];for(var m=0,x=h[v].length;m<x;m++){r[m]=[h[v][m][0]];for(var b=1,w=h[v][m].length;b<w;b++)r[m][b]=+h[v][m][b]+g*s*u[v][m][b];r[m]=r[m].join(P)}r=r.join(P);break;case"transform":if(u[v].real)for(r=[],m=0,x=h[v].length;m<x;m++)for(r[m]=[h[v][m][0]],b=1,w=h[v][m].length;b<w;b++)r[m][b]=h[v][m][b]+g*s*u[v][m][b];else{var _=function(t){return+h[v][t]+g*s*u[v][t]};r=[["m",_(0),_(1),_(2),_(3),_(4),_(5)]]}break;case"csv":if("clip-rect"==v)for(r=[],m=4;m--;)r[m]=+h[v][m]+g*s*u[v][m];break;default:var S=[][L](h[v]);for(r=[],m=f.paper.customAttributes[v].length;m--;)r[m]=+S[m]+g*s*u[v][m]}p[v]=r}f.attr(p),function(t,e,n){setTimeout(function(){eve("raphael.anim.frame."+t,e,n)})}(f.id,f,i.anim)}else{if(function(t,e,n){setTimeout(function(){eve("raphael.anim.frame."+e.id,e,n),eve("raphael.anim.finish."+e.id,e,n),y.is(t,"function")&&t.call(e)})}(i.callback,f,i.anim),f.attr(c),oe.splice(n--,1),i.repeat>1&&!i.next){for(o in c)c[M](o)&&(d[o]=i.totalOrigin[o]);i.el.attr(d),e(i.anim,i.el,i.anim.percents[0],null,i.totalOrigin,i.repeat-1)}i.next&&!i.stop&&e(i.anim,i.el,i.next,null,i.totalOrigin,i.repeat)}}}y.svg&&f&&f.paper&&f.paper.safari(),oe.length&&ae(se)},le=function(t){return t>255?255:t<0?0:t};$t.animateWith=function(t,i,r,o,a,s){var l=this;if(l.removed)return s&&s.call(l),l;var h=r instanceof n?r:y.animation(r,o,a,s);e(h,l,h.percents[0],null,l.attr());for(var u=0,c=oe.length;u<c;u++)if(oe[u].anim==i&&oe[u].el==t){oe[c-1].start=oe[u].start;break}return l},$t.onAnimation=function(t){return t?eve.on("raphael.anim.frame."+this.id,t):eve.unbind("raphael.anim.frame."+this.id),this},n.prototype.delay=function(t){var e=new n(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},n.prototype.repeat=function(t){var e=new n(this.anim,this.ms);return e.del=this.del,e.times=I.floor(D(t,0))||1,e},y.animation=function(t,e,i,r){if(t instanceof n)return t;!y.is(i,"function")&&i||(r=r||i||null,i=null),t=Object(t),e=+e||0;var o,a,s={};for(a in t)t[M](a)&&Q(a)!=a&&Q(a)+"%"!=a&&(o=!0,s[a]=t[a]);return o?(i&&(s.easing=i),r&&(s.callback=r),new n({100:s},e)):new n(t,e)},$t.animate=function(t,i,r,o){var a=this;if(a.removed)return o&&o.call(a),a;var s=t instanceof n?t:y.animation(t,i,r,o);return e(s,a,s.percents[0],null,a.attr()),a},$t.setTime=function(t,e){return t&&null!=e&&this.status(t,H(e,t.ms)/t.ms),this},$t.status=function(t,n){var i,r,o=[],a=0;if(null!=n)return e(t,this,-1,H(n,1)),this
;for(i=oe.length;a<i;a++)if((r=oe[a]).el.id==this.id&&(!t||r.anim==t)){if(t)return r.status;o.push({anim:r.anim,status:r.status})}return t?0:o},$t.pause=function(t){for(var e=0;e<oe.length;e++)oe[e].el.id==this.id&&(!t||oe[e].anim==t)&&!1!==eve("raphael.anim.pause."+this.id,this,oe[e].anim)&&(oe[e].paused=!0);return this},$t.resume=function(t){for(var e=0;e<oe.length;e++)if(oe[e].el.id==this.id&&(!t||oe[e].anim==t)){var n=oe[e];!1!==eve("raphael.anim.resume."+this.id,this,n.anim)&&(delete n.paused,this.status(n.anim,n.status))}return this},$t.stop=function(t){for(var e=0;e<oe.length;e++)oe[e].el.id==this.id&&(!t||oe[e].anim==t)&&!1!==eve("raphael.anim.stop."+this.id,this,oe[e].anim)&&oe.splice(e--,1);return this},eve.on("raphael.remove",t),eve.on("raphael.clear",t),$t.toString=function(){return"Rapha\xebl\u2019s object"};var he=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,n=t.length;e<n;e++)t[e]&&(t[e].constructor==$t.constructor||t[e].constructor==he)&&(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},ue=he.prototype;ue.push=function(){for(var t,e,n=0,i=arguments.length;n<i;n++)(t=arguments[n])&&(t.constructor==$t.constructor||t.constructor==he)&&(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},ue.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},ue.forEach=function(t,e){for(var n=0,i=this.items.length;n<i;n++)if(!1===t.call(e,this.items[n],n))return this;return this};for(var ce in $t)$t[M](ce)&&(ue[ce]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t][A](n,e)})}}(ce));ue.attr=function(t,e){if(t&&y.is(t,X)&&y.is(t[0],"object"))for(var n=0,i=t.length;n<i;n++)this.items[n].attr(t[n]);else for(var r=0,o=this.items.length;r<o;r++)this.items[r].attr(t,e);return this},ue.clear=function(){for(;this.length;)this.pop()},ue.splice=function(t,e){t=t<0?D(this.length+t,0):t,e=D(0,H(this.length-t,e));var n,i=[],r=[],o=[];for(n=2;n<arguments.length;n++)o.push(arguments[n]);for(n=0;n<e;n++)r.push(this[t+n]);for(;n<this.length-t;n++)i.push(this[t+n]);var a=o.length;for(n=0;n<a+i.length;n++)this.items[t+n]=this[t+n]=n<a?o[n]:i[n-a];for(n=this.items.length=this.length-=e-a;this[n];)delete this[n++];return new he(r)},ue.exclude=function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]==t)return this.splice(e,1),!0},ue.animate=function(t,e,n,i){(y.is(n,"function")||!n)&&(i=n||null);var r,o,a=this.items.length,s=a,l=this;if(!a)return this;i&&(o=function(){!--a&&i.call(l)}),n=y.is(n,Y)?n:o;var h=y.animation(t,e,n,o);for(r=this.items[--s].animate(h);s--;)this.items[s]&&!this.items[s].removed&&this.items[s].animateWith(r,h,h);return this},ue.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},ue.getBBox=function(){for(var t=[],e=[],n=[],i=[],r=this.items.length;r--;)if(!this.items[r].removed){var o=this.items[r].getBBox();t.push(o.x),e.push(o.y),n.push(o.x+o.width),i.push(o.y+o.height)}return t=H[A](0,t),e=H[A](0,e),n=D[A](0,n),i=D[A](0,i),{x:t,y:e,x2:n,y2:i,width:n-t,height:i-e}},ue.clone=function(t){t=new he;for(var e=0,n=this.items.length;e<n;e++)t.push(this.items[e].clone());return t},ue.toString=function(){return"Rapha\xebl\u2018s set"},y.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},n=t.face["font-family"];for(var i in t.face)t.face[M](i)&&(e.face[i]=t.face[i]);if(this.fonts[n]?this.fonts[n].push(e):this.fonts[n]=[e],!t.svg){e.face["units-per-em"]=K(t.face["units-per-em"],10);for(var r in t.glyphs)if(t.glyphs[M](r)){var o=t.glyphs[r];if(e.glyphs[r]={w:o.w,k:{},d:o.d&&"M"+o.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},o.k)for(var a in o.k)o[M](a)&&(e.glyphs[r].k[a]=o.k[a])}}return t},x.getFont=function(t,e,n,i){if(i=i||"normal",n=n||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400,y.fonts){var r=y.fonts[t];if(!r){var o=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,R)+"(\\s|$)","i");for(var a in y.fonts)if(y.fonts[M](a)&&o.test(a)){r=y.fonts[a];break}}var s;if(r)for(var l=0,h=r.length;l<h&&((s=r[l]).face["font-weight"]!=e||s.face["font-style"]!=n&&s.face["font-style"]||s.face["font-stretch"]!=i);l++);return s}},x.print=function(t,e,n,i,r,o,a){o=o||"middle",a=D(H(a||0,1),-1);var s,l=F(n)[E](R),h=0,u=0,c=R;if(y.is(i,n)&&(i=this.getFont(i)),i){s=(r||16)/i.face["units-per-em"];for(var f=i.face.bbox[E](b),p=+f[0],d=f[3]-f[1],g=0,v=+f[1]+("baseline"==o?d+ +i.face.descent:d/2),m=0,x=l.length;m<x;m++){if("\n"==l[m])h=0,_=0,u=0,g+=d;else{var w=u&&i.glyphs[l[m-1]]||{},_=i.glyphs[l[m]];h+=u?(w.w||i.w)+(w.k&&w.k[l[m]]||0)+i.w*a:0,u=1}_&&_.d&&(c+=y.transformPath(_.d,["t",h*s,g*s,"s",s,s,p,v,"t",(t-p)/s,(e-v)/s]))}}return this.path(c).attr({fill:"#000",stroke:"none"})},x.add=function(t){if(y.is(t,"array"))for(var e,n=this.set(),i=0,r=t.length;i<r;i++)e=t[i]||{},w[M](e.type)&&n.push(this[e.type]().attr(e));return n},y.format=function(t,e){var n=y.is(e,X)?[0][L](e):arguments;return t&&y.is(t,Y)&&n.length-1&&(t=t.replace(_,function(t,e){return null==n[++e]?R:n[e]})),t||R},y.fullfill=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(t,n,i){var r=i;return n.replace(e,function(t,e,n,i,o){e=e||i,r&&(e in r&&(r=r[e]),"function"==typeof r&&o&&(r=r()))}),r=(null==r||r==i?t:r)+""};return function(e,i){return String(e).replace(t,function(t,e){return n(t,e,i)})}}(),y.ninja=function(){return C.was?S.win.Raphael=C.is:delete Raphael,y},y.st=ue,function(t,e,n){function i(){/in/.test(t.readyState)?setTimeout(i,9):y.eve("raphael.DOMload")}null==t.readyState&&t.addEventListener&&(t.addEventListener(e,n=function(){t.removeEventListener(e,n,!1),t.readyState="complete"},!1),t.readyState="loading"),i()}(document,"DOMContentLoaded"),C.was?S.win.Raphael=y:Raphael=y,eve.on("raphael.DOMload",function(){m=!0})}(),window.Raphael.svg&&function(t){var e="hasOwnProperty",n=String,i=parseFloat,r=parseInt,o=Math,a=o.max,s=o.abs,l=o.pow,h=/[, ]+/,u=t.eve,c="",f=" ",p="http://www.w3.org/1999/xlink",d={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},g={};t.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version};var v=function(i,r){if(r){"string"==typeof i&&(i=v(i));for(var o in r)r[e](o)&&("xlink:"==o.substring(0,6)?i.setAttributeNS(p,o.substring(6),n(r[o])):i.setAttribute(o,n(r[o])))}else(i=t._g.doc.createElementNS("http://www.w3.org/2000/svg",i)).style&&(i.style.webkitTapHighlightColor="rgba(0,0,0,0)");return i},y=function(e,r){var h="linear",u=e.id+r,f=.5,p=.5,d=e.node,g=e.paper,y=d.style,m=t._g.doc.getElementById(u);if(!m){if(r=n(r).replace(t._radial_gradient,function(t,e,n){if(h="radial",e&&n){f=i(e);var r=2*((p=i(n))>.5)-1;l(f-.5,2)+l(p-.5,2)>.25&&(p=o.sqrt(.25-l(f-.5,2))*r+.5)&&.5!=p&&(p=p.toFixed(5)-1e-5*r)}return c}),r=r.split(/\s*\-\s*/),"linear"==h){var x=r.shift();if(x=-i(x),isNaN(x))return null;var b=[0,0,o.cos(t.rad(x)),o.sin(t.rad(x))],w=1/(a(s(b[2]),s(b[3]))||1);b[2]*=w,b[3]*=w,b[2]<0&&(b[0]=-b[2],b[2]=0),b[3]<0&&(b[1]=-b[3],b[3]=0)}var _=t._parseDots(r);if(!_)return null;if(u=u.replace(/[\(\)\s,\xb0#]/g,"_"),e.gradient&&u!=e.gradient.id&&(g.defs.removeChild(e.gradient),delete e.gradient),!e.gradient){m=v(h+"Gradient",{id:u}),e.gradient=m,v(m,"radial"==h?{fx:f,fy:p}:{x1:b[0],y1:b[1],x2:b[2],y2:b[3],gradientTransform:e.matrix.invert()}),g.defs.appendChild(m);for(var M=0,S=_.length;M<S;M++)m.appendChild(v("stop",{offset:_[M].offset?_[M].offset:M?"100%":"0%","stop-color":_[M].color||"#fff"}))}}return v(d,{fill:"url(#"+u+")",opacity:1,"fill-opacity":1}),y.fill=c,y.opacity=1,y.fillOpacity=1,1},m=function(t){var e=t.getBBox(1);v(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},x=function(i,r,o){if("path"==i.type){for(var a,s,l,h,u,f=n(r).toLowerCase().split("-"),p=i.paper,y=o?"end":"start",m=i.node,x=i.attrs,b=x["stroke-width"],w=f.length,_="classic",M=3,S=3,C=5;w--;)switch(f[w]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":_=f[w];break;case"wide":S=5;break;case"narrow":S=2;break;case"long":M=5;break;case"short":M=2}if("open"==_?(M+=2,S+=2,C+=2,l=1,h=o?4:1,u={fill:"none",stroke:x.stroke}):(h=l=M/2,u={fill:x.stroke,stroke:"none"}),i._.arrows?o?(i._.arrows.endPath&&g[i._.arrows.endPath]--,i._.arrows.endMarker&&g[i._.arrows.endMarker]--):(i._.arrows.startPath&&g[i._.arrows.startPath]--,i._.arrows.startMarker&&g[i._.arrows.startMarker]--):i._.arrows={},"none"!=_){var k="raphael-marker-"+_,A="raphael-marker-"+y+_+M+S;t._g.doc.getElementById(k)?g[k]++:(p.defs.appendChild(v(v("path"),{"stroke-linecap":"round",d:d[_],id:k})),g[k]=1);var L,T=t._g.doc.getElementById(A);T?(g[A]++,L=T.getElementsByTagName("use")[0]):(T=v(v("marker"),{id:A,markerHeight:S,markerWidth:M,orient:"auto",refX:h,refY:S/2}),L=v(v("use"),{"xlink:href":"#"+k,transform:(o?"rotate(180 "+M/2+" "+S/2+") ":c)+"scale("+M/C+","+S/C+")","stroke-width":(1/((M/C+S/C)/2)).toFixed(4)}),T.appendChild(L),p.defs.appendChild(T),g[A]=1),v(L,u);var R=l*("diamond"!=_&&"oval"!=_);o?(a=i._.arrows.startdx*b||0,s=t.getTotalLength(x.path)-R*b):(a=R*b,s=t.getTotalLength(x.path)-(i._.arrows.enddx*b||0)),(u={})["marker-"+y]="url(#"+A+")",(s||a)&&(u.d=Raphael.getSubpath(x.path,a,s)),v(m,u),i._.arrows[y+"Path"]=k,i._.arrows[y+"Marker"]=A,i._.arrows[y+"dx"]=R,i._.arrows[y+"Type"]=_,i._.arrows[y+"String"]=r}else o?(a=i._.arrows.startdx*b||0,s=t.getTotalLength(x.path)-a):(a=0,s=t.getTotalLength(x.path)-(i._.arrows.enddx*b||0)),i._.arrows[y+"Path"]&&v(m,{d:Raphael.getSubpath(x.path,a,s)}),delete i._.arrows[y+"Path"],delete i._.arrows[y+"Marker"],delete i._.arrows[y+"dx"],delete i._.arrows[y+"Type"],delete i._.arrows[y+"String"];for(u in g)if(g[e](u)&&!g[u]){var P=t._g.doc.getElementById(u);P&&P.parentNode.removeChild(P)}}},b={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},w=function(t,e,i){if(e=b[n(e).toLowerCase()]){for(var r=t.attrs["stroke-width"]||"1",o={round:r,square:r,butt:0}[t.attrs["stroke-linecap"]||i["stroke-linecap"]]||0,a=[],s=e.length;s--;)a[s]=e[s]*r+(s%2?1:-1)*o;v(t.node,{"stroke-dasharray":a.join(",")})}},_=function(i,o){var l=i.node,u=i.attrs,f=l.style.visibility;l.style.visibility="hidden";for(var d in o)if(o[e](d)){if(!t._availableAttrs[e](d))continue;var g=o[d];switch(u[d]=g,d){case"blur":i.blur(g);break;case"href":case"title":case"target":var b=l.parentNode;if("a"!=b.tagName.toLowerCase()){var _=v("a");b.insertBefore(_,l),_.appendChild(l),b=_}"target"==d?b.setAttributeNS(p,"show","blank"==g?"new":g):b.setAttributeNS(p,d,g);break;case"cursor":l.style.cursor=g;break;case"transform":i.transform(g);break;case"arrow-start":x(i,g);break;case"arrow-end":x(i,g,1);break;case"clip-rect":var M=n(g).split(h);if(4==M.length){i.clip&&i.clip.parentNode.parentNode.removeChild(i.clip.parentNode);var C=v("clipPath"),k=v("rect");C.id=t.createUUID(),v(k,{x:M[0],y:M[1],width:M[2],height:M[3]}),C.appendChild(k),i.paper.defs.appendChild(C),v(l,{"clip-path":"url(#"+C.id+")"}),i.clip=k}if(!g){var A=l.getAttribute("clip-path");if(A){var L=t._g.doc.getElementById(A.replace(/(^url\(#|\)$)/g,c));L&&L.parentNode.removeChild(L),v(l,{"clip-path":c}),delete i.clip}}break;case"path":"path"==i.type&&(v(l,{d:g?u.path=t._pathToAbsolute(g):"M0,0"}),i._.dirty=1,i._.arrows&&("startString"in i._.arrows&&x(i,i._.arrows.startString),"endString"in i._.arrows&&x(i,i._.arrows.endString,1)));break;case"width":if(l.setAttribute(d,g),i._.dirty=1,!u.fx)break;d="x",g=u.x;case"x":u.fx&&(g=-u.x-(u.width||0));case"rx":if("rx"==d&&"rect"==i.type)break;case"cx":l.setAttribute(d,g),i.pattern&&m(i),i._.dirty=1;break;case"height":if(l.setAttribute(d,g),i._.dirty=1,!u.fy)break;d="y",g=u.y;case"y":u.fy&&(g=-u.y-(u.height||0));case"ry":if("ry"==d&&"rect"==i.type)break;case"cy":l.setAttribute(d,g),i.pattern&&m(i),i._.dirty=1;break;case"r":"rect"==i.type?v(l,{rx:g,ry:g}):l.setAttribute(d,g),i._.dirty=1;break;case"src":"image"==i.type&&l.setAttributeNS(p,"href",g);break;case"stroke-width":1==i._.sx&&1==i._.sy||(g/=a(s(i._.sx),s(i._.sy))||1),i.paper._vbSize&&(g*=i.paper._vbSize),l.setAttribute(d,g),u["stroke-dasharray"]&&w(i,u["stroke-dasharray"],o),i._.arrows&&("startString"in i._.arrows&&x(i,i._.arrows.startString),"endString"in i._.arrows&&x(i,i._.arrows.endString,1));break;case"stroke-dasharray":w(i,g,o);break;case"fill":var T=n(g).match(t._ISURL);if(T){C=v("pattern");var R=v("image");C.id=t.createUUID(),v(C,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),v(R,{x:0,y:0,"xlink:href":T[1]}),C.appendChild(R),function(e){t._preload(T[1],function(){var t=this.offsetWidth,n=this.offsetHeight;v(e,{width:t,height:n}),v(R,{width:t,height:n}),i.paper.safari()})}(C),i.paper.defs.appendChild(C),v(l,{fill:"url(#"+C.id+")"}),i.pattern=C,i.pattern&&m(i);break}var P=t.getRGB(g);if(P.error){if(("circle"==i.type||"ellipse"==i.type||"r"!=n(g).charAt())&&y(i,g)){if("opacity"in u||"fill-opacity"in u){var F=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,c));if(F){var E=F.getElementsByTagName("stop");v(E[E.length-1],{"stop-opacity":("opacity"in u?u.opacity:1)*("fill-opacity"in u?u["fill-opacity"]:1)})}}u.gradient=g,u.fill="none";break}}else delete o.gradient,delete u.gradient,!t.is(u.opacity,"undefined")&&t.is(o.opacity,"undefined")&&v(l,{opacity:u.opacity}),!t.is(u["fill-opacity"],"undefined")&&t.is(o["fill-opacity"],"undefined")&&v(l,{"fill-opacity":u["fill-opacity"]});P[e]("opacity")&&v(l,{"fill-opacity":P.opacity>1?P.opacity/100:P.opacity});case"stroke":P=t.getRGB(g),l.setAttribute(d,P.hex),"stroke"==d&&P[e]("opacity")&&v(l,{"stroke-opacity":P.opacity>1?P.opacity/100:P.opacity}),"stroke"==d&&i._.arrows&&("startString"in i._.arrows&&x(i,i._.arrows.startString),"endString"in i._.arrows&&x(i,i._.arrows.endString,1));break;case"gradient":("circle"==i.type||"ellipse"==i.type||"r"!=n(g).charAt())&&y(i,g);break;case"opacity":u.gradient&&!u[e]("stroke-opacity")&&v(l,{"stroke-opacity":g>1?g/100:g});case"fill-opacity":if(u.gradient){(F=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,c)))&&(E=F.getElementsByTagName("stop"),v(E[E.length-1],{"stop-opacity":g}));break}default:"font-size"==d&&(g=r(g,10)+"px");var z=d.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});l.style[z]=g,i._.dirty=1,l.setAttribute(d,g)}}S(i,o),l.style.visibility=f},M=1.2,S=function(i,o){if("text"==i.type&&(o[e]("text")||o[e]("font")||o[e]("font-size")||o[e]("x")||o[e]("y"))){var a=i.attrs,s=i.node,l=s.firstChild?r(t._g.doc.defaultView.getComputedStyle(s.firstChild,c).getPropertyValue("font-size"),10):10;if(o[e]("text")){for(a.text=o.text;s.firstChild;)s.removeChild(s.firstChild);for(var h,u=n(o.text).split("\n"),f=[],p=0,d=u.length;p<d;p++)h=v("tspan"),p&&v(h,{dy:l*M,x:a.x}),h.appendChild(t._g.doc.createTextNode(u[p])),s.appendChild(h),f[p]=h}else for(p=0,d=(f=s.getElementsByTagName("tspan")).length;p<d;p++)p?v(f[p],{dy:l*M,x:a.x}):v(f[0],{dy:0});v(s,{x:a.x,y:a.y}),i._.dirty=1;var g=i._getBBox(),y=a.y-(g.y+g.height/2);y&&t.is(y,"finite")&&v(f[0],{dy:y})}},C=function(e,n){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.matrix=t.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},k=t.el;C.prototype=k,k.constructor=C,t._engine.path=function(t,e){var n=v("path");e.canvas&&e.canvas.appendChild(n);var i=new C(n,e);return i.type="path",_(i,{fill:"none",stroke:"#000",path:t}),i},k.rotate=function(t,e,r){if(this.removed)return this;if((t=n(t).split(h)).length-1&&(e=i(t[1]),r=i(t[2])),t=i(t[0]),null==r&&(e=r),null==e||null==r){var o=this.getBBox(1);e=o.x+o.width/2,r=o.y+o.height/2}return this.transform(this._.transform.concat([["r",t,e,r]])),this},k.scale=function(t,e,r,o){if(this.removed)return this;if((t=n(t).split(h)).length-1&&(e=i(t[1]),r=i(t[2]),o=i(t[3])),t=i(t[0]),null==e&&(e=t),null==o&&(r=o),null==r||null==o)var a=this.getBBox(1);return r=null==r?a.x+a.width/2:r,o=null==o?a.y+a.height/2:o,this.transform(this._.transform.concat([["s",t,e,r,o]])),this},k.translate=function(t,e){return this.removed?this:((t=n(t).split(h)).length-1&&(e=i(t[1])),t=i(t[0])||0,e=+e||0,this.transform(this._.transform.concat([["t",t,e]])),this)},k.transform=function(n){var i=this._;if(null==n)return i.transform;if(t._extractTransform(this,n),this.clip&&v(this.clip,{transform:this.matrix.invert()}),this.pattern&&m(this),this.node&&v(this.node,{transform:this.matrix}),1!=i.sx||1!=i.sy){var r=this.attrs[e]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":r})}return this},k.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},k.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},k.remove=function(){if(!this.removed&&this.node.parentNode){var e=this.paper;e.__set__&&e.__set__.exclude(this),u.unbind("raphael.*.*."+this.id),this.gradient&&e.defs.removeChild(this.gradient),t._tear(this,e),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var n in this)this[n]="function"==typeof this[n]?t._removedFactory(n):null;this.removed=!0}},k._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(n){}finally{e=e||{}}return t&&this.hide(),e},k.attr=function(n,i){if(this.removed)return this;if(null==n){var r={};for(var o in this.attrs)this.attrs[e](o)&&(r[o]=this.attrs[o]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==i&&t.is(n,"string")){if("fill"==n&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==n)return this._.transform;for(var a=n.split(h),s={},l=0,c=a.length;l<c;l++)(n=a[l])in this.attrs?s[n]=this.attrs[n]:t.is(this.paper.customAttributes[n],"function")?s[n]=this.paper.customAttributes[n].def:s[n]=t._availableAttrs[n];return c-1?s:s[a[0]]}if(null==i&&t.is(n,"array")){for(s={},l=0,c=n.length;l<c;l++)s[n[l]]=this.attr(n[l]);return s}if(null!=i){var f={};f[n]=i}else null!=n&&t.is(n,"object")&&(f=n);for(var p in f)u("raphael.attr."+p+"."+this.id,this,f[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[e](p)&&f[e](p)&&t.is(this.paper.customAttributes[p],"function")){var d=this.paper.customAttributes[p].apply(this,[].concat(f[p]));this.attrs[p]=f[p];for(var g in d)d[e](g)&&(f[g]=d[g])}return _(this,f),this},k.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var e=this.paper;return e.top!=this&&t._tofront(this,e),this},k.toBack=function(){if(this.removed)return this;var e=this.node.parentNode;"a"==e.tagName.toLowerCase()?e.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):e.firstChild!=this.node&&e.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper);this.paper;return this},k.insertAfter=function(e){if(this.removed)return this;var n=e.node||e[e.length-1].node;return n.nextSibling?n.parentNode.insertBefore(this.node,n.nextSibling):n.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this},k.insertBefore=function(e){if(this.removed)return this;var n=e.node||e[0].node;return n.parentNode.insertBefore(this.node,n),t._insertbefore(this,e,this.paper),this},k.blur=function(e){var n=this;if(0!=+e){var i=v("filter"),r=v("feGaussianBlur");n.attrs.blur=e,i.id=t.createUUID(),v(r,{stdDeviation:+e||1.5}),i.appendChild(r),n.paper.defs.appendChild(i),n._blur=i,v(n.node,{filter:"url(#"+i.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter")},t._engine.circle=function(t,e,n,i){var r=v("circle");t.canvas&&t.canvas.appendChild(r);var o=new C(r,t);return o.attrs={cx:e,cy:n,r:i,fill:"none",stroke:"#000"},o.type="circle",v(r,o.attrs),o},t._engine.rect=function(t,e,n,i,r,o){var a=v("rect");t.canvas&&t.canvas.appendChild(a);var s=new C(a,t);return s.attrs={x:e,y:n,width:i,height:r,r:o||0,rx:o||0,ry:o||0,fill:"none",stroke:"#000"},s.type="rect",v(a,s.attrs),s},t._engine.ellipse=function(t,e,n,i,r){var o=v("ellipse");t.canvas&&t.canvas.appendChild(o);var a=new C(o,t);return a.attrs={cx:e,cy:n,rx:i,ry:r,fill:"none",stroke:"#000"},a.type="ellipse",v(o,a.attrs),a},t._engine.image=function(t,e,n,i,r,o){var a=v("image");v(a,{x:n,y:i,width:r,height:o,preserveAspectRatio:"none"}),a.setAttributeNS(p,"href",e),t.canvas&&t.canvas.appendChild(a);var s=new C(a,t);return s.attrs={x:n,y:i,width:r,height:o,src:e},s.type="image",s},t._engine.text=function(e,n,i,r){var o=v("text");e.canvas&&e.canvas.appendChild(o);var a=new C(o,e);return a.attrs={x:n,y:i,"text-anchor":"middle",text:r,font:t._availableAttrs.font,stroke:"none",fill:"#000"},a.type="text",_(a,a.attrs),a},t._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},t._engine.create=function(){var e=t._getContainer.apply(0,arguments),n=e&&e.container,i=e.x,r=e.y,o=e.width,a=e.height;if(!n)throw new Error("SVG container not found.");var s,l=v("svg"),h="overflow:hidden;";return i=i||0,r=r||0,o=o||512,a=a||342,v(l,{height:a,version:1.1,width:o,xmlns:"http://www.w3.org/2000/svg"}),1==n?(l.style.cssText=h+"position:absolute;left:"+i+"px;top:"+r+"px",t._g.doc.body.appendChild(l),s=1):(l.style.cssText=h+"position:relative",n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l)),n=new t._Paper,n.width=o,n.height=a,n.canvas=l,n.clear(),n._left=n._top=0,s&&(n.renderfix=function(){}),n.renderfix(),n},t._engine.setViewBox=function(t,e,n,i,r){u("raphael.setViewBox",this,this._viewBox,[t,e,n,i,r]);var o,s,l=a(n/this.width,i/this.height),h=this.top,c=r?"meet":"xMinYMin";for(null==t?(this._vbSize&&(l=1),delete this._vbSize,o="0 0 "+this.width+f+this.height):(this._vbSize=l,o=t+f+e+f+n+f+i),v(this.canvas,{viewBox:o,preserveAspectRatio:c});l&&h;)s="stroke-width"in h.attrs?h.attrs["stroke-width"]:1,h.attr({"stroke-width":s}),h._.dirty=1,h._.dirtyT=1,h=h.prev;return this._viewBox=[t,e,n,i,!!r],this},t.prototype.renderfix=function(){var t,e=this.canvas,n=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(i){t=e.createSVGMatrix()}var r=-t.e%1,o=-t.f%1;(r||o)&&(r&&(this._left=(this._left+r)%1,n.left=this._left+"px"),o&&(this._top=(this._top+o)%1,n.top=this._top+"px"))},t.prototype.clear=function(){t.eve("raphael.clear",this);for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=v("desc")).appendChild(t._g.doc.createTextNode("Created with Rapha\xebl "+t.version)),e.appendChild(this.desc),e.appendChild(this.defs=v("defs"))},t.prototype.remove=function(){u("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null};var A=t.st;for(var L in k)k[e](L)&&!A[e](L)&&(A[L]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t].apply(n,e)})}}(L))}(window.Raphael),window.Raphael.vml&&function(t){var e="hasOwnProperty",n=String,i=parseFloat,r=Math,o=r.round,a=r.max,s=r.min,l=r.abs,h="fill",u=/[, ]+/,c=t.eve,f=" progid:DXImageTransform.Microsoft",p=" ",d="",g={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},v=/([clmz]),?([^clmz]*)/gi,y=/ progid:\S+Blur\([^\)]+\)/g,m=/-?[^,\s-]+/g,x="position:absolute;left:0;top:0;width:1px;height:1px",b=21600,w={path:1,rect:1,image:1},_={circle:1,ellipse:1},M=function(e){var i=/[ahqstv]/gi,r=t._pathToAbsolute;if(n(e).match(i)&&(r=t._path2curve),i=/[clmz]/g,r==t._pathToAbsolute&&!n(e).match(i)){var a=n(e).replace(v,function(t,e,n){var i=[],r="m"==e.toLowerCase(),a=g[e];return n.replace(m,function(t){r&&2==i.length&&(a+=i+g["m"==e?"l":"L"],i=[]),i.push(o(t*b))}),a+i});return a}var s,l,h=r(e);a=[];for(var u=0,c=h.length;u<c;u++){s=h[u],"z"==(l=h[u][0].toLowerCase())&&(l="x");for(var f=1,y=s.length;f<y;f++)l+=o(s[f]*b)+(f!=y-1?",":d);a.push(l)}return a.join(p)},S=function(e,n,i){var r=t.matrix();return r.rotate(-e,.5,.5),{dx:r.x(n,i),dy:r.y(n,i)}},C=function(t,e,n,i,r,o){var a=t._,s=t.matrix,u=a.fillpos,c=t.node,f=c.style,d=1,g="",v=b/e,y=b/n;if(f.visibility="hidden",e&&n){if(c.coordsize=l(v)+p+l(y),f.rotation=o*(e*n<0?-1:1),o){var m=S(o,i,r);i=m.dx,r=m.dy}if(e<0&&(g+="x"),n<0&&(g+=" y")&&(d=-1),f.flip=g,c.coordorigin=i*-v+p+r*-y,u||a.fillsize){var x=c.getElementsByTagName(h);x=x&&x[0],c.removeChild(x),u&&(m=S(o,s.x(u[0],u[1]),s.y(u[0],u[1])),x.position=m.dx*d+p+m.dy*d),a.fillsize&&(x.size=a.fillsize[0]*l(e)+p+a.fillsize[1]*l(n)),c.appendChild(x)}f.visibility="visible"}};t.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version};var k=function(t,e,i){for(var r=n(e).toLowerCase().split("-"),o=i?"end":"start",a=r.length,s="classic",l="medium",h="medium";a--;)switch(r[a]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":s=r[a];break;case"wide":case"narrow":h=r[a];break;case"long":case"short":l=r[a]}var u=t.node.getElementsByTagName("stroke")[0];u[o+"arrow"]=s,u[o+"arrowlength"]=l,u[o+"arrowwidth"]=h},A=function(r,l){r.attrs=r.attrs||{};var c=r.node,f=r.attrs,g=c.style,v=w[r.type]&&(l.x!=f.x||l.y!=f.y||l.width!=f.width||l.height!=f.height||l.cx!=f.cx||l.cy!=f.cy||l.rx!=f.rx||l.ry!=f.ry||l.r!=f.r),y=_[r.type]&&(f.cx!=l.cx||f.cy!=l.cy||f.r!=l.r||f.rx!=l.rx||f.ry!=l.ry),m=r;for(var x in l)l[e](x)&&(f[x]=l[x]);if(v&&(f.path=t._getPath[r.type](r),r._.dirty=1),l.href&&(c.href=l.href),l.title&&(c.title=l.title),l.target&&(c.target=l.target),l.cursor&&(g.cursor=l.cursor),"blur"in l&&r.blur(l.blur),(l.path&&"path"==r.type||v)&&(c.path=M(~n(f.path).toLowerCase().indexOf("r")?t._pathToAbsolute(f.path):f.path),"image"==r.type&&(r._.fillpos=[f.x,f.y],r._.fillsize=[f.width,f.height],C(r,1,1,0,0,0))),"transform"in l&&r.transform(l.transform),y){var S=+f.cx,A=+f.cy,T=+f.rx||+f.r||0,R=+f.ry||+f.r||0;c.path=t.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",o((S-T)*b),o((A-R)*b),o((S+T)*b),o((A+R)*b),o(S*b))}if("clip-rect"in l){var F=n(l["clip-rect"]).split(u);if(4==F.length){F[2]=+F[2]+ +F[0],F[3]=+F[3]+ +F[1];var E=c.clipRect||t._g.doc.createElement("div"),z=E.style;z.clip=t.format("rect({1}px {2}px {3}px {0}px)",F),c.clipRect||(z.position="absolute",z.top=0,z.left=0,z.width=r.paper.width+"px",z.height=r.paper.height+"px",c.parentNode.insertBefore(E,c),E.appendChild(c),c.clipRect=E)}l["clip-rect"]||c.clipRect&&(c.clipRect.style.clip="auto")}if(r.textpath){var N=r.textpath.style;l.font&&(N.font=l.font),l["font-family"]&&(N.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,d)+'"'),l["font-size"]&&(N.fontSize=l["font-size"]),l["font-weight"]&&(N.fontWeight=l["font-weight"]),l["font-style"]&&(N.fontStyle=l["font-style"])}if("arrow-start"in l&&k(m,l["arrow-start"]),"arrow-end"in l&&k(m,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var B=c.getElementsByTagName(h);if(!(B=B&&B[0])&&(B=P(h)),"image"==r.type&&l.src&&(B.src=l.src),l.fill&&(B.on=!0),null!=B.on&&"none"!=l.fill&&null!==l.fill||(B.on=!1),B.on&&l.fill){var I=n(l.fill).match(t._ISURL);if(I){B.parentNode==c&&c.removeChild(B),B.rotate=!0,B.src=I[1],B.type="tile";var D=r.getBBox(1);B.position=D.x+p+D.y,r._.fillpos=[D.x,D.y],t._preload(I[1],function(){r._.fillsize=[this.offsetWidth,this.offsetHeight]})}else B.color=t.getRGB(l.fill).hex,B.src=d,B.type="solid",t.getRGB(l.fill).error&&(m.type in{circle:1,ellipse:1}||"r"!=n(l.fill).charAt())&&L(m,l.fill,B)&&(f.fill="none",f.gradient=l.fill,B.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var H=((+f["fill-opacity"]+1||2)-1)*((+f.opacity+1||2)-1)*((+t.getRGB(l.fill).o+1||2)-1);H=s(a(H,0),1),B.opacity=H,B.src&&(B.color="none")}c.appendChild(B);var W=c.getElementsByTagName("stroke")&&c.getElementsByTagName("stroke")[0],O=!1;!W&&(O=W=P("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(W.on=!0),("none"==l.stroke||null===l.stroke||null==W.on||0==l.stroke||0==l["stroke-width"])&&(W.on=!1);var q=t.getRGB(l.stroke);W.on&&l.stroke&&(W.color=q.hex),H=((+f["stroke-opacity"]+1||2)-1)*((+f.opacity+1||2)-1)*((+q.o+1||2)-1);var j=.75*(i(l["stroke-width"])||1);if(H=s(a(H,0),1),null==l["stroke-width"]&&(j=f["stroke-width"]),l["stroke-width"]&&(W.weight=j),j&&j<1&&(H*=j)&&(W.weight=1),W.opacity=H,l["stroke-linejoin"]&&(W.joinstyle=l["stroke-linejoin"]||"miter"),W.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(W.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),l["stroke-dasharray"]){var Y={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};W.dashstyle=Y[e](l["stroke-dasharray"])?Y[l["stroke-dasharray"]]:d}O&&c.appendChild(W)}if("text"==m.type){m.paper.canvas.style.display=d;var X=m.paper.span,V=100,U=f.font&&f.font.match(/\d+(?:\.\d*)?(?=px)/);g=X.style,f.font&&(g.font=f.font),f["font-family"]&&(g.fontFamily=f["font-family"]),f["font-weight"]&&(g.fontWeight=f["font-weight"]),f["font-style"]&&(g.fontStyle=f["font-style"]),U=i(f["font-size"]||U&&U[0])||10,g.fontSize=U*V+"px",m.textpath.string&&(X.innerHTML=n(m.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var G=X.getBoundingClientRect();m.W=f.w=(G.right-G.left)/V,m.H=f.h=(G.bottom-G.top)/V,m.X=f.x,m.Y=f.y+m.H/2,("x"in l||"y"in l)&&(m.path.v=t.format("m{0},{1}l{2},{1}",o(f.x*b),o(f.y*b),o(f.x*b)+1));for(var $=["x","y","text","font","font-family","font-weight","font-style","font-size"],Z=0,Q=$.length;Z<Q;Z++)if($[Z]in l){m._.dirty=1;break}switch(f["text-anchor"]){case"start":m.textpath.style["v-text-align"]="left",m.bbx=m.W/2;break;case"end":m.textpath.style["v-text-align"]="right",m.bbx=-m.W/2;break;default:m.textpath.style["v-text-align"]="center",m.bbx=0}m.textpath.style["v-text-kern"]=!0}},L=function(e,o,a){e.attrs=e.attrs||{};e.attrs;var s=Math.pow,l="linear",h=".5 .5";if(e.attrs.gradient=o,o=n(o).replace(t._radial_gradient,function(t,e,n){return l="radial",e&&n&&(e=i(e),n=i(n),s(e-.5,2)+s(n-.5,2)>.25&&(n=r.sqrt(.25-s(e-.5,2))*(2*(n>.5)-1)+.5),h=e+p+n),d}),o=o.split(/\s*\-\s*/),"linear"==l){var u=o.shift();if(u=-i(u),isNaN(u))return null}var c=t._parseDots(o);if(!c)return null;if(e=e.shape||e.node,c.length){e.removeChild(a),a.on=!0,a.method="none",a.color=c[0].color,a.color2=c[c.length-1].color;for(var f=[],g=0,v=c.length;g<v;g++)c[g].offset&&f.push(c[g].offset+p+c[g].color);a.colors=f.length?f.join():"0% "+a.color,"radial"==l?(a.type="gradientTitle",a.focus="100%",a.focussize="0 0",a.focusposition=h,a.angle=0):(a.type="gradient",a.angle=(270-u)%360),e.appendChild(a)}return 1},T=function(e,n){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=n,this.matrix=t.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},R=t.el;T.prototype=R,R.constructor=T,R.transform=function(e){if(null==e)return this._.transform;var i,r=this.paper._viewBoxShift,o=r?"s"+[r.scale,r.scale]+"-1-1t"+[r.dx,r.dy]:d;r&&(i=e=n(e).replace(/\.{3}|\u2026/g,this._.transform||d)),t._extractTransform(this,o+e);var a,s=this.matrix.clone(),l=this.skew,h=this.node,u=~n(this.attrs.fill).indexOf("-"),c=!n(this.attrs.fill).indexOf("url(");if(s.translate(-.5,-.5),c||u||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",a=s.split(),u&&a.noRotation||!a.isSimple){h.style.filter=s.toFilter();var f=this.getBBox(),g=this.getBBox(1),v=f.x-g.x,y=f.y-g.y;h.coordorigin=v*-b+p+y*-b,C(this,1,1,v,y,0)}else h.style.filter=d,C(this,a.scalex,a.scaley,a.dx,a.dy,a.rotate);else h.style.filter=d,l.matrix=n(s),l.offset=s.offset()
;return i&&(this._.transform=i),this},R.rotate=function(t,e,r){if(this.removed)return this;if(null!=t){if((t=n(t).split(u)).length-1&&(e=i(t[1]),r=i(t[2])),t=i(t[0]),null==r&&(e=r),null==e||null==r){var o=this.getBBox(1);e=o.x+o.width/2,r=o.y+o.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,e,r]])),this}},R.translate=function(t,e){return this.removed?this:((t=n(t).split(u)).length-1&&(e=i(t[1])),t=i(t[0])||0,e=+e||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=e),this.transform(this._.transform.concat([["t",t,e]])),this)},R.scale=function(t,e,r,o){if(this.removed)return this;if((t=n(t).split(u)).length-1&&(e=i(t[1]),r=i(t[2]),o=i(t[3]),isNaN(r)&&(r=null),isNaN(o)&&(o=null)),t=i(t[0]),null==e&&(e=t),null==o&&(r=o),null==r||null==o)var a=this.getBBox(1);return r=null==r?a.x+a.width/2:r,o=null==o?a.y+a.height/2:o,this.transform(this._.transform.concat([["s",t,e,r,o]])),this._.dirtyT=1,this},R.hide=function(){return!this.removed&&(this.node.style.display="none"),this},R.show=function(){return!this.removed&&(this.node.style.display=d),this},R._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},R.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),t.eve.unbind("raphael.*.*."+this.id),t._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;this.removed=!0}},R.attr=function(n,i){if(this.removed)return this;if(null==n){var r={};for(var o in this.attrs)this.attrs[e](o)&&(r[o]=this.attrs[o]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==i&&t.is(n,"string")){if(n==h&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var a=n.split(u),s={},l=0,f=a.length;l<f;l++)(n=a[l])in this.attrs?s[n]=this.attrs[n]:t.is(this.paper.customAttributes[n],"function")?s[n]=this.paper.customAttributes[n].def:s[n]=t._availableAttrs[n];return f-1?s:s[a[0]]}if(this.attrs&&null==i&&t.is(n,"array")){for(s={},l=0,f=n.length;l<f;l++)s[n[l]]=this.attr(n[l]);return s}var p;null!=i&&(p={},p[n]=i),null==i&&t.is(n,"object")&&(p=n);for(var d in p)c("raphael.attr."+d+"."+this.id,this,p[d]);if(p){for(d in this.paper.customAttributes)if(this.paper.customAttributes[e](d)&&p[e](d)&&t.is(this.paper.customAttributes[d],"function")){var g=this.paper.customAttributes[d].apply(this,[].concat(p[d]));this.attrs[d]=p[d];for(var v in g)g[e](v)&&(p[v]=g[v])}p.text&&"text"==this.type&&(this.textpath.string=p.text),A(this,p)}return this},R.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&t._tofront(this,this.paper),this},R.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper)),this)},R.insertAfter=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this)},R.insertBefore=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),t._insertbefore(this,e,this.paper),this)},R.blur=function(e){var n=this.node.runtimeStyle,i=n.filter;i=i.replace(y,d),0!=+e?(this.attrs.blur=e,n.filter=i+p+f+".Blur(pixelradius="+(+e||1.5)+")",n.margin=t.format("-{0}px 0 0 -{0}px",o(+e||1.5))):(n.filter=i,n.margin=0,delete this.attrs.blur)},t._engine.path=function(t,e){var n=P("shape");n.style.cssText=x,n.coordsize=b+p+b,n.coordorigin=e.coordorigin;var i=new T(n,e),r={fill:"none",stroke:"#000"};t&&(r.path=t),i.type="path",i.path=[],i.Path=d,A(i,r),e.canvas.appendChild(n);var o=P("skew");return o.on=!0,n.appendChild(o),i.skew=o,i.transform(d),i},t._engine.rect=function(e,n,i,r,o,a){var s=t._rectPath(n,i,r,o,a),l=e.path(s),h=l.attrs;return l.X=h.x=n,l.Y=h.y=i,l.W=h.width=r,l.H=h.height=o,h.r=a,h.path=s,l.type="rect",l},t._engine.ellipse=function(t,e,n,i,r){var o=t.path();o.attrs;return o.X=e-i,o.Y=n-r,o.W=2*i,o.H=2*r,o.type="ellipse",A(o,{cx:e,cy:n,rx:i,ry:r}),o},t._engine.circle=function(t,e,n,i){var r=t.path();r.attrs;return r.X=e-i,r.Y=n-i,r.W=r.H=2*i,r.type="circle",A(r,{cx:e,cy:n,r:i}),r},t._engine.image=function(e,n,i,r,o,a){var s=t._rectPath(i,r,o,a),l=e.path(s).attr({stroke:"none"}),u=l.attrs,c=l.node,f=c.getElementsByTagName(h)[0];return u.src=n,l.X=u.x=i,l.Y=u.y=r,l.W=u.width=o,l.H=u.height=a,u.path=s,l.type="image",f.parentNode==c&&c.removeChild(f),f.rotate=!0,f.src=n,f.type="tile",l._.fillpos=[i,r],l._.fillsize=[o,a],c.appendChild(f),C(l,1,1,0,0,0),l},t._engine.text=function(e,i,r,a){var s=P("shape"),l=P("path"),h=P("textpath");i=i||0,r=r||0,a=a||"",l.v=t.format("m{0},{1}l{2},{1}",o(i*b),o(r*b),o(i*b)+1),l.textpathok=!0,h.string=n(a),h.on=!0,s.style.cssText=x,s.coordsize=b+p+b,s.coordorigin="0 0";var u=new T(s,e),c={fill:"#000",stroke:"none",font:t._availableAttrs.font,text:a};u.shape=s,u.path=l,u.textpath=h,u.type="text",u.attrs.text=n(a),u.attrs.x=i,u.attrs.y=r,u.attrs.w=1,u.attrs.h=1,A(u,c),s.appendChild(h),s.appendChild(l),e.canvas.appendChild(s);var f=P("skew");return f.on=!0,s.appendChild(f),u.skew=f,u.transform(d),u},t._engine.setSize=function(e,n){var i=this.canvas.style;return this.width=e,this.height=n,e==+e&&(e+="px"),n==+n&&(n+="px"),i.width=e,i.height=n,i.clip="rect(0 "+e+" "+n+" 0)",this._viewBox&&t._engine.setViewBox.apply(this,this._viewBox),this},t._engine.setViewBox=function(e,n,i,r,o){t.eve("raphael.setViewBox",this,this._viewBox,[e,n,i,r,o]);var s,l,h=this.width,u=this.height,c=1/a(i/h,r/u);return o&&(s=u/r,l=h/i,i*s<h&&(e-=(h-i*s)/2/s),r*l<u&&(n-=(u-r*l)/2/l)),this._viewBox=[e,n,i,r,!!o],this._viewBoxShift={dx:-e,dy:-n,scale:c},this.forEach(function(t){t.transform("...")}),this};var P;t._engine.initWin=function(t){var e=t.document;e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),P=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(n){P=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},t._engine.initWin(t._g.win),t._engine.create=function(){var e=t._getContainer.apply(0,arguments),n=e.container,i=e.height,r=e.width,o=e.x,a=e.y;if(!n)throw new Error("VML container not found.");var s=new t._Paper,l=s.canvas=t._g.doc.createElement("div"),h=l.style;return o=o||0,a=a||0,r=r||512,i=i||342,s.width=r,s.height=i,r==+r&&(r+="px"),i==+i&&(i+="px"),s.coordsize=1e3*b+p+1e3*b,s.coordorigin="0 0",s.span=t._g.doc.createElement("span"),s.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(s.span),h.cssText=t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",r,i),1==n?(t._g.doc.body.appendChild(l),h.left=o+"px",h.top=a+"px",h.position="absolute"):n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l),s.renderfix=function(){},s},t.prototype.clear=function(){t.eve("raphael.clear",this),this.canvas.innerHTML=d,this.span=t._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},t.prototype.remove=function(){t.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;return!0};var F=t.st;for(var E in R)R[e](E)&&!F[e](E)&&(F[E]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t].apply(n,e)})}}(E))}(window.Raphael),function(t,e,n){!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):jQuery&&!jQuery.fn.sparkline&&t(jQuery)}(function(i){"use strict";var r,o,a,s,l,h,u,c,f,p,d,g,v,y,m,x,b,w,_,M,S,C,k,A,L,T,R,P,F,E,z={},N=0;r=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:n,normalRangeMax:n,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:n,chartRangeMax:n,chartRangeMinX:n,chartRangeMaxX:n,tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:n,nullColor:n,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:n,chartRangeMin:n,chartRangeClip:!1,colorMap:n,tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:n,thresholdValue:0,chartRangeMax:n,chartRangeMin:n,chartRangeClip:!1,tooltipFormat:new a("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:n,tooltipFormat:new a("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:n,targetColor:"#4a2",chartRangeMax:n,chartRangeMin:n,tooltipFormat:new a("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},L='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',o=function(){var t,e;return t=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(t.prototype=i.extend(new arguments[0],arguments[arguments.length-1]),t._super=arguments[0].prototype):t.prototype=arguments[arguments.length-1],arguments.length>2&&((e=Array.prototype.slice.call(arguments,1,-1)).unshift(t.prototype),i.extend.apply(i,e))):t.prototype=arguments[0],t.prototype.cls=t,t},i.SPFormatClass=a=o({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(t,e){this.format=t,this.fclass=e},render:function(t,e,i){var r,o,a,s,l,h=this,u=t;return this.format.replace(this.fre,function(){return o=arguments[1],a=arguments[3],(r=h.precre.exec(o))?(l=r[2],o=r[1]):l=!1,(s=u[o])===n?"":a&&e&&e[a]?e[a].get?e[a].get(s)||s:e[a][s]||s:(f(s)&&(s=i.get("numberFormatter")?i.get("numberFormatter")(s):v(s,l,i.get("numberDigitGroupCount"),i.get("numberDigitGroupSep"),i.get("numberDecimalMark"))),s)})}}),i.spformat=function(t,e){return new a(t,e)},s=function(t,e,n){return t<e?e:t>n?n:t},l=function(t,n){var i;return 2===n?(i=e.floor(t.length/2),t.length%2?t[i]:(t[i-1]+t[i])/2):t.length%2?(i=(t.length*n+n)/4)%1?(t[e.floor(i)]+t[e.floor(i)-1])/2:t[i-1]:(i=(t.length*n+2)/4)%1?(t[e.floor(i)]+t[e.floor(i)-1])/2:t[i-1]},h=function(t){var e;switch(t){case"undefined":t=n;break;case"null":t=null;break;case"true":t=!0;break;case"false":t=!1;break;default:t==(e=parseFloat(t))&&(t=e)}return t},u=function(t){var e,n=[];for(e=t.length;e--;)n[e]=h(t[e]);return n},c=function(t,e){var n,i,r=[];for(n=0,i=t.length;n<i;n++)t[n]!==e&&r.push(t[n]);return r},f=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},v=function(t,e,n,r,o){var a,s;for(t=(!1===e?parseFloat(t).toString():t.toFixed(e)).split(""),(a=(a=i.inArray(".",t))<0?t.length:a)<t.length&&(t[a]=o),s=a-n;s>0;s-=n)t.splice(s,0,r);return t.join("")},p=function(t,e,n){var i;for(i=e.length;i--;)if((!n||null!==e[i])&&e[i]!==t)return!1;return!0},g=function(t){return i.isArray(t)?t:[t]},d=function(e){var n;t.createStyleSheet?t.createStyleSheet().cssText=e:(n=t.createElement("style"),n.type="text/css",t.getElementsByTagName("head")[0].appendChild(n),n["string"==typeof t.body.style.WebkitAppearance?"innerText":"innerHTML"]=e)},i.fn.simpledraw=function(e,r,o,a){var s,l;if(o&&(s=this.data("_jqs_vcanvas")))return s;if(!1===i.fn.sparkline.canvas)return!1;if(i.fn.sparkline.canvas===n){var h=t.createElement("canvas");if(h.getContext&&h.getContext("2d"))i.fn.sparkline.canvas=function(t,e,n,i){return new P(t,e,n,i)};else{if(!t.namespaces||t.namespaces.v)return i.fn.sparkline.canvas=!1,!1;t.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),i.fn.sparkline.canvas=function(t,e,n){return new F(t,e,n)}}}return e===n&&(e=i(this).innerWidth()),r===n&&(r=i(this).innerHeight()),s=i.fn.sparkline.canvas(e,r,this,a),(l=i(this).data("_jqs_mhandler"))&&l.registerCanvas(s),s},i.fn.cleardraw=function(){var t=this.data("_jqs_vcanvas");t&&t.reset()},i.RangeMapClass=y=o({init:function(t){var e,n,i=[];for(e in t)t.hasOwnProperty(e)&&"string"==typeof e&&e.indexOf(":")>-1&&(n=e.split(":"),n[0]=0===n[0].length?-Infinity:parseFloat(n[0]),n[1]=0===n[1].length?Infinity:parseFloat(n[1]),n[2]=t[e],i.push(n));this.map=t,this.rangelist=i||!1},get:function(t){var e,i,r,o=this.rangelist;if((r=this.map[t])!==n)return r;if(o)for(e=o.length;e--;)if((i=o[e])[0]<=t&&i[1]>=t)return i[2];return n}}),i.range_map=function(t){return new y(t)},m=o({init:function(t,e){var n=i(t);this.$el=n,this.options=e,this.currentPageX=0,this.currentPageY=0,this.el=t,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!e.get("disableTooltips"),this.highlightEnabled=!e.get("disableHighlight")},registerSparkline:function(t){this.splist.push(t),this.over&&this.updateDisplay()},registerCanvas:function(t){var e=i(t.canvas);this.canvas=t,this.$canvas=e,e.mouseenter(i.proxy(this.mouseenter,this)),e.mouseleave(i.proxy(this.mouseleave,this)),e.click(i.proxy(this.mouseclick,this))},reset:function(t){this.splist=[],this.tooltip&&t&&(this.tooltip.remove(),this.tooltip=n)},mouseclick:function(t){var e=i.Event("sparklineClick");e.originalEvent=t,e.sparklines=this.splist,this.$el.trigger(e)},mouseenter:function(e){i(t.body).unbind("mousemove.jqs"),i(t.body).bind("mousemove.jqs",i.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=e.pageX,this.currentPageY=e.pageY,this.currentEl=e.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new x(this.options),this.tooltip.updatePosition(e.pageX,e.pageY)),this.updateDisplay()},mouseleave:function(){i(t.body).unbind("mousemove.jqs");var e,n=this.splist,r=n.length,o=!1;for(this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null),e=0;e<r;e++)n[e].clearRegionHighlight()&&(o=!0);o&&this.canvas.render()},mousemove:function(t){this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,this.tooltip&&this.tooltip.updatePosition(t.pageX,t.pageY),this.updateDisplay()},updateDisplay:function(){var t,e,n,r,o,a=this.splist,s=a.length,l=!1,h=this.$canvas.offset(),u=this.currentPageX-h.left,c=this.currentPageY-h.top;if(this.over){for(n=0;n<s;n++)e=a[n],(r=e.setRegionHighlight(this.currentEl,u,c))&&(l=!0);if(l){if(o=i.Event("sparklineRegionChange"),o.sparklines=this.splist,this.$el.trigger(o),this.tooltip){for(t="",n=0;n<s;n++)e=a[n],t+=e.getCurrentRegionTooltip();this.tooltip.setContent(t)}this.disableHighlight||this.canvas.render()}null===r&&this.mouseleave()}}}),x=o({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(e){var n,r=e.get("tooltipClassname","jqstooltip"),o=this.sizeStyle;this.container=e.get("tooltipContainer")||t.body,this.tooltipOffsetX=e.get("tooltipOffsetX",10),this.tooltipOffsetY=e.get("tooltipOffsetY",12),i("#jqssizetip").remove(),i("#jqstooltip").remove(),this.sizetip=i("<div/>",{id:"jqssizetip",style:o,"class":r}),this.tooltip=i("<div/>",{id:"jqstooltip","class":r}).appendTo(this.container),n=this.tooltip.offset(),this.offsetLeft=n.left,this.offsetTop=n.top,this.hidden=!0,i(window).unbind("resize.jqs scroll.jqs"),i(window).bind("resize.jqs scroll.jqs",i.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=i(window).scrollTop(),this.scrollLeft=i(window).scrollLeft(),this.scrollRight=this.scrollLeft+i(window).width(),this.updatePosition()},getSize:function(t){this.sizetip.html(t).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(t){if(!t)return this.tooltip.css("visibility","hidden"),void(this.hidden=!0);this.getSize(t),this.tooltip.html(t).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(t,e){if(t===n){if(this.mousex===n)return;t=this.mousex-this.offsetLeft,e=this.mousey-this.offsetTop}else this.mousex=t-=this.offsetLeft,this.mousey=e-=this.offsetTop;this.height&&this.width&&!this.hidden&&(e-=this.height+this.tooltipOffsetY,t+=this.tooltipOffsetX,e<this.scrollTop&&(e=this.scrollTop),t<this.scrollLeft?t=this.scrollLeft:t+this.width>this.scrollRight&&(t=this.scrollRight-this.width),this.tooltip.css({left:t,top:e}))},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=n,i(window).unbind("resize.jqs scroll.jqs")}}),i(function(){d(L)}),E=[],i.fn.sparkline=function(e,r){return this.each(function(){var o,a,s=new i.fn.sparkline.options(this,r),l=i(this);if(o=function(){var r,o,a,h,u,c,f;"html"===e||e===n?((f=this.getAttribute(s.get("tagValuesAttribute")))!==n&&null!==f||(f=l.html()),r=f.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")):r=e,o="auto"===s.get("width")?r.length*s.get("defaultPixelsPerValue"):s.get("width"),"auto"===s.get("height")?s.get("composite")&&i.data(this,"_jqs_vcanvas")||(h=t.createElement("span"),h.innerHTML="a",l.html(h),a=i(h).innerHeight()||i(h).height(),i(h).remove(),h=null):a=s.get("height"),s.get("disableInteraction")?u=!1:(u=i.data(this,"_jqs_mhandler"))?s.get("composite")||u.reset():(u=new m(this,s),i.data(this,"_jqs_mhandler",u)),!s.get("composite")||i.data(this,"_jqs_vcanvas")?((c=new(i.fn.sparkline[s.get("type")])(this,r,s,o,a)).render(),u&&u.registerSparkline(c)):i.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),i.data(this,"_jqs_errnotify",!0))},i(this).html()&&!s.get("disableHiddenCheck")&&i(this).is(":hidden")||!i(this).parents("body").length){if(!s.get("composite")&&i.data(this,"_jqs_pending"))for(a=E.length;a;a--)E[a-1][0]==this&&E.splice(a-1,1);E.push([this,o]),i.data(this,"_jqs_pending",!0)}else o.call(this)})},i.fn.sparkline.defaults=r(),i.sparkline_display_visible=function(){var t,e,n,r=[];for(e=0,n=E.length;e<n;e++)t=E[e][0],i(t).is(":visible")&&!i(t).parents().is(":hidden")?(E[e][1].call(t),i.data(E[e][0],"_jqs_pending",!1),r.push(e)):!i(t).closest("html").length&&!i.data(t,"_jqs_pending")&&(i.data(E[e][0],"_jqs_pending",!1),r.push(e));for(e=r.length;e;e--)E.splice(r[e-1],1)},i.fn.sparkline.options=o({init:function(t,e){var n,r,o,a;this.userOptions=e=e||{},this.tag=t,this.tagValCache={},o=(r=i.fn.sparkline.defaults).common,this.tagOptionsPrefix=e.enableTagOptions&&(e.tagOptionsPrefix||o.tagOptionsPrefix),n=(a=this.getTagSetting("type"))===z?r[e.type||o.type]:r[a],this.mergedOptions=i.extend({},o,n,e)},getTagSetting:function(t){var e,i,r,o,a=this.tagOptionsPrefix;if(!1===a||a===n)return z;if(this.tagValCache.hasOwnProperty(t))e=this.tagValCache.key;else{if((e=this.tag.getAttribute(a+t))===n||null===e)e=z;else if("["===e.substr(0,1))for(i=(e=e.substr(1,e.length-2).split(",")).length;i--;)e[i]=h(e[i].replace(/(^\s*)|(\s*$)/g,""));else if("{"===e.substr(0,1))for(r=e.substr(1,e.length-2).split(","),e={},i=r.length;i--;)o=r[i].split(":",2),e[o[0].replace(/(^\s*)|(\s*$)/g,"")]=h(o[1].replace(/(^\s*)|(\s*$)/g,""));else e=h(e);this.tagValCache.key=e}return e},get:function(t,e){var i,r=this.getTagSetting(t);return r!==z?r:(i=this.mergedOptions[t])===n?e:i}}),i.fn.sparkline._base=o({disabled:!1,init:function(t,e,r,o,a){this.el=t,this.$el=i(t),this.values=e,this.options=r,this.width=o,this.height=a,this.currentRegion=n},initTarget:function(){var t=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),t))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return!this.disabled||(this.el.innerHTML="",!1)},getRegion:function(){},setRegionHighlight:function(t,e,i){var r,o=this.currentRegion,a=!this.options.get("disableHighlight");return e>this.canvasWidth||i>this.canvasHeight||e<0||i<0?null:(r=this.getRegion(t,e,i),o!==r&&(o!==n&&a&&this.removeHighlight(),this.currentRegion=r,r!==n&&a&&this.renderHighlight(),!0))},clearRegionHighlight:function(){return this.currentRegion!==n&&(this.removeHighlight(),this.currentRegion=n,!0)},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(){},getCurrentRegionTooltip:function(){var t,e,r,o,s,l,h,u,c,f,p,d,g,v,y=this.options,m="",x=[];if(this.currentRegion===n)return"";if(t=this.getCurrentRegionFields(),p=y.get("tooltipFormatter"))return p(this,y,t);if(y.get("tooltipChartTitle")&&(m+='<div class="jqs jqstitle">'+y.get("tooltipChartTitle")+"</div>\n"),!(e=this.options.get("tooltipFormat")))return"";if(i.isArray(e)||(e=[e]),i.isArray(t)||(t=[t]),h=this.options.get("tooltipFormatFieldlist"),u=this.options.get("tooltipFormatFieldlistKey"),h&&u){for(c=[],l=t.length;l--;)f=t[l][u],-1!=(v=i.inArray(f,h))&&(c[v]=t[l]);t=c}for(r=e.length,g=t.length,l=0;l<r;l++)for("string"==typeof(d=e[l])&&(d=new a(d)),o=d.fclass||"jqsfield",v=0;v<g;v++)t[v].isNull&&y.get("tooltipSkipNull")||(i.extend(t[v],{prefix:y.get("tooltipPrefix"),suffix:y.get("tooltipSuffix")}),s=d.render(t[v],y.get("tooltipValueLookups"),y),x.push('<div class="'+o+'">'+s+"</div>"));return x.length?m+x.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(t,n){var i,r,o,a,l=n.get("highlightColor"),h=n.get("highlightLighten");if(l)return l;if(h&&(i=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(t))){for(o=[],r=4===t.length?16:1,a=0;a<3;a++)o[a]=s(e.round(parseInt(i[a+1],16)*r*h),0,255);return"rgb("+o.join(",")+")"}return t}}),b={changeHighlight:function(t){var e,n=this.currentRegion,r=this.target,o=this.regionShapes[n];o&&(e=this.renderRegion(n,t),i.isArray(e)||i.isArray(o)?(r.replaceWithShapes(o,e),this.regionShapes[n]=i.map(e,function(t){return t.id})):(r.replaceWithShape(o,e),this.regionShapes[n]=e.id))},render:function(){var t,e,n,r,o=this.values,a=this.target,s=this.regionShapes;if(this.cls._super.render.call(this)){for(n=o.length;n--;)if(t=this.renderRegion(n))if(i.isArray(t)){for(e=[],r=t.length;r--;)t[r].append(),e.push(t[r].id);s[n]=e}else t.append(),s[n]=t.id;else s[n]=null;a.render()}}},i.fn.sparkline.line=w=o(i.fn.sparkline._base,{type:"line",init:function(t,e,n,i,r){w._super.init.call(this,t,e,n,i,r),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(t,e){var i,r=this.regionMap;for(i=r.length;i--;)if(null!==r[i]&&e>=r[i][0]&&e<=r[i][1])return r[i][2];return n},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:null===this.yvalues[t],x:this.xvalues[t],y:this.yvalues[t],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:t}},renderHighlight:function(){var t,e,i=this.currentRegion,r=this.target,o=this.vertices[i],a=this.options,s=a.get("spotRadius"),l=a.get("highlightSpotColor"),h=a.get("highlightLineColor");o&&(s&&l&&(t=r.drawCircle(o[0],o[1],s,n,l),this.highlightSpotId=t.id,r.insertAfterShape(this.lastShapeId,t)),h&&(e=r.drawLine(o[0],this.canvasTop,o[0],this.canvasTop+this.canvasHeight,h),this.highlightLineId=e.id,r.insertAfterShape(this.lastShapeId,e)))},removeHighlight:function(){var t=this.target;this.highlightSpotId&&(t.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(t.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var t,n,i,r,o,a=this.values,s=a.length,l=this.xvalues,h=this.yvalues,u=this.yminmax;for(t=0;t<s;t++)n=a[t],i="string"==typeof a[t],r="object"==typeof a[t]&&a[t]instanceof Array,o=i&&a[t].split(":"),i&&2===o.length?(l.push(Number(o[0])),h.push(Number(o[1])),u.push(Number(o[1]))):r?(l.push(n[0]),h.push(n[1]),u.push(n[1])):(l.push(t),null===a[t]||"null"===a[t]?h.push(null):(h.push(Number(n)),u.push(Number(n))));this.options.get("xvalues")&&(l=this.options.get("xvalues")),this.maxy=this.maxyorg=e.max.apply(e,u),this.miny=this.minyorg=e.min.apply(e,u),this.maxx=e.max.apply(e,l),this.minx=e.min.apply(e,l),this.xvalues=l,this.yvalues=h,this.yminmax=u},processRangeOptions:function(){var t=this.options,e=t.get("normalRangeMin"),i=t.get("normalRangeMax");e!==n&&(e<this.miny&&(this.miny=e),i>this.maxy&&(this.maxy=i)),t.get("chartRangeMin")!==n&&(t.get("chartRangeClip")||t.get("chartRangeMin")<this.miny)&&(this.miny=t.get("chartRangeMin")),t.get("chartRangeMax")!==n&&(t.get("chartRangeClip")||t.get("chartRangeMax")>this.maxy)&&(this.maxy=t.get("chartRangeMax")),t.get("chartRangeMinX")!==n&&(t.get("chartRangeClipX")||t.get("chartRangeMinX")<this.minx)&&(this.minx=t.get("chartRangeMinX")),t.get("chartRangeMaxX")!==n&&(t.get("chartRangeClipX")||t.get("chartRangeMaxX")>this.maxx)&&(this.maxx=t.get("chartRangeMaxX"))},drawNormalRange:function(t,i,r,o,a){var s=this.options.get("normalRangeMin"),l=this.options.get("normalRangeMax"),h=i+e.round(r-r*((l-this.miny)/a)),u=e.round(r*(l-s)/a);this.target.drawRect(t,h,o,u,n,this.options.get("normalRangeColor")).append()},render:function(){var t,r,o,a,s,l,h,u,c,f,p,d,g,v,m,x,b,_,M,S,C,k,A,L,T,R=this.options,P=this.target,F=this.canvasWidth,E=this.canvasHeight,z=this.vertices,N=R.get("spotRadius"),B=this.regionMap;if(w._super.render.call(this)&&(this.scanValues(),this.processRangeOptions(),A=this.xvalues,L=this.yvalues,this.yminmax.length&&!(this.yvalues.length<2))){for(a=s=0,t=this.maxx-this.minx==0?1:this.maxx-this.minx,r=this.maxy-this.miny==0?1:this.maxy-this.miny,o=this.yvalues.length-1,N&&(F<4*N||E<4*N)&&(N=0),N&&(((C=R.get("highlightSpotColor")&&!R.get("disableInteraction"))||R.get("minSpotColor")||R.get("spotColor")&&L[o]===this.miny)&&(E-=e.ceil(N)),(C||R.get("maxSpotColor")||R.get("spotColor")&&L[o]===this.maxy)&&(E-=e.ceil(N),a+=e.ceil(N)),(C||(R.get("minSpotColor")||R.get("maxSpotColor"))&&(L[0]===this.miny||L[0]===this.maxy))&&(s+=e.ceil(N),F-=e.ceil(N)),(C||R.get("spotColor")||R.get("minSpotColor")||R.get("maxSpotColor")&&(L[o]===this.miny||L[o]===this.maxy))&&(F-=e.ceil(N))),E--,R.get("normalRangeMin")!==n&&!R.get("drawNormalOnTop")&&this.drawNormalRange(s,a,E,F,r),u=[h=[]],v=m=null,x=L.length,T=0;T<x;T++)c=A[T],p=A[T+1],f=L[T],d=s+e.round((c-this.minx)*(F/t)),g=T<x-1?s+e.round((p-this.minx)*(F/t)):F,m=d+(g-d)/2,B[T]=[v||0,m,T],v=m,null===f?T&&(null!==L[T-1]&&(h=[],u.push(h)),z.push(null)):(f<this.miny&&(f=this.miny),f>this.maxy&&(f=this.maxy),h.length||h.push([d,a+E]),l=[d,a+e.round(E-E*((f-this.miny)/r))],h.push(l),z.push(l));for(b=[],_=[],M=u.length,T=0;T<M;T++)(h=u[T]).length&&(R.get("fillColor")&&(h.push([h[h.length-1][0],a+E]),_.push(h.slice(0)),h.pop()),h.length>2&&(h[0]=[h[0][0],h[1][1]]),b.push(h));for(M=_.length,T=0;T<M;T++)P.drawShape(_[T],R.get("fillColor"),R.get("fillColor")).append();for(R.get("normalRangeMin")!==n&&R.get("drawNormalOnTop")&&this.drawNormalRange(s,a,E,F,r),M=b.length,T=0;T<M;T++)P.drawShape(b[T],R.get("lineColor"),n,R.get("lineWidth")).append();if(N&&R.get("valueSpots"))for((S=R.get("valueSpots")).get===n&&(S=new y(S)),T=0;T<x;T++)(k=S.get(L[T]))&&P.drawCircle(s+e.round((A[T]-this.minx)*(F/t)),a+e.round(E-E*((L[T]-this.miny)/r)),N,n,k).append();N&&R.get("spotColor")&&null!==L[o]&&P.drawCircle(s+e.round((A[A.length-1]-this.minx)*(F/t)),a+e.round(E-E*((L[o]-this.miny)/r)),N,n,R.get("spotColor")).append(),this.maxy!==this.minyorg&&(N&&R.get("minSpotColor")&&(c=A[i.inArray(this.minyorg,L)],P.drawCircle(s+e.round((c-this.minx)*(F/t)),a+e.round(E-E*((this.minyorg-this.miny)/r)),N,n,R.get("minSpotColor")).append()),N&&R.get("maxSpotColor")&&(c=A[i.inArray(this.maxyorg,L)],P.drawCircle(s+e.round((c-this.minx)*(F/t)),a+e.round(E-E*((this.maxyorg-this.miny)/r)),N,n,R.get("maxSpotColor")).append())),this.lastShapeId=P.getLastShapeId(),this.canvasTop=a,P.render()}}}),i.fn.sparkline.bar=_=o(i.fn.sparkline._base,b,{type:"bar",init:function(t,r,o,a,l){var f,p,d,g,v,m,x,b,w,M,S,C,k,A,L,T,R,P,F,E,z,N,B=parseInt(o.get("barWidth"),10),I=parseInt(o.get("barSpacing"),10),D=o.get("chartRangeMin"),H=o.get("chartRangeMax"),W=o.get("chartRangeClip"),O=Infinity,q=-Infinity;for(_._super.init.call(this,t,r,o,a,l),m=0,x=r.length;m<x;m++)((f="string"==typeof(E=r[m])&&E.indexOf(":")>-1)||i.isArray(E))&&(L=!0,f&&(E=r[m]=u(E.split(":"))),E=c(E,null),p=e.min.apply(e,E),d=e.max.apply(e,E),p<O&&(O=p),d>q&&(q=d));this.stacked=L,this.regionShapes={},this.barWidth=B,this.barSpacing=I,this.totalBarWidth=B+I,this.width=a=r.length*B+(r.length-1)*I,this.initTarget(),W&&(k=D===n?-Infinity:D,A=H===n?Infinity:H),v=[],g=L?[]:v;var j=[],Y=[];for(m=0,x=r.length;m<x;m++)if(L)for(T=r[m],r[m]=F=[],j[m]=0,g[m]=Y[m]=0,R=0,P=T.length;R<P;R++)null!==(E=F[R]=W?s(T[R],k,A):T[R])&&(E>0&&(j[m]+=E),O<0&&q>0?E<0?Y[m]+=e.abs(E):g[m]+=E:g[m]+=e.abs(E-(E<0?q:O)),v.push(E));else E=W?s(r[m],k,A):r[m],null!==(E=r[m]=h(E))&&v.push(E);this.max=C=e.max.apply(e,v),this.min=S=e.min.apply(e,v),this.stackMax=q=L?e.max.apply(e,j):C,this.stackMin=O=L?e.min.apply(e,v):S,o.get("chartRangeMin")!==n&&(o.get("chartRangeClip")||o.get("chartRangeMin")<S)&&(S=o.get("chartRangeMin")),o.get("chartRangeMax")!==n&&(o.get("chartRangeClip")||o.get("chartRangeMax")>C)&&(C=o.get("chartRangeMax")),this.zeroAxis=w=o.get("zeroAxis",!0),M=S<=0&&C>=0&&w?0:0==w?S:S>0?S:C,this.xaxisOffset=M,b=L?e.max.apply(e,g)+e.max.apply(e,Y):C-S,this.canvasHeightEf=w&&S<0?this.canvasHeight-2:this.canvasHeight-1,S<M?(N=L&&C>=0?q:C,(z=(N-M)/b*this.canvasHeight)!==e.ceil(z)&&(this.canvasHeightEf-=2,z=e.ceil(z))):z=this.canvasHeight,this.yoffset=z,i.isArray(o.get("colorMap"))?(this.colorMapByIndex=o.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=o.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===n&&(this.colorMapByValue=new y(this.colorMapByValue))),this.range=b},getRegion:function(t,i){var r=e.floor(i/this.totalBarWidth);return r<0||r>=this.values.length?n:r},getCurrentRegionFields:function(){var t,e,n=this.currentRegion,i=g(this.values[n]),r=[];for(e=i.length;e--;)t=i[e],r.push({isNull:null===t,value:t,color:this.calcColor(e,t,n),offset:n});return r},calcColor:function(t,e,r){var o,a,s=this.colorMapByIndex,l=this.colorMapByValue,h=this.options;return o=this.stacked?h.get("stackedBarColor"):e<0?h.get("negBarColor"):h.get("barColor"),0===e&&h.get("zeroColor")!==n&&(o=h.get("zeroColor")),l&&(a=l.get(e))?o=a:s&&s.length>r&&(o=s[r]),i.isArray(o)?o[t%o.length]:o},renderRegion:function(t,r){
var o,a,s,l,h,u,c,f,d,g,v=this.values[t],y=this.options,m=this.xaxisOffset,x=[],b=this.range,w=this.stacked,_=this.target,M=t*this.totalBarWidth,S=this.canvasHeightEf,C=this.yoffset;if(v=i.isArray(v)?v:[v],c=v.length,f=v[0],l=p(null,v),g=p(m,v,!0),l)return y.get("nullColor")?(s=r?y.get("nullColor"):this.calcHighlightColor(y.get("nullColor"),y),o=C>0?C-1:C,_.drawRect(M,o,this.barWidth-1,0,s,s)):n;for(h=C,u=0;u<c;u++){if(f=v[u],w&&f===m){if(!g||d)continue;d=!0}a=b>0?e.floor(S*(e.abs(f-m)/b))+1:1,f<m||f===m&&0===C?(o=h,h+=a):(o=C-a,C-=a),s=this.calcColor(u,f,t),r&&(s=this.calcHighlightColor(s,y)),x.push(_.drawRect(M,o,this.barWidth-1,a-1,s,s))}return 1===x.length?x[0]:x}}),i.fn.sparkline.tristate=M=o(i.fn.sparkline._base,b,{type:"tristate",init:function(t,e,r,o,a){var s=parseInt(r.get("barWidth"),10),l=parseInt(r.get("barSpacing"),10);M._super.init.call(this,t,e,r,o,a),this.regionShapes={},this.barWidth=s,this.barSpacing=l,this.totalBarWidth=s+l,this.values=i.map(e,Number),this.width=o=e.length*s+(e.length-1)*l,i.isArray(r.get("colorMap"))?(this.colorMapByIndex=r.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=r.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===n&&(this.colorMapByValue=new y(this.colorMapByValue))),this.initTarget()},getRegion:function(t,n){return e.floor(n/this.totalBarWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===n,value:this.values[t],color:this.calcColor(this.values[t],t),offset:t}},calcColor:function(t,e){var n,i=this.values,r=this.options,o=this.colorMapByIndex,a=this.colorMapByValue;return a&&(n=a.get(t))?n:o&&o.length>e?o[e]:i[e]<0?r.get("negBarColor"):i[e]>0?r.get("posBarColor"):r.get("zeroBarColor")},renderRegion:function(t,n){var i,r,o,a,s,l,h=this.values,u=this.options,c=this.target;if(i=c.pixelHeight,o=e.round(i/2),a=t*this.totalBarWidth,h[t]<0?(s=o,r=o-1):h[t]>0?(s=0,r=o-1):(s=o-1,r=2),null!==(l=this.calcColor(h[t],t)))return n&&(l=this.calcHighlightColor(l,u)),c.drawRect(a,s,this.barWidth-1,r-1,l,l)}}),i.fn.sparkline.discrete=S=o(i.fn.sparkline._base,b,{type:"discrete",init:function(t,r,o,a,s){S._super.init.call(this,t,r,o,a,s),this.regionShapes={},this.values=r=i.map(r,Number),this.min=e.min.apply(e,r),this.max=e.max.apply(e,r),this.range=this.max-this.min,this.width=a="auto"===o.get("width")?2*r.length:this.width,this.interval=e.floor(a/r.length),this.itemWidth=a/r.length,o.get("chartRangeMin")!==n&&(o.get("chartRangeClip")||o.get("chartRangeMin")<this.min)&&(this.min=o.get("chartRangeMin")),o.get("chartRangeMax")!==n&&(o.get("chartRangeClip")||o.get("chartRangeMax")>this.max)&&(this.max=o.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight="auto"===o.get("lineHeight")?e.round(.3*this.canvasHeight):o.get("lineHeight"))},getRegion:function(t,n){return e.floor(n/this.itemWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===n,value:this.values[t],offset:t}},renderRegion:function(t,n){var i,r,o,a,l=this.values,h=this.options,u=this.min,c=this.max,f=this.range,p=this.interval,d=this.target,g=this.canvasHeight,v=this.lineHeight,y=g-v;return r=s(l[t],u,c),a=t*p,i=e.round(y-y*((r-u)/f)),o=h.get("thresholdColor")&&r<h.get("thresholdValue")?h.get("thresholdColor"):h.get("lineColor"),n&&(o=this.calcHighlightColor(o,h)),d.drawLine(a,i,a,i+v,o)}}),i.fn.sparkline.bullet=C=o(i.fn.sparkline._base,{type:"bullet",init:function(t,i,r,o,a){var s,l,h;C._super.init.call(this,t,i,r,o,a),this.values=i=u(i),(h=i.slice())[0]=null===h[0]?h[2]:h[0],h[1]=null===i[1]?h[2]:h[1],s=e.min.apply(e,i),l=e.max.apply(e,i),s=r.get("base")===n?s<0?s:0:r.get("base"),this.min=s,this.max=l,this.range=l-s,this.shapes={},this.valueShapes={},this.regiondata={},this.width=o="auto"===r.get("width")?"4.0em":o,this.target=this.$el.simpledraw(o,a,r.get("composite")),i.length||(this.disabled=!0),this.initTarget()},getRegion:function(t,e,i){var r=this.target.getShapeAt(t,e,i);return r!==n&&this.shapes[r]!==n?this.shapes[r]:n},getCurrentRegionFields:function(){var t=this.currentRegion;return{fieldkey:t.substr(0,1),value:this.values[t.substr(1)],region:t}},changeHighlight:function(t){var e,n=this.currentRegion,i=this.valueShapes[n];switch(delete this.shapes[i],n.substr(0,1)){case"r":e=this.renderRange(n.substr(1),t);break;case"p":e=this.renderPerformance(t);break;case"t":e=this.renderTarget(t)}this.valueShapes[n]=e.id,this.shapes[e.id]=n,this.target.replaceWithShape(i,e)},renderRange:function(t,n){var i=this.values[t],r=e.round(this.canvasWidth*((i-this.min)/this.range)),o=this.options.get("rangeColors")[t-2];return n&&(o=this.calcHighlightColor(o,this.options)),this.target.drawRect(0,0,r-1,this.canvasHeight-1,o,o)},renderPerformance:function(t){var n=this.values[1],i=e.round(this.canvasWidth*((n-this.min)/this.range)),r=this.options.get("performanceColor");return t&&(r=this.calcHighlightColor(r,this.options)),this.target.drawRect(0,e.round(.3*this.canvasHeight),i-1,e.round(.4*this.canvasHeight)-1,r,r)},renderTarget:function(t){var n=this.values[0],i=e.round(this.canvasWidth*((n-this.min)/this.range)-this.options.get("targetWidth")/2),r=e.round(.1*this.canvasHeight),o=this.canvasHeight-2*r,a=this.options.get("targetColor");return t&&(a=this.calcHighlightColor(a,this.options)),this.target.drawRect(i,r,this.options.get("targetWidth")-1,o-1,a,a)},render:function(){var t,e,n=this.values.length,i=this.target;if(C._super.render.call(this)){for(t=2;t<n;t++)e=this.renderRange(t).append(),this.shapes[e.id]="r"+t,this.valueShapes["r"+t]=e.id;null!==this.values[1]&&(e=this.renderPerformance().append(),this.shapes[e.id]="p1",this.valueShapes.p1=e.id),null!==this.values[0]&&(e=this.renderTarget().append(),this.shapes[e.id]="t0",this.valueShapes.t0=e.id),i.render()}}}),i.fn.sparkline.pie=k=o(i.fn.sparkline._base,{type:"pie",init:function(t,n,r,o,a){var s,l=0;if(k._super.init.call(this,t,n,r,o,a),this.shapes={},this.valueShapes={},this.values=n=i.map(n,Number),"auto"===r.get("width")&&(this.width=this.height),n.length>0)for(s=n.length;s--;)l+=n[s];this.total=l,this.initTarget(),this.radius=e.floor(e.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(t,e,i){var r=this.target.getShapeAt(t,e,i);return r!==n&&this.shapes[r]!==n?this.shapes[r]:n},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===n,value:this.values[t],percent:this.values[t]/this.total*100,color:this.options.get("sliceColors")[t%this.options.get("sliceColors").length],offset:t}},changeHighlight:function(t){var e=this.currentRegion,n=this.renderSlice(e,t),i=this.valueShapes[e];delete this.shapes[i],this.target.replaceWithShape(i,n),this.valueShapes[e]=n.id,this.shapes[n.id]=e},renderSlice:function(t,i){var r,o,a,s,l,h=this.target,u=this.options,c=this.radius,f=u.get("borderWidth"),p=u.get("offset"),d=2*e.PI,g=this.values,v=this.total,y=p?2*e.PI*(p/360):0;for(s=g.length,a=0;a<s;a++){if(r=y,o=y,v>0&&(o=y+d*(g[a]/v)),t===a)return l=u.get("sliceColors")[a%u.get("sliceColors").length],i&&(l=this.calcHighlightColor(l,u)),h.drawPieSlice(c,c,c-f,r,o,n,l);y=o}},render:function(){var t,i,r=this.target,o=this.values,a=this.options,s=this.radius,l=a.get("borderWidth");if(k._super.render.call(this)){for(l&&r.drawCircle(s,s,e.floor(s-l/2),a.get("borderColor"),n,l).append(),i=o.length;i--;)o[i]&&(t=this.renderSlice(i).append(),this.valueShapes[i]=t.id,this.shapes[t.id]=i);r.render()}}}),i.fn.sparkline.box=A=o(i.fn.sparkline._base,{type:"box",init:function(t,e,n,r,o){A._super.init.call(this,t,e,n,r,o),this.values=i.map(e,Number),this.width="auto"===n.get("width")?"4.0em":r,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var t=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==n&&t.push({field:"lo",value:this.loutlier}),this.routlier!==n&&t.push({field:"ro",value:this.routlier}),this.lwhisker!==n&&t.push({field:"lw",value:this.lwhisker}),this.rwhisker!==n&&t.push({field:"rw",value:this.rwhisker}),t},render:function(){var t,i,r,o,a,s,h,u,c,f,p,d=this.target,g=this.values,v=g.length,y=this.options,m=this.canvasWidth,x=this.canvasHeight,b=y.get("chartRangeMin")===n?e.min.apply(e,g):y.get("chartRangeMin"),w=y.get("chartRangeMax")===n?e.max.apply(e,g):y.get("chartRangeMax"),_=0;if(A._super.render.call(this)){if(y.get("raw"))y.get("showOutliers")&&g.length>5?(i=g[0],t=g[1],o=g[2],a=g[3],s=g[4],h=g[5],u=g[6]):(t=g[0],o=g[1],a=g[2],s=g[3],h=g[4]);else if(g.sort(function(t,e){return t-e}),o=l(g,1),a=l(g,2),s=l(g,3),r=s-o,y.get("showOutliers")){for(t=h=n,c=0;c<v;c++)t===n&&g[c]>o-r*y.get("outlierIQR")&&(t=g[c]),g[c]<s+r*y.get("outlierIQR")&&(h=g[c]);i=g[0],u=g[v-1]}else t=g[0],h=g[v-1];this.quartiles=[o,a,s],this.lwhisker=t,this.rwhisker=h,this.loutlier=i,this.routlier=u,p=m/(w-b+1),y.get("showOutliers")&&(_=e.ceil(y.get("spotRadius")),m-=2*e.ceil(y.get("spotRadius")),p=m/(w-b+1),i<t&&d.drawCircle((i-b)*p+_,x/2,y.get("spotRadius"),y.get("outlierLineColor"),y.get("outlierFillColor")).append(),u>h&&d.drawCircle((u-b)*p+_,x/2,y.get("spotRadius"),y.get("outlierLineColor"),y.get("outlierFillColor")).append()),d.drawRect(e.round((o-b)*p+_),e.round(.1*x),e.round((s-o)*p),e.round(.8*x),y.get("boxLineColor"),y.get("boxFillColor")).append(),d.drawLine(e.round((t-b)*p+_),e.round(x/2),e.round((o-b)*p+_),e.round(x/2),y.get("lineColor")).append(),d.drawLine(e.round((t-b)*p+_),e.round(x/4),e.round((t-b)*p+_),e.round(x-x/4),y.get("whiskerColor")).append(),d.drawLine(e.round((h-b)*p+_),e.round(x/2),e.round((s-b)*p+_),e.round(x/2),y.get("lineColor")).append(),d.drawLine(e.round((h-b)*p+_),e.round(x/4),e.round((h-b)*p+_),e.round(x-x/4),y.get("whiskerColor")).append(),d.drawLine(e.round((a-b)*p+_),e.round(.1*x),e.round((a-b)*p+_),e.round(.9*x),y.get("medianColor")).append(),y.get("target")&&(f=e.ceil(y.get("spotRadius")),d.drawLine(e.round((y.get("target")-b)*p+_),e.round(x/2-f),e.round((y.get("target")-b)*p+_),e.round(x/2+f),y.get("targetColor")).append(),d.drawLine(e.round((y.get("target")-b)*p+_-f),e.round(x/2),e.round((y.get("target")-b)*p+_+f),e.round(x/2),y.get("targetColor")).append()),d.render()}}}),T=o({init:function(t,e,n,i){this.target=t,this.id=e,this.type=n,this.args=i},append:function(){return this.target.appendShape(this),this}}),R=o({_pxregex:/(\d+)(px)?\s*$/i,init:function(t,e,n){t&&(this.width=t,this.height=e,this.target=n,this.lastShapeId=null,n[0]&&(n=n[0]),i.data(n,"_jqs_vcanvas",this))},drawLine:function(t,e,n,i,r,o){return this.drawShape([[t,e],[n,i]],r,o)},drawShape:function(t,e,n,i){return this._genShape("Shape",[t,e,n,i])},drawCircle:function(t,e,n,i,r,o){return this._genShape("Circle",[t,e,n,i,r,o])},drawPieSlice:function(t,e,n,i,r,o,a){return this._genShape("PieSlice",[t,e,n,i,r,o,a])},drawRect:function(t,e,n,i,r,o){return this._genShape("Rect",[t,e,n,i,r,o])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(t,e){i(e).html(t)},_calculatePixelDims:function(t,e,n){var r;r=this._pxregex.exec(e),this.pixelHeight=r?r[1]:i(n).height(),r=this._pxregex.exec(t),this.pixelWidth=r?r[1]:i(n).width()},_genShape:function(t,e){var n=N++;return e.unshift(n),new T(this,n,t,e)},appendShape:function(){alert("appendShape not implemented")},replaceWithShape:function(){alert("replaceWithShape not implemented")},insertAfterShape:function(){alert("insertAfterShape not implemented")},removeShapeId:function(){alert("removeShapeId not implemented")},getShapeAt:function(){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),P=o(R,{init:function(e,r,o,a){P._super.init.call(this,e,r,o),this.canvas=t.createElement("canvas"),o[0]&&(o=o[0]),i.data(o,"_jqs_vcanvas",this),i(this.canvas).css({display:"inline-block",width:e,height:r,verticalAlign:"top"}),this._insert(this.canvas,o),this._calculatePixelDims(e,r,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=a,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=n,i(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(t,e,i){var r=this.canvas.getContext("2d");return t!==n&&(r.strokeStyle=t),r.lineWidth=i===n?1:i,e!==n&&(r.fillStyle=e),r},reset:function(){this._getContext().clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=n},_drawShape:function(t,e,i,r,o){var a,s,l=this._getContext(i,r,o);for(l.beginPath(),l.moveTo(e[0][0]+.5,e[0][1]+.5),a=1,s=e.length;a<s;a++)l.lineTo(e[a][0]+.5,e[a][1]+.5);i!==n&&l.stroke(),r!==n&&l.fill(),this.targetX!==n&&this.targetY!==n&&l.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawCircle:function(t,i,r,o,a,s,l){var h=this._getContext(a,s,l);h.beginPath(),h.arc(i,r,o,0,2*e.PI,!1),this.targetX!==n&&this.targetY!==n&&h.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t),a!==n&&h.stroke(),s!==n&&h.fill()},_drawPieSlice:function(t,e,i,r,o,a,s,l){var h=this._getContext(s,l);h.beginPath(),h.moveTo(e,i),h.arc(e,i,r,o,a,!1),h.lineTo(e,i),h.closePath(),s!==n&&h.stroke(),l&&h.fill(),this.targetX!==n&&this.targetY!==n&&h.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawRect:function(t,e,n,i,r,o,a){return this._drawShape(t,[[e,n],[e+i,n],[e+i,n+r],[e,n+r],[e,n]],o,a)},appendShape:function(t){return this.shapes[t.id]=t,this.shapeseq.push(t.id),this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var n,i=this.shapeseq;for(this.shapes[e.id]=e,n=i.length;n--;)i[n]==t&&(i[n]=e.id);delete this.shapes[t]},replaceWithShapes:function(t,e){var n,i,r,o=this.shapeseq,a={};for(i=t.length;i--;)a[t[i]]=!0;for(i=o.length;i--;)n=o[i],a[n]&&(o.splice(i,1),delete this.shapes[n],r=i);for(i=e.length;i--;)o.splice(r,0,e[i].id),this.shapes[e[i].id]=e[i]},insertAfterShape:function(t,e){var n,i=this.shapeseq;for(n=i.length;n--;)if(i[n]===t)return i.splice(n+1,0,e.id),void(this.shapes[e.id]=e)},removeShapeId:function(t){var e,n=this.shapeseq;for(e=n.length;e--;)if(n[e]===t){n.splice(e,1);break}delete this.shapes[t]},getShapeAt:function(t,e,n){return this.targetX=e,this.targetY=n,this.render(),this.currentTargetShapeId},render:function(){var t,e,n,i=this.shapeseq,r=this.shapes,o=i.length;for(this._getContext().clearRect(0,0,this.pixelWidth,this.pixelHeight),n=0;n<o;n++)t=i[n],e=r[t],this["_draw"+e.type].apply(this,e.args);this.interact||(this.shapes={},this.shapeseq=[])}}),F=o(R,{init:function(e,n,r){var o;F._super.init.call(this,e,n,r),r[0]&&(r=r[0]),i.data(r,"_jqs_vcanvas",this),this.canvas=t.createElement("span"),i(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:e,height:n,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,r),this._calculatePixelDims(e,n,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,o='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",o),this.group=i(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(t,e,i,r,o){var a,s,l,h,u,c,f=[];for(c=0,u=e.length;c<u;c++)f[c]=e[c][0]+","+e[c][1];return a=f.splice(0,1),o=o===n?1:o,s=i===n?' stroked="false" ':' strokeWeight="'+o+'px" strokeColor="'+i+'" ',l=r===n?' filled="false"':' fillColor="'+r+'" filled="true" ',h=f[0]===f[f.length-1]?"x ":"",'<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+t+'" '+s+l+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+a+" l "+f.join(", ")+" "+h+'e"> </v:shape>'},_drawCircle:function(t,e,i,r,o,a,s){var l,h;return e-=r,i-=r,l=o===n?' stroked="false" ':' strokeWeight="'+s+'px" strokeColor="'+o+'" ',h=a===n?' filled="false"':' fillColor="'+a+'" filled="true" ','<v:oval  id="jqsshape'+t+'" '+l+h+' style="position:absolute;top:'+i+"px; left:"+e+"px; width:"+2*r+"px; height:"+2*r+'px"></v:oval>'},_drawPieSlice:function(t,i,r,o,a,s,l,h){var u,c,f,p,d,g,v;if(a===s)return"";if(s-a==2*e.PI&&(a=0,s=2*e.PI),c=i+e.round(e.cos(a)*o),f=r+e.round(e.sin(a)*o),p=i+e.round(e.cos(s)*o),d=r+e.round(e.sin(s)*o),c===p&&f===d){if(s-a<e.PI)return"";c=p=i+o,f=d=r}return c===p&&f===d&&s-a<e.PI?"":(u=[i-o,r-o,i+o,r+o,c,f,p,d],g=l===n?' stroked="false" ':' strokeWeight="1px" strokeColor="'+l+'" ',v=h===n?' filled="false"':' fillColor="'+h+'" filled="true" ','<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+t+'" '+g+v+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+i+","+r+" wa "+u.join(", ")+' x e"> </v:shape>')},_drawRect:function(t,e,n,i,r,o,a){return this._drawShape(t,[[e,n],[e,n+r],[e+i,n+r],[e+i,n],[e,n]],o,a)},reset:function(){this.group.innerHTML=""},appendShape:function(t){var e=this["_draw"+t.type].apply(this,t.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",e):this.prerender+=e,this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var n=i("#jqsshape"+t),r=this["_draw"+e.type].apply(this,e.args);n[0].outerHTML=r},replaceWithShapes:function(t,e){var n,r=i("#jqsshape"+t[0]),o="",a=e.length;for(n=0;n<a;n++)o+=this["_draw"+e[n].type].apply(this,e[n].args);for(r[0].outerHTML=o,n=1;n<t.length;n++)i("#jqsshape"+t[n]).remove()},insertAfterShape:function(t,e){var n=i("#jqsshape"+t),r=this["_draw"+e.type].apply(this,e.args);n[0].insertAdjacentHTML("afterEnd",r)},removeShapeId:function(t){var e=i("#jqsshape"+t);this.group.removeChild(e[0])},getShapeAt:function(t){return t.id.substr(8)},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})}(document,Math);